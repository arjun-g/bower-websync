
/*
 * Title: WebSync Client for JavaScript
 * Version: 4.8.8
 * Copyright Frozen Mountain Software 2011+
 */

!function(e,t,n){if("function"==typeof define&&define.amd)define(e,t,n);else if("object"==typeof exports){for(var s=0;s<t.length;s++)require("./"+t[s]);module.exports=n()}else this[e]=n()}("fm.websync",["fm"],function(){if("undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),!window.fm)throw new Error("fm must be loaded before fm.websync.");window.fm.websync||(window.fm.websync={}),fm.websync.getVersion=function(){return"4.8.8"},fm.websync.connectRetryMode={Aggressive:1,Intelligent:2,None:3,Default:2},fm.websync.concurrencyMode={Low:1,High:2,Default:1},fm.websync.reconnect={Retry:1,Handshake:2,None:3},fm.websync.connectionType={WebSocket:1,LongPolling:2,CallbackPolling:3,IFrame:4,Flash:5,Unknown:99},fm.websync.messageType={Connect:1,Disconnect:2,Bind:3,Unbind:4,Subscribe:5,Unsubscribe:6,Publish:7,Notify:8,Service:9,Stream:10,Unknown:11};var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.backoffArgs=function(n){function s(){this.setLastTimeout=e(this.setLastTimeout,this),this.setIndex=e(this.setIndex,this),this.getLastTimeout=e(this.getLastTimeout,this),this.getIndex=e(this.getIndex,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._index=0,s.prototype._lastTimeout=0,s.prototype.getIndex=function(){return this._index},s.prototype.getLastTimeout=function(){return this._lastTimeout},s.prototype.setIndex=function(){var e;return e=arguments[0],this._index=e},s.prototype.setLastTimeout=function(){var e;return e=arguments[0],this._lastTimeout=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.extensible=function(n){function s(){this.setMeta=e(this.setMeta,this),this.setExtensionValue=e(this.setExtensionValue,this),this.getMeta=e(this.getMeta,this),this.getExtensionValue=e(this.getExtensionValue,this),this.setMetaJson=e(this.setMetaJson,this),this.setExtensionValueJson=e(this.setExtensionValueJson,this),this.setExtensions=e(this.setExtensions,this),this.getMetaJson=e(this.getMetaJson,this),this.getExtensionValueJson=e(this.getExtensionValueJson,this),this.getExtensions=e(this.getExtensions,this),this.getExtensionNames=e(this.getExtensionNames,this),this.getExtensionCount=e(this.getExtensionCount,this),this.copyExtensions=e(this.copyExtensions,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__extensions=null,s._acknowledgementExtensionName="fm.ack",s._disableBinaryExtensionName="fm.dbin",s._lastClientIdExtensionName="fm.lcid",s._lastSessionIdExtensionName="fm.lsid",s._metaExtensionName="fm.meta",s._notifyClientIdExtensionName="fm.notify",s._notifyingClientExtensionName="fm.notifying",s._publishingClientExtensionName="fm.publishing",s._serverActionsExtensionName="fm.server",s._serverTimeoutExtensionName="fm.timeout",s._sessionIdExtensionName="fm.sessionId",s._tagExtensionName="fm.tag",s.convertKeyToRecord=function(){var e;return e=arguments[0],new fm.websync.record(e)},s.convertRecordToKey=function(){var e;return e=arguments[0],e.getKey()},s.sharedGetChannel=function(){var e;return e=arguments[0],fm.global.equals(e,null)||fm.global.equals(e.length,0)?null:e[0]},s.sharedGetChannels=function(){var e;return e=arguments[0]},s.sharedGetKey=function(){var e,t;return t=arguments[0],e=fm.websync.extensible.sharedGetRecord(t),fm.global.equals(e,null)?null:fm.websync.extensible.convertRecordToKey(e)},s.sharedGetKeys=function(){var e,t,n,s,r,i;if(i=arguments[0],i=fm.websync.extensible.sharedGetRecords(i),fm.global.equals(i,null))return null;for(s=[],e=i,t=0,n=e.length;n>t;t++)r=e[t],fm.arrayExtensions.add(s,fm.websync.extensible.convertRecordToKey(r));return fm.arrayExtensions.toArray(s)},s.sharedGetRecord=function(){var e;return e=arguments[0],fm.global.equals(e,null)||fm.global.equals(e.length,0)?null:e[0]},s.sharedGetRecords=function(){var e;return e=arguments[0]},s.sharedSetChannel=function(){var e,t,n,s,r;if(2===arguments.length){if(n=arguments[0],r=arguments[1],fm.global.equals(n,null))return null;if(s=null,e=new fm.holder(s),t=fm.websync.extensible.validateChannel(n,e),s=e.getValue(),r&&!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",s));return[n]}return 1===arguments.length?(n=arguments[0],fm.websync.extensible.sharedSetChannel(n,!0)):void 0},s.sharedSetChannels=function(){var e,t,n,s,r,i,o,a,u;if(2===arguments.length){if(s=arguments[0],u=arguments[1],!fm.global.equals(s,null))for(e=s,i=0,o=e.length;o>i;i++)if(a=e[i],r=null,t=new fm.holder(r),n=fm.websync.extensible.validateChannel(a,t),r=t.getValue(),u&&!n)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",r));return s}return 1===arguments.length?(s=arguments[0],fm.websync.extensible.sharedSetChannels(s,!0)):void 0},s.sharedSetKey=function(){var e,t,n,s,r,i;if(2===arguments.length){if(s=arguments[0],i=arguments[1],fm.global.equals(s,null))return null;if(r=fm.websync.extensible.convertKeyToRecord(s),n=null,e=new fm.holder(n),t=fm.websync.extensible.validateRecord(r,e),n=e.getValue(),i&&!t)throw new Error(fm.stringExtensions.format("Invalid record. {0}",n));return[r]}return 1===arguments.length?(s=arguments[0],fm.websync.extensible.sharedSetKey(s,!0)):void 0},s.sharedSetKeys=function(){var e,t,n,s,r,i,o,a,u,l,c;if(1===arguments.length)return i=arguments[0],fm.websync.extensible.sharedSetKeys(i,!0);if(2===arguments.length){if(i=arguments[0],c=arguments[1],fm.global.equals(i,null))return null;for(a=[],e=i,r=0,o=e.length;o>r;r++){if(l=e[r],u=fm.websync.extensible.convertKeyToRecord(l),s=null,t=new fm.holder(s),n=fm.websync.extensible.validateRecord(u,t),s=t.getValue(),c&&!n)throw new Error(fm.stringExtensions.format("Invalid record. {0}",s));fm.arrayExtensions.add(a,u)}return fm.arrayExtensions.toArray(a)}},s.sharedSetRecord=function(){var e,t,n,s,r;if(2===arguments.length){if(s=arguments[0],r=arguments[1],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateRecord(s,e),n=e.getValue(),r&&!t)throw new Error(fm.stringExtensions.format("Invalid record. {0}",n));return[s]}return 1===arguments.length?(s=arguments[0],fm.websync.extensible.sharedSetRecord(s,!0)):void 0},s.sharedSetRecords=function(){var e,t,n,s,r,i,o,a,u;if(2===arguments.length){if(a=arguments[0],u=arguments[1],!fm.global.equals(a,null))for(e=a,r=0,i=e.length;i>r;r++)if(o=e[r],s=null,t=new fm.holder(s),n=fm.websync.extensible.validateRecord(o,t),s=t.getValue(),u&&!n)throw new Error(fm.stringExtensions.format("Invalid record. {0}",s));return a}return 1===arguments.length?(a=arguments[0],fm.websync.extensible.sharedSetRecords(a,!0)):void 0},s.validateChannel=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?(t.setValue("Channel is null."),!1):fm.stringExtensions.startsWith(e,"/",fm.stringComparison.Ordinal)?fm.stringExtensions.indexOf(e,"*",fm.stringComparison.Ordinal)>=0?(t.setValue("Channel may not contain asterisks (*)."),!1):fm.websync.metaChannels.isReservedChannel(e)?(t.setValue("Channel is reserved."),!1):(t.setValue(null),!0):(t.setValue("Channel must start with a forward-slash (/)."),!1)},s.validateRecord=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?(e.setValue("Record is null."),!1):fm.stringExtensions.isNullOrEmpty(t.getKey())?(e.setValue("Key is null or empty."),!1):(e.setValue(null),!0)},s.prototype.copyExtensions=function(){var e,t,n,s,r,i;for(t=arguments[0],e=t.getExtensionNames(),r=[],n=0,s=e.length;s>n;n++)i=e[n],r.push(this.setExtensionValueJson(i,t.getExtensionValueJson(i),!1));return r},s.prototype.getExtensionCount=function(){return this.getExtensions().getCount()},s.prototype.getExtensionNames=function(){return this.getExtensions().getNames()},s.prototype.getExtensions=function(){return fm.global.equals(this.__extensions,null)&&(this.__extensions=new fm.websync.extensions),this.__extensions},s.prototype.getExtensionValueJson=function(){var e;return e=arguments[0],this.getExtensions().getValueJson(e)},s.prototype.getMetaJson=function(){return this.getExtensionValueJson("fm.meta")},s.prototype.setExtensions=function(){var e;return e=arguments[0],fm.global.equals(e,null)?this.__extensions=new fm.websync.extensions:this.__extensions=e},s.prototype.setExtensionValueJson=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],this.getExtensions().setValueJson(e,n,t),void this.setIsDirty(!0)):void(2===arguments.length&&(e=arguments[0],n=arguments[1],this.getExtensions().setValueJson(e,n),this.setIsDirty(!0)))},s.prototype.setMetaJson=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.meta",e)},s.prototype.getExtensionValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getExtensionValueJson.apply(this,arguments))},s.prototype.getMeta=function(){return fm.json.deserialize(this.getMetaJson.apply(this,arguments))},s.prototype.setExtensionValue=function(){var e,t,n;return 3===arguments.length?(t=arguments[0],n=arguments[1],e=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setExtensionValueJson.apply(this,arguments)):void(2===arguments.length&&(t=arguments[0],e=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setExtensionValueJson.apply(this,arguments)))},s.prototype.setMeta=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setMetaJson.apply(this,arguments)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseInputArgs=function(n){function s(){this.setSynchronous=e(this.setSynchronous,this),this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setIsRetry=e(this.setIsRetry,this),this.getSynchronous=e(this.getSynchronous,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getIsRetry=e(this.getIsRetry,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRetry=!1,s.prototype._requestTimeout=null,s.prototype._requestUrl=null,s.prototype._synchronous=null,s.prototype.getIsRetry=function(){return this._isRetry},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this._requestUrl},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.setIsRetry=function(){var e;return e=arguments[0],this._isRetry=e},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e;return e=arguments[0],this._requestUrl=e},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseOutputArgs=function(n){function s(){this.setTimestamp=e(this.setTimestamp,this),this.setClient=e(this.setClient,this),this.getTimestamp=e(this.getTimestamp,this),this.getClient=e(this.getClient,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__timestamp=null,s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s.prototype.setTimestamp=function(){var e;return e=arguments[0],null!==e?this.__timestamp=e:this.__timestamp=null},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherEventArgs=function(n){function s(){this.setPublisher=e(this.setPublisher,this),this.getPublisher=e(this.getPublisher,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._publisher=null,s.prototype.getPublisher=function(){return this._publisher},s.prototype.setPublisher=function(){var e;return e=arguments[0],this._publisher=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgs=function(n){function s(){this.setException=e(this.setException,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.websync.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgsGeneric=function(n){function s(){this.setResponses=e(this.setResponses,this),this.setRequests=e(this.setRequests,this),this.getResponses=e(this.getResponses,this),this.getRequests=e(this.getRequests,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._responses=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getResponses=function(){return this._responses},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.websync.basePublisherResponseEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgs=function(n){function s(){this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.websync.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgsGeneric=function(n){function s(){this.setRequests=e(this.setRequests,this),this.getRequests=e(this.getRequests,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype.getRequests=function(){return this._requests},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.websync.basePublisherRequestEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEventArgs=function(n){function s(){this.setClient=e(this.setClient,this),this.getClient=e(this.getClient,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEndEventArgs=function(n){function s(){this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEndEventArgsGeneric=function(n){function s(){this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientEndEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientResponseEventArgs=function(n){function s(){this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientResponseEventArgsGeneric=function(n){function s(){this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientResponseEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseServerArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseSuccessArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseReceiveArgs=function(n){function s(){this.getData=e(this.getData,this),this.setReconnectAfter=e(this.setReconnectAfter,this),this.getTag=e(this.getTag,this),this.getReconnectAfter=e(this.getReconnectAfter,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getConnectionType=e(this.getConnectionType,this);var t,n,r,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(i=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),i):(r=arguments[0],n=arguments[1],t=arguments[2],o=arguments[3],i=s.__super__.constructor.call(this),this.__dataJson=r,this.__dataBytes=n,this.__connectionType=t,this.setReconnectAfter(o),i)}return t(s,n),s.prototype.__connectionType=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._reconnectAfter=0,s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getReconnectAfter=function(){return this._reconnectAfter},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setReconnectAfter=function(){var e;return e=arguments[0],this._reconnectAfter=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientRequestEventArgs=function(n){function s(){this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientRequestEventArgsGeneric=function(n){function s(){this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientRequestEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeEndArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){
function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.stateRestoredArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getNotifyingClient=e(this.getNotifyingClient,this);var t,n,r,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(i=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),i):(r=arguments[0],n=arguments[1],t=arguments[2],o=arguments[3],i=s.__super__.constructor.call(this,r,n,t,o))}return t(s,n),s.prototype.getNotifyingClient=function(){return fm.websync.notifyingClient.fromJson(this.getExtensionValueJson("fm.notifying"))},s.prototype.getWasSentByMe=function(){return!fm.global.equals(this.getNotifyingClient(),null)&&!fm.global.equals(this.getClient(),null)&&null!==this.getNotifyingClient().getClientId()&&fm.guid.equals(this.getNotifyingClient().getClientId(),this.getClient().getClientId())},s}(fm.websync.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverSubscribeArgs=function(n){function s(){this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverUnsubscribeArgs=function(n){function s(){this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverUnbindArgs=function(n){function s(){this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverBindArgs=function(n){function s(){this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseServerArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageRequestCreatedArgs=function(n){function s(){this.setSender=e(this.setSender,this),this.setRequests=e(this.setRequests,this),this.getSender=e(this.getSender,this),this.getRequests=e(this.getRequests,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._sender=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getSender=function(){return this._sender},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageResponseReceivedArgs=function(n){function s(){this.setSender=e(this.setSender,this),this.setResponses=e(this.setResponses,this),this.getSender=e(this.getSender,this),this.getResponses=e(this.getResponses,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._responses=null,s.prototype._sender=null,s.prototype.getResponses=function(){return this._responses},s.prototype.getSender=function(){return this._sender},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageRequestArgs=function(n){function s(){this.setUrl=e(this.setUrl,this),this.setTimeout=e(this.setTimeout,this),this.setSender=e(this.setSender,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnHttpResponseReceived=e(this.setOnHttpResponseReceived,this),this.setOnHttpRequestCreated=e(this.setOnHttpRequestCreated,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.getUrl=e(this.getUrl,this),this.getTimeout=e(this.getTimeout,this),this.getSender=e(this.getSender,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnHttpResponseReceived=e(this.getOnHttpResponseReceived,this),this.getOnHttpRequestCreated=e(this.getOnHttpRequestCreated,this),this.getMessages=e(this.getMessages,this),this.getIsBinary=e(this.getIsBinary,this),this.getHeaders=e(this.getHeaders,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=s.__super__.constructor.call(this),this.setTimeout(15e3),fm.util.attachProperties(this,arguments[0]),n):0===arguments.length?(n=s.__super__.constructor.call(this),this.setTimeout(15e3),n):1===arguments.length?(t=arguments[0],s.call(this),this.setHeaders(t),n):void 0}return t(s,n),s.prototype._headers=null,s.prototype._messages=null,s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._sender=null,s.prototype._timeout=0,s.prototype._url=null,s.prototype.getHeaders=function(){return this._headers},s.prototype.getIsBinary=function(){var e,t,n,s;for(e=this.getMessages(),t=0,n=e.length;n>t;t++)if(s=e[t],fm.global.equals(s.getDisableBinary(),!0)||!s.getIsBinary())return!1;return!0},s.prototype.getMessages=function(){return this._messages},s.prototype.getOnHttpRequestCreated=function(){return this._onHttpRequestCreated},s.prototype.getOnHttpResponseReceived=function(){return this._onHttpResponseReceived},s.prototype.getOnRequestCreated=function(){return this._onRequestCreated},s.prototype.getOnResponseReceived=function(){return this._onResponseReceived},s.prototype.getSender=function(){return this._sender},s.prototype.getTimeout=function(){return this._timeout},s.prototype.getUrl=function(){return this._url},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=e},s.prototype.setOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=e},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=e},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s.prototype.setTimeout=function(){var e;return e=arguments[0],this._timeout=e},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageResponseArgs=function(n){function s(){this.setRequestArgs=e(this.setRequestArgs,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.setException=e(this.setException,this),this.getRequestArgs=e(this.getRequestArgs,this),this.getMessages=e(this.getMessages,this),this.getHeaders=e(this.getHeaders,this),this.getException=e(this.getException,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=s.__super__.constructor.call(this),this.setRequestArgs(n),t)}return t(s,n),s.prototype._exception=null,s.prototype._headers=null,s.prototype._messages=null,s.prototype._requestArgs=null,s.prototype.getException=function(){return this._exception},s.prototype.getHeaders=function(){return this._headers},s.prototype.getMessages=function(){return this._messages},s.prototype.getRequestArgs=function(){return this._requestArgs},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setRequestArgs=function(){var e;return e=arguments[0],this._requestArgs=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),r):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],r=s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),this.setTag(i),r):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this,t,n,null),r):void 0}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1)},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e;if(e=arguments[0],!fm.global.equals(e,null)&&!fm.serializer.isValidJson(e))throw new Error("The value is not valid JSON.");return this.__dataJson=e,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseCompleteArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyCompleteArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseFailureArgs=function(n){function s(){this.setRetry=e(this.setRetry,this),this.setException=e(this.setException,this),this.getRetry=e(this.getRetry,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._retry=!1,s.getErrorCode=function(){var e,t,n,s,r,i,o;s=arguments[0],r=-1;try{if(fm.global.equals(s,null)||fm.stringExtensions.isNullOrEmpty(s.message))return r;if(fm.stringExtensions.indexOf(s.message,"::")<=-1)return r;o=fm.splitter.split(s.message,"::")[0],e=new fm.holder(r),t=fm.parseAssistant.tryParseIntegerValue(o,e),r=e.getValue(),t||(r=-1)}catch(n){i=n}finally{}return r},s.getErrorMessage=function(){var e,t,n,s;t=arguments[0],n=null;try{if(fm.global.equals(t,null)||fm.stringExtensions.isNullOrEmpty(t.message))return n;if(fm.stringExtensions.indexOf(t.message,"::")>-1)return fm.splitter.split(t.message,"::")[1];n=t.message}catch(e){s=e}finally{}return n},s.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getRetry=function(){return this._retry},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setRetry=function(){var e;return e=arguments[0],this._retry=e},s}(fm.websync.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyFailureArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifySuccessArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherNotifyResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherNotifyRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unhandledExceptionArgs=function(n){function s(){this.setHandled=e(this.setHandled,this),this.getHandled=e(this.getHandled,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__exception=null,s.prototype._handled=!1,s.prototype.getException=function(){return this.__exception},s.prototype.getHandled=function(){return this._handled},s.prototype.setHandled=function(){var e;return e=arguments[0],this._handled=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientResponseArgs=function(n){function s(){this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return fm.global.equals(this.getResponses(),null)||fm.global.equals(this.getResponses().length,0)?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectArgs=function(n){function s(){this.setRetryMode=e(this.setRetryMode,this),this.setRetryBackoff=e(this.setRetryBackoff,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnStateRestored=e(this.setOnStateRestored,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setIsReconnect=e(this.setIsReconnect,this),this.getRetryMode=e(this.getRetryMode,this),this.getRetryBackoff=e(this.getRetryBackoff,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnStateRestored=e(this.getOnStateRestored,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getIsReconnect=e(this.getIsReconnect,this),this.defaultRetryBackoff=e(this.defaultRetryBackoff,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff),fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff),t)}return t(s,n),s.prototype._defaultRetryBackoffTimeout=0,s.prototype._isReconnect=!1,s.prototype._lastClientId=null,s.prototype._lastSessionId=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSuccess=null,s.prototype._retryBackoff=null,s.prototype._retryMode=null,s.prototype.defaultRetryBackoff=function(){var e;return e=arguments[0],fm.global.equals(e.getIndex(),0)?this._defaultRetryBackoffTimeout:2*e.getLastTimeout()},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.getLastClientId=function(){return this._lastClientId},s.prototype.getLastSessionId=function(){return this._lastSessionId},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnStateRestored=function(){return this._onStateRestored},s.prototype.getOnStreamFailure=function(){return this._onStreamFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRetryBackoff=function(){return this._retryBackoff},s.prototype.getRetryMode=function(){return this._retryMode},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this._lastClientId=e},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this._lastSessionId=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=e},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRetryBackoff=function(){var e;return e=arguments[0],this._retryBackoff=e},s.prototype.setRetryMode=function(){var e;return e=arguments[0],this._retryMode=e},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsRebind=e(this.setIsRebind,this),this.setAutoRebind=e(this.setAutoRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsRebind=e(this.getIsRebind,this),this.getAutoRebind=e(this.getAutoRebind,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=s.__super__.constructor.call(this),this.setRecords(n),t)}return t(s,n),s.prototype.__records=null,s.prototype._autoRebind=null,s.prototype._isRebind=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,
s.prototype._onSuccess=null,s.prototype.getAutoRebind=function(){return this._autoRebind},s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setAutoRebind=function(){var e;return e=arguments[0],this._autoRebind=e},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),r):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],r=s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),this.setTag(i),r):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this,t,n,null),r):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e;if(e=arguments[0],!fm.global.equals(e,null)&&!fm.serializer.isValidJson(e))throw new Error("The value is not valid JSON.");return this.__dataJson=e,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=s.__super__.constructor.call(this),this.setRecords(n),t)}return t(s,n),s.prototype.__records=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKey(e)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKeys(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.disconnectArgs=function(n){function s(){this.setOnComplete=e(this.setOnComplete,this),this.getOnComplete=e(this.getOnComplete,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._onComplete=null,s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),r):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],r=s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),this.setTag(i),r):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this,t,n,null),r):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e;if(e=arguments[0],!fm.global.equals(e,null)&&!fm.serializer.isValidJson(e))throw new Error("The value is not valid JSON.");return this.__dataJson=e,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnReceive=e(this.setOnReceive,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsResubscribe=e(this.setIsResubscribe,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setAutoResubscribe=e(this.setAutoResubscribe,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnReceive=e(this.getOnReceive,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getAutoResubscribe=e(this.getAutoResubscribe,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),n):2===arguments.length?(t=arguments[0],r=arguments[1],n=s.__super__.constructor.call(this),this.setChannels(t),this.setTag(r),n):1===arguments.length?(t=arguments[0],n=s.__super__.constructor.call(this),this.setChannels(t),n):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._autoResubscribe=null,s.prototype._isResubscribe=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onReceive=null,s.prototype._onSuccess=null,s.prototype.getAutoResubscribe=function(){return this._autoResubscribe},s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnReceive=function(){return this._onReceive},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setAutoResubscribe=function(){var e;return e=arguments[0],this._autoResubscribe=e},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e)},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnReceive=function(){var e;return e=arguments[0],this._onReceive=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),n):2===arguments.length?(t=arguments[0],r=arguments[1],n=s.__super__.constructor.call(this),this.setChannels(t),this.setTag(r),n):1===arguments.length?(t=arguments[0],n=s.__super__.constructor.call(this),this.setChannels(t),n):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectCompleteArgs=function(n){function s(){this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindCompleteArgs=function(n){function s(){this.setIsRebind=e(this.setIsRebind,this),this.getIsRebind=e(this.getIsRebind,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceCompleteArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindCompleteArgs=function(n){function s(){this.getForced=e(this.getForced,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.disconnectCompleteArgs=function(n){function s(){this.setException=e(this.setException,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishCompleteArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeCompleteArgs=function(n){function s(){this.setIsResubscribe=e(this.setIsResubscribe,this),this.getIsResubscribe=e(this.getIsResubscribe,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isResubscribe=!1,s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeCompleteArgs=function(n){function s(){this.getForced=e(this.getForced,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectFailureArgs=function(n){function s(){
this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindFailureArgs=function(n){function s(){this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceFailureArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindFailureArgs=function(n){function s(){this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.streamFailureArgs=function(n){function s(){this.setConnectArgs=e(this.setConnectArgs,this),this.getConnectArgs=e(this.getConnectArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishFailureArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeFailureArgs=function(n){function s(){this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeFailureArgs=function(n){function s(){this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectSuccessArgs=function(n){function s(){this.setIsReconnect=e(this.setIsReconnect,this),this.setConnectionType=e(this.setConnectionType,this),this.getIsReconnect=e(this.getIsReconnect,this),this.getConnectionType=e(this.getConnectionType,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectionType=null,s.prototype._isReconnect=!1,s.prototype.getConnectionType=function(){return this._connectionType},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this._connectionType=e},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindSuccessArgs=function(n){function s(){this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceSuccessArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindSuccessArgs=function(n){function s(){this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getForced=e(this.getForced,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.__records=null,s.prototype.getForced=function(){return this.__forced},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishSuccessArgs=function(n){function s(){this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getChannel=e(this.getChannel,this);var t,n,r,i,o,a;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(o=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),o):(t=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3],a=arguments[4],o=s.__super__.constructor.call(this,i,r,n,a),this.__channel=t,o)}return t(s,n),s.prototype.__channel=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getPublishingClient=function(){return fm.websync.publishingClient.fromJson(this.getExtensionValueJson("fm.publishing"))},s.prototype.getWasSentByMe=function(){return!fm.global.equals(this.getPublishingClient(),null)&&!fm.global.equals(this.getClient(),null)&&null!==this.getPublishingClient().getClientId()&&fm.guid.equals(this.getPublishingClient().getClientId(),this.getClient().getClientId())},s}(fm.websync.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeSuccessArgs=function(n){function s(){this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeSuccessArgs=function(n){function s(){this.getTag=e(this.getTag,this),this.getForced=e(this.getForced,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.__forced=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getForced=function(){return this.__forced},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherPublishResponseArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherPublishRequestArgs=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.deferredRetryConnectState=function(n){function s(){this.setConnectArgs=e(this.setConnectArgs,this),this.setBackoffTimeout=e(this.setBackoffTimeout,this),this.getConnectArgs=e(this.getConnectArgs,this),this.getBackoffTimeout=e(this.getBackoffTimeout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._backoffTimeout=0,s.prototype._connectArgs=null,s.prototype.getBackoffTimeout=function(){return this._backoffTimeout},s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setBackoffTimeout=function(){var e;return e=arguments[0],this._backoffTimeout=e},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.deferredStreamState=function(n){function s(){this.setReceivedMessages=e(this.setReceivedMessages,this),this.setConnectArgs=e(this.setConnectArgs,this),this.getReceivedMessages=e(this.getReceivedMessages,this),this.getConnectArgs=e(this.getConnectArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype._receivedMessages=!1,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.getReceivedMessages=function(){return this._receivedMessages},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s.prototype.setReceivedMessages=function(){var e;return e=arguments[0],this._receivedMessages=e},s}(fm.object);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageTransferFactory=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n._createHttpMessageTransfer=null,n._createWebSocketMessageTransfer=null,n.defaultCreateHttpMessageTransfer=function(){return new fm.websync.httpMessageTransfer},n.defaultCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],new fm.websync.webSocketMessageTransfer(e)},n.getCreateHttpMessageTransfer=function(){return fm.websync.messageTransferFactory._createHttpMessageTransfer},n.getCreateWebSocketMessageTransfer=function(){return fm.websync.messageTransferFactory._createWebSocketMessageTransfer},n.getHttpMessageTransfer=function(){var e;return fm.global.equals(fm.websync.messageTransferFactory.getCreateHttpMessageTransfer(),null)&&n.setCreateHttpMessageTransfer(n.defaultCreateHttpMessageTransfer),e=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer()(),fm.global.equals(e,null)&&(e=fm.websync.messageTransferFactory.defaultCreateHttpMessageTransfer()),e},n.getWebSocketMessageTransfer=function(){var e,t;return e=arguments[0],fm.global.equals(fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer(),null)&&n.setCreateWebSocketMessageTransfer(n.defaultCreateWebSocketMessageTransfer),t=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer()(e),fm.global.equals(t,null)&&(t=fm.websync.messageTransferFactory.defaultCreateWebSocketMessageTransfer(e)),t},n.setCreateHttpMessageTransfer=function(){var e;return e=arguments[0],n._createHttpMessageTransfer=e},n.setCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],n._createWebSocketMessageTransfer=e},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageTransfer=function(n){function s(){this.shutdown=e(this.shutdown,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.sendAsyncCallback=e(this.sendAsyncCallback,this),this.sendAsync=e(this.sendAsync,this),this.send=e(this.send,this),this.messageRequestArgsToHttpRequestArgs=e(this.messageRequestArgsToHttpRequestArgs,this),this.httpResponseArgsToMessageResponseArgs=e(this.httpResponseArgsToMessageResponseArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback",this._requestArgsKey="fm.websync.messageTransfer.requestArgs",fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback",this._requestArgsKey="fm.websync.messageTransfer.requestArgs",t)}return t(s,n),s.prototype._messageTransferCallbackKey=null,s.prototype._requestArgsKey=null,s.raiseRequestCreated=function(){var e,t;return t=arguments[0],fm.global.equals(t.getOnRequestCreated(),null)?void 0:(e=new fm.websync.messageRequestCreatedArgs,e.setRequests(t.getMessages()),e.setSender(t.getSender()),t.getOnRequestCreated()(e))},s.raiseResponseReceived=function(){var e,t;return t=arguments[0],fm.global.equals(t.getException(),null)&&!fm.global.equals(t.getRequestArgs().getOnResponseReceived(),null)?(e=new fm.websync.messageResponseReceivedArgs,e.setResponses(t.getMessages()),e.setSender(t.getRequestArgs().getSender()),t.getRequestArgs().getOnResponseReceived()(e)):void 0},s.prototype.httpResponseArgsToMessageResponseArgs=function(){var e,t,n,s;return s=arguments[0],n=s.getRequestArgs().getDynamicValue(this._requestArgsKey),t=new fm.websync.messageResponseArgs(n),t.setException(s.getException()),t.setHeaders(s.getHeaders()),e=t,fm.stringExtensions.isNullOrEmpty(s.getTextContent())?(fm.global.equals(s.getBinaryContent(),null)||e.setMessages(fm.websync.message.fromBinaryMultiple(s.getBinaryContent())),e):(e.setMessages(fm.websync.message.fromJsonMultiple(s.getTextContent())),e)},s.prototype.messageRequestArgsToHttpRequestArgs=function(){var e,t,n,s,r,i,o;for(i=arguments[0],n=new fm.httpRequestArgs,n.setMethod(fm.httpMethod.Post),n.setOnRequestCreated(i.getOnHttpRequestCreated()),n.setOnResponseReceived(i.getOnHttpResponseReceived()),n.setSender(i.getSender()),n.setTimeout(i.getTimeout()),n.setUrl(i.getUrl()),n.setDynamicProperties(i.getDynamicProperties()),t=n,t.setDynamicValue(this._requestArgsKey,i),e=i.getHeaders().getAllKeys(),s=0,r=e.length;r>s;s++)o=e[s],t.getHeaders().set(o,i.getHeaders().get(o));return t.setTextContent(fm.websync.message.toJsonMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/json"),i.getIsBinary()&&(t.setBinaryContent(fm.websync.message.toBinaryMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/octet-stream")),t},s.prototype.send=function(){var e,t,n,s,r;r=arguments[0],fm.websync.messageTransfer.raiseRequestCreated(r);try{e=this.sendMessages(r),fm.websync.messageTransfer.raiseResponseReceived(e)}catch(n){s=n,t=new fm.websync.messageResponseArgs(r),t.setException(s),e=t}finally{}return e},s.prototype.sendAsync=function(){var e,t,n,s,r;r=arguments[0],e=arguments[1],fm.websync.messageTransfer.raiseRequestCreated(r),r.setDynamicValue(this._messageTransferCallbackKey,e);try{return this.sendMessagesAsync(r,this.sendAsyncCallback)}catch(t){return n=t,s=new fm.websync.messageResponseArgs(r),s.setException(n),e(s)}finally{}},s.prototype.sendAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._messageTransferCallbackKey),t.getRequestArgs().unsetDynamicValue(this._messageTransferCallbackKey),fm.websync.messageTransfer.raiseResponseReceived(t),e(t)},s.prototype.sendMessages=function(){var e;return e=arguments[0]},s.prototype.sendMessagesAsync=function(){var e,t;return t=arguments[0],e=arguments[1]},s.prototype.shutdown=function(){},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.httpMessageTransfer=function(n){function s(){this.shutdown=e(this.shutdown,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this._callbackKey="fm.websync.httpMessageTransfer.callback",this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this._callbackKey="fm.websync.httpMessageTransfer.callback",this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),t)}return t(s,n),s.prototype._callbackKey=null,s.prototype._httpTransfer=null,s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._httpTransfer.send(e),this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._httpTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.shutdown=function(){var e,t;try{return this._httpTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.websync.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);
return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),fm.util.attachProperties(this,arguments[0]),r):2===arguments.length?(n=arguments[0],t=arguments[1],r=s.__super__.constructor.call(this),this.setClientId(n),this.setBoundRecords(t),r):0===arguments.length?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),r):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotifyingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotifyingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s;return n=arguments[0],fm.global.equals(this.getBoundRecords(),null)?null:(s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this.getBoundRecords(),n,e),s=e.getValue(),t?s.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.notifyingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseMessage=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setValidate=e(this.setValidate,this),this.setTimestamp=e(this.setTimestamp,this),this.setSuccessful=e(this.setSuccessful,this),this.setError=e(this.setError,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.getValidate=e(this.getValidate,this),this.getTimestamp=e(this.getTimestamp,this),this.getSuccessful=e(this.getSuccessful,this),this.getIsBinary=e(this.getIsBinary,this),this.getError=e(this.getError,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this.setValidate(!0),fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this.setValidate(!0),t)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.__error=null,s.prototype.__successful=!1,s.prototype.__timestamp=null,s.prototype._validate=!1,s.prototype.getDataBytes=function(){var e,t,n,s;return n=this.__dataBytes,s=this.__dataJson,fm.global.equals(n,null)?fm.global.equals(s,null)?null:(e=new fm.holder(n),t=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(s),e),n=e.getValue(),t||(n=null),this.__dataBytes=n,n):n},s.prototype.getDataJson=function(){var e,t;return t=this.__dataJson,e=this.__dataBytes,fm.global.equals(t,null)?fm.global.equals(e,null)?null:(t=fm.serializer.serializeString(fm.crypto.base64Encode(e)),this.__dataJson=t,t):t},s.prototype.getError=function(){return this.__error},s.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null)},s.prototype.getSuccessful=function(){return this.__successful},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.getValidate=function(){return this._validate},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e,this.setIsDirty(!0)},s.prototype.setDataJson=function(){var e;if(e=arguments[0],this.getValidate()&&!fm.global.equals(e,null)&&!fm.serializer.isValidJson(e))throw new Error("The value is not valid JSON.");return this.__dataJson=e,this.__dataBytes=null,this.setIsDirty(!0)},s.prototype.setError=function(){var e;return e=arguments[0],this.__error=e,this.setIsDirty(!0)},s.prototype.setSuccessful=function(){var e;return e=arguments[0],this.__successful=e,this.setIsDirty(!0)},s.prototype.setTimestamp=function(){var e;return e=arguments[0],this.__timestamp=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notification=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getClientId=e(this.getClientId,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),r):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this,t,n,null),r):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],r=s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),this.setTag(i),r):0===arguments.length?r=s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],r=s.__super__.constructor.call(this),this.setClientId(t),r):void 0}return t(s,n),s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotification(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotificationArray(e)},s.fromMessage=function(){var e,t;return e=arguments[0],fm.global.equals(e,null)?null:(t=new fm.websync.notification,t.setClientId(e.getNotifyClientId()),t.setSuccessful(e.getSuccessful()),t.setError(e.getError()),t.setTimestamp(e.getTimestamp()),t.setDataJson(e.getDataJson()),t.setExtensions(e.getExtensions()),t)},s.fromMessages=function(){var e,t,n;if(t=arguments[0],fm.global.equals(t,null))return null;for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.websync.notification.fromMessage(t[e])}finally{e++}return n},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotification(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotificationArray(e)},s.toMessage=function(){var e,t;return t=arguments[0],fm.global.equals(t,null)?null:(e=new fm.websync.message,e.setNotifyClientId(t.getClientId()),e.setSuccessful(t.getSuccessful()),e.setError(t.getError()),e.setTimestamp(t.getTimestamp()),e.setDataJson(t.getDataJson()),e.setExtensions(t.getExtensions()),e)},s.toMessages=function(){var e,t,n;if(n=arguments[0],fm.global.equals(n,null))return null;for(t=new Array(n.length),e=0;e<n.length;)try{t[e]=fm.websync.notification.toMessage(n[e])}finally{e++}return t},s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.notification.toJson(this)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherResponseArgs=function(n){function s(){this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return fm.global.equals(this.getResponses(),null)||fm.global.equals(this.getResponses().length,0)?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClient=function(n){function s(){this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setDomainName=e(this.setDomainName,this),this.setDomainKeyString=e(this.setDomainKeyString,this),this.setDomainKey=e(this.setDomainKey,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConcurrencyMode=e(this.setConcurrencyMode,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.removeOnResponseReceived=e(this.removeOnResponseReceived,this),this.removeOnRequestCreated=e(this.removeOnRequestCreated,this),this.removeOnHttpResponseReceived=e(this.removeOnHttpResponseReceived,this),this.removeOnHttpRequestCreated=e(this.removeOnHttpRequestCreated,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.raiseBaseEvent=e(this.raiseBaseEvent,this),this.internalOnResponseReceived=e(this.internalOnResponseReceived,this),this.internalOnRequestCreated=e(this.internalOnRequestCreated,this),this.internalOnHttpResponseReceived=e(this.internalOnHttpResponseReceived,this),this.internalOnHttpRequestCreated=e(this.internalOnHttpRequestCreated,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getDomainName=e(this.getDomainName,this),this.getDomainKeyString=e(this.getDomainKeyString,this),this.getDomainKey=e(this.getDomainKey,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConcurrencyMode=e(this.getConcurrencyMode,this),this.createHeadersNoCache=e(this.createHeadersNoCache,this),this.createHeaders=e(this.createHeaders,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this),this.addOnResponseReceived=e(this.addOnResponseReceived,this),this.addOnRequestCreated=e(this.addOnRequestCreated,this),this.addOnHttpResponseReceived=e(this.addOnHttpResponseReceived,this),this.addOnHttpRequestCreated=e(this.addOnHttpRequestCreated,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.websync.defaults.getDomainKey()),this.setDomainName(fm.websync.defaults.getDomainName()),this.setConcurrencyMode(fm.websync.concurrencyMode.Low),fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.websync.defaults.getDomainKey()),this.setDomainName(fm.websync.defaults.getDomainName()),this.setConcurrencyMode(fm.websync.concurrencyMode.Low),t)}return t(s,n),s.prototype.__domainName=null,s.prototype.__requestUrl=null,s.prototype._concurrencyMode=null,s.prototype._disableBinary=!1,s.prototype._domainKey=null,s._headers=null,s._invalidResponseMessage="Invalid response received from server.",s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._onUnhandledException=null,s.prototype._requestTimeout=0,s.sanitizeDomainName=function(){var e,t;return e=arguments[0],fm.stringExtensions.startsWith(e,"http://",fm.stringComparison.Ordinal)?e=e.substring("http://".length):fm.stringExtensions.startsWith(e,"https://",fm.stringComparison.Ordinal)&&(e=e.substring("https://".length)),t=fm.stringExtensions.indexOf(e,"/"),fm.global.equals(t,-1)||(e=fm.stringExtensions.substring(e,0,t)),e},s.prototype.addOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.combine(this._onHttpRequestCreated,e)},s.prototype.addOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.combine(this._onHttpResponseReceived,e)},s.prototype.addOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.combine(this._onRequestCreated,e)},s.prototype.addOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.combine(this._onResponseReceived,e)},s.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},s.prototype.createHeaders=function(){return fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)?(fm.global.equals(fm.websync.baseClient._headers,null)&&(this._headers=this.createHeadersNoCache()),fm.websync.baseClient._headers):this.createHeadersNoCache()},s.prototype.createHeadersNoCache=function(){var e;return e=new fm.nameValueCollection,fm.global.equals(this.getDomainName(),fm.websync.defaults.getDomainName())||e.set("X-FM-DomainName",this.getDomainName()),fm.guid.equals(this.getDomainKey(),fm.websync.defaults.getDomainKey())||e.set("X-FM-DomainKey",this.getDomainKey().toString()),e},s.prototype.getConcurrencyMode=function(){return this._concurrencyMode},s.prototype.getDisableBinary=function(){return this._disableBinary},s.prototype.getDomainKey=function(){return this._domainKey},s.prototype.getDomainKeyString=function(){return this.getDomainKey().toString()},s.prototype.getDomainName=function(){return this.__domainName},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this.__requestUrl},s.prototype.internalOnHttpRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpRequestCreated,e,"OnHttpRequestCreated")},s.prototype.internalOnHttpResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpResponseReceived,e,"OnHttpResponseReceived")},s.prototype.internalOnRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onRequestCreated,e,"OnRequestCreated")},s.prototype.internalOnResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onResponseReceived,e,"OnResponseReceived")},s.prototype.raiseBaseEvent=function(){var e,t,n,s,r;if(n=arguments[0],e=arguments[1],s=arguments[2],!fm.global.equals(n,null))try{return n(e)}catch(t){if(r=t,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,fm.stringExtensions.format("BaseClient -> {0}",s))}finally{}},s.prototype.raiseUnhandledException=function(){var e,t,n,s,r,i;if(n=arguments[0],r=this._onUnhandledException,!fm.global.equals(r,null)){e=new fm.websync.unhandledExceptionArgs,e.__exception=n,i=e;try{r(i)}catch(t){s=t,fm.asyncException.asyncThrow(s,"BaseClient -> OnUnhandledException")}finally{}return i.getHandled()}return!1},s.prototype.removeOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.remove(this._onHttpRequestCreated,e)},s.prototype.removeOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.remove(this._onHttpResponseReceived,e)},s.prototype.removeOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.remove(this._onRequestCreated,e)},s.prototype.removeOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.remove(this._onResponseReceived,e)},s.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},s.prototype.setConcurrencyMode=function(){var e;return e=arguments[0],this._concurrencyMode=e},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this._disableBinary=e},s.prototype.setDomainKey=function(){var e;return e=arguments[0],this._domainKey=e},s.prototype.setDomainKeyString=function(){var e;return e=arguments[0],this.setDomainKey(new fm.guid(e))},s.prototype.setDomainName=function(){var e;return e=arguments[0],fm.global.equals(e,null)&&(e=fm.websync.defaults.getDomainName()),this.__domainName=fm.websync.baseClient.sanitizeDomainName(e)},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e;if(e=arguments[0],fm.global.equals(e,null))throw new Error("Request URL cannot be null.");return this.__requestUrl=fm.httpTransfer.replaceWildcards(e)},s._headers=null,s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseAdvice=function(n){function s(){this.toJson=e(this.toJson,this),this.setReconnect=e(this.setReconnect,this),this.setInterval=e(this.setInterval,this),this.setHosts=e(this.setHosts,this),this.getReconnect=e(this.getReconnect,this),this.getInterval=e(this.getInterval,this),this.getHosts=e(this.getHosts,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype.__hosts=null,s.prototype.__interval=null,s.prototype.__reconnect=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeBaseAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeBaseAdvice(e)},s.prototype.getHosts=function(){return this.__hosts},s.prototype.getInterval=function(){return this.__interval},s.prototype.getReconnect=function(){return this.__reconnect},s.prototype.setHosts=function(){var e;return e=arguments[0],this.__hosts=e,this.setIsDirty(!0)},s.prototype.setInterval=function(){var e;return e=arguments[0],this.__interval=e,this.setIsDirty(!0)},s.prototype.setReconnect=function(){var e;return e=arguments[0],this.__reconnect=e,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.baseAdvice.toJson(this)},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.advice=function(n){function s(){this.toJson=e(this.toJson,this),this.setWebSocket=e(this.setWebSocket,this),this.setLongPolling=e(this.setLongPolling,this),this.setCallbackPolling=e(this.setCallbackPolling,this),this.getWebSocket=e(this.getWebSocket,this),this.getLongPolling=e(this.getLongPolling,this),this.getCallbackPolling=e(this.getCallbackPolling,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._callbackPolling=null,s.prototype._longPolling=null,s.prototype._webSocket=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeAdvice(e)},s.prototype.getCallbackPolling=function(){return this._callbackPolling},s.prototype.getLongPolling=function(){return this._longPolling},s.prototype.getWebSocket=function(){return this._webSocket},s.prototype.setCallbackPolling=function(){var e;return e=arguments[0],this._callbackPolling=e},s.prototype.setLongPolling=function(){var e;return e=arguments[0],this._longPolling=e},s.prototype.setWebSocket=function(){var e;return e=arguments[0],this._webSocket=e},s.prototype.toJson=function(){return fm.websync.advice.toJson(this)},s}(fm.websync.baseAdvice);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.metaChannels=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):void 0}return t(n,e),n._bind="/meta/bind",n._connect="/meta/connect",n._disconnect="/meta/disconnect",n._handshake="/meta/handshake",n._metaPrefix="/meta/",n._notify="/meta/notify",n._servicePrefix="/service/",n._subscribe="/meta/subscribe",n._unbind="/meta/unbind",n._unsubscribe="/meta/unsubscribe",n.convertChannelFromServiced=function(){var e;return e=arguments[0],fm.websync.metaChannels.isServiceChannel(e)?e.substring("/service/".length-1):e},n.convertChannelToServiced=function(){var e;return e=arguments[0],fm.global.equals(e,null)||e.length<1?"/service/":fm.stringExtensions.concat("/service/",e.substring(1))},n.getMessageType=function(){var e;return e=arguments[0],fm.global.equals(e,"/meta/handshake")?fm.websync.messageType.Connect:fm.global.equals(e,"/meta/connect")?fm.websync.messageType.Stream:fm.global.equals(e,"/meta/disconnect")?fm.websync.messageType.Disconnect:fm.global.equals(e,"/meta/bind")?fm.websync.messageType.Bind:fm.global.equals(e,"/meta/unbind")?fm.websync.messageType.Unbind:fm.global.equals(e,"/meta/subscribe")?fm.websync.messageType.Subscribe:fm.global.equals(e,"/meta/unsubscribe")?fm.websync.messageType.Unsubscribe:fm.global.equals(e,"/meta/notify")?fm.websync.messageType.Notify:fm.websync.metaChannels.isServiceChannel(e)?fm.websync.messageType.Service:fm.websync.metaChannels.isMetaChannel(e)?fm.websync.messageType.Unknown:fm.websync.messageType.Publish},n.isMetaChannel=function(){var e;return e=arguments[0],!fm.global.equals(e,null)&&fm.stringExtensions.startsWith(e,"/meta/",fm.stringComparison.Ordinal)},n.isReservedChannel=function(){var e;return e=arguments[0],fm.websync.metaChannels.isMetaChannel(e)||fm.websync.metaChannels.isServiceChannel(e)},n.isServiceChannel=function(){var e;return e=arguments[0],!fm.global.equals(e,null)&&fm.stringExtensions.startsWith(e,"/service/",fm.stringComparison.Ordinal)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.client=function(n){function s(){this.webSocketStreamFailure=e(this.webSocketStreamFailure,this),this.webSocketOpenSuccess=e(this.webSocketOpenSuccess,this),this.webSocketOpenFailure=e(this.webSocketOpenFailure,this),this.unsubscribe=e(this.unsubscribe,this),this.unsetCustomOnReceiveWithTag=e(this.unsetCustomOnReceiveWithTag,this),this.unsetCustomOnReceive=e(this.unsetCustomOnReceive,this),this.unbind=e(this.unbind,this),this.tryWebSocket=e(this.tryWebSocket,this),this.subscribe=e(this.subscribe,this),this.streamDeferred=e(this.streamDeferred,this),this.streamCallback=e(this.streamCallback,this),this.stream=e(this.stream,this),this.startBatch=e(this.startBatch,this),this.setToken=e(this.setToken,this),this.setSynchronous=e(this.setSynchronous,this),this.setStreamRequestUrl=e(this.setStreamRequestUrl,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setIsDisconnecting=e(this.setIsDisconnecting,this),this.setIsConnecting=e(this.setIsConnecting,this),this.setIsConnected=e(this.setIsConnected,this),this.setInstanceId=e(this.setInstanceId,this),this.setDisableWebSockets=e(this.setDisableWebSockets,this),this.setCustomOnReceiveWithTag=e(this.setCustomOnReceiveWithTag,this),this.setCustomOnReceive=e(this.setCustomOnReceive,this),this.setClientId=e(this.setClientId,this),this.service=e(this.service,this),this.sendMany=e(this.sendMany,this),this.sendCallback=e(this.sendCallback,this),this.send=e(this.send,this),this.retryConnectDeferred=e(this.retryConnectDeferred,this),this.retryConnect=e(this.retryConnect,this),this.restream=e(this.restream,this),this.removeSubscribedOnReceive=e(this.removeSubscribedOnReceive,this),this.removeSubscribedChannels=e(this.removeSubscribedChannels,this),this.removeOnUnsubscribeSuccess=e(this.removeOnUnsubscribeSuccess,this),this.removeOnUnsubscribeFailure=e(this.removeOnUnsubscribeFailure,this),this.removeOnUnsubscribeComplete=e(this.removeOnUnsubscribeComplete,this),this.removeOnUnbindSuccess=e(this.removeOnUnbindSuccess,this),this.removeOnUnbindFailure=e(this.removeOnUnbindFailure,this),this.removeOnUnbindComplete=e(this.removeOnUnbindComplete,this),this.removeOnSubscribeSuccess=e(this.removeOnSubscribeSuccess,this),this.removeOnSubscribeFailure=e(this.removeOnSubscribeFailure,this),this.removeOnSubscribeComplete=e(this.removeOnSubscribeComplete,this),this.removeOnStreamFailure=e(this.removeOnStreamFailure,this),this.removeOnStateRestored=e(this.removeOnStateRestored,this),this.removeOnServiceSuccess=e(this.removeOnServiceSuccess,this),this.removeOnServiceFailure=e(this.removeOnServiceFailure,this),this.removeOnServiceComplete=e(this.removeOnServiceComplete,this),this.removeOnServerUnsubscribe=e(this.removeOnServerUnsubscribe,this),this.removeOnServerUnbind=e(this.removeOnServerUnbind,this),this.removeOnServerSubscribe=e(this.removeOnServerSubscribe,this),this.removeOnServerBind=e(this.removeOnServerBind,this),this.removeOnPublishSuccess=e(this.removeOnPublishSuccess,this),this.removeOnPublishFailure=e(this.removeOnPublishFailure,this),this.removeOnPublishComplete=e(this.removeOnPublishComplete,this),this.removeOnNotifySuccess=e(this.removeOnNotifySuccess,this),this.removeOnNotifyFailure=e(this.removeOnNotifyFailure,this),this.removeOnNotifyComplete=e(this.removeOnNotifyComplete,this),this.removeOnNotify=e(this.removeOnNotify,this),this.removeOnDisconnectComplete=e(this.removeOnDisconnectComplete,this),this.removeOnConnectSuccess=e(this.removeOnConnectSuccess,this),this.removeOnConnectFailure=e(this.removeOnConnectFailure,this),this.removeOnConnectComplete=e(this.removeOnConnectComplete,this),this.removeOnBindSuccess=e(this.removeOnBindSuccess,this),this.removeOnBindFailure=e(this.removeOnBindFailure,this),this.removeOnBindComplete=e(this.removeOnBindComplete,this),this.removeBoundRecords=e(this.removeBoundRecords,this),this.reconnect=e(this.reconnect,this),this.receiveSink=e(this.receiveSink,this),this.receiveMessage=e(this.receiveMessage,this),this.raiseUnsubscribeSuccess=e(this.raiseUnsubscribeSuccess,this),this.raiseUnsubscribeFailure=e(this.raiseUnsubscribeFailure,this),this.raiseUnsubscribeComplete=e(this.raiseUnsubscribeComplete,this),this.raiseUnbindSuccess=e(this.raiseUnbindSuccess,this),this.raiseUnbindFailure=e(this.raiseUnbindFailure,this),this.raiseUnbindComplete=e(this.raiseUnbindComplete,this),this.raiseSubscribeSuccess=e(this.raiseSubscribeSuccess,this),this.raiseSubscribeFailure=e(this.raiseSubscribeFailure,this),this.raiseSubscribeDelivery=e(this.raiseSubscribeDelivery,this),this.raiseSubscribeComplete=e(this.raiseSubscribeComplete,this),this.raiseStreamFailure=e(this.raiseStreamFailure,this),this.raiseStateRestored=e(this.raiseStateRestored,this),this.raiseServiceSuccess=e(this.raiseServiceSuccess,this),this.raiseServiceFailure=e(this.raiseServiceFailure,this),this.raiseServiceComplete=e(this.raiseServiceComplete,this),this.raiseServerUnsubscribe=e(this.raiseServerUnsubscribe,this),this.raiseServerUnbind=e(this.raiseServerUnbind,this),this.raiseServerSubscribe=e(this.raiseServerSubscribe,this),this.raiseServerBind=e(this.raiseServerBind,this),this.raiseSendException=e(this.raiseSendException,this),this.raiseRetriable=e(this.raiseRetriable,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raisePublishSuccess=e(this.raisePublishSuccess,this),this.raisePublishFailure=e(this.raisePublishFailure,this),this.raisePublishComplete=e(this.raisePublishComplete,this),this.raiseNotifySuccess=e(this.raiseNotifySuccess,this),this.raiseNotifyFailure=e(this.raiseNotifyFailure,this),this.raiseNotifyDelivery=e(this.raiseNotifyDelivery,this),this.raiseNotifyComplete=e(this.raiseNotifyComplete,this),this.raiseFunctionManual=e(this.raiseFunctionManual,this),this.raiseFunction=e(this.raiseFunction,this),this.raiseForcedUnsubscribes=e(this.raiseForcedUnsubscribes,this),this.raiseForcedUnbinds=e(this.raiseForcedUnbinds,this),this.raiseEvent=e(this.raiseEvent,this),this.raiseDisconnectComplete=e(this.raiseDisconnectComplete,this),this.raiseConnectSuccess=e(this.raiseConnectSuccess,this),this.raiseConnectFailure=e(this.raiseConnectFailure,this),this.raiseConnectComplete=e(this.raiseConnectComplete,this),this.raiseCompleteEvent=e(this.raiseCompleteEvent,this),this.raiseBindSuccess=e(this.raiseBindSuccess,this),this.raiseBindFailure=e(this.raiseBindFailure,this),this.raiseBindComplete=e(this.raiseBindComplete,this),this.raiseActionManual=e(this.raiseActionManual,this),this.raiseAction=e(this.raiseAction,this),this.publish=e(this.publish,this),this.processServerAction=e(this.processServerAction,this),this.processRequestUrl=e(this.processRequestUrl,this),this.processQueue=e(this.processQueue,this),this.processPendingReceives=e(this.processPendingReceives,this),this.processAdvice=e(this.processAdvice,this),this.preRaise=e(this.preRaise,this),this.postRaise=e(this.postRaise,this),this.performUnsubscribeCallback=e(this.performUnsubscribeCallback,this),this.performUnsubscribe=e(this.performUnsubscribe,this),this.performUnbindCallback=e(this.performUnbindCallback,this),this.performUnbind=e(this.performUnbind,this),this.performSubscribeCallback=e(this.performSubscribeCallback,this),this.performSubscribe=e(this.performSubscribe,this),this.performServiceCallback=e(this.performServiceCallback,this),this.performService=e(this.performService,this),this.performPublishCallback=e(this.performPublishCallback,this),this.performPublish=e(this.performPublish,this),this.performNotifyCallback=e(this.performNotifyCallback,this),this.performNotify=e(this.performNotify,this),this.performDisconnectCallback=e(this.performDisconnectCallback,this),this.performDisconnect=e(this.performDisconnect,this),this.performConnectCallback=e(this.performConnectCallback,this),this.performConnect=e(this.performConnect,this),this.performBindCallback=e(this.performBindCallback,this),this.performBind=e(this.performBind,this),this.notify=e(this.notify,this),this.maybeRaiseStateRestored=e(this.maybeRaiseStateRestored,this),
this.inCallback=e(this.inCallback,this),this.inBatch=e(this.inBatch,this),this.getToken=e(this.getToken,this),this.getThreadId=e(this.getThreadId,this),this.getSynchronous=e(this.getSynchronous,this),this.getSubscribedChannels=e(this.getSubscribedChannels,this),this.getStreamRequestUrl=e(this.getStreamRequestUrl,this),this.getStreamRequestTimeout=e(this.getStreamRequestTimeout,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getIsDisconnecting=e(this.getIsDisconnecting,this),this.getIsConnecting=e(this.getIsConnecting,this),this.getIsConnected=e(this.getIsConnected,this),this.getInstanceId=e(this.getInstanceId,this),this.getDisableWebSockets=e(this.getDisableWebSockets,this),this.getCustomOnReceiveWithTag=e(this.getCustomOnReceiveWithTag,this),this.getCustomOnReceive=e(this.getCustomOnReceive,this),this.getClientId=e(this.getClientId,this),this.getBoundRecords=e(this.getBoundRecords,this),this.endBatch=e(this.endBatch,this),this.doLongPolling=e(this.doLongPolling,this),this.disconnect=e(this.disconnect,this),this.decrementPendingRestoreStateCalls=e(this.decrementPendingRestoreStateCalls,this),this.connect=e(this.connect,this),this.clearSubscribedChannels=e(this.clearSubscribedChannels,this),this.clearBoundRecords=e(this.clearBoundRecords,this),this.checkSynchronous=e(this.checkSynchronous,this),this.bind=e(this.bind,this),this.addToQueue=e(this.addToQueue,this),this.addSubscribedOnReceive=e(this.addSubscribedOnReceive,this),this.addSubscribedChannels=e(this.addSubscribedChannels,this),this.addOnUnsubscribeSuccess=e(this.addOnUnsubscribeSuccess,this),this.addOnUnsubscribeFailure=e(this.addOnUnsubscribeFailure,this),this.addOnUnsubscribeComplete=e(this.addOnUnsubscribeComplete,this),this.addOnUnbindSuccess=e(this.addOnUnbindSuccess,this),this.addOnUnbindFailure=e(this.addOnUnbindFailure,this),this.addOnUnbindComplete=e(this.addOnUnbindComplete,this),this.addOnSubscribeSuccess=e(this.addOnSubscribeSuccess,this),this.addOnSubscribeFailure=e(this.addOnSubscribeFailure,this),this.addOnSubscribeComplete=e(this.addOnSubscribeComplete,this),this.addOnStreamFailure=e(this.addOnStreamFailure,this),this.addOnStateRestored=e(this.addOnStateRestored,this),this.addOnServiceSuccess=e(this.addOnServiceSuccess,this),this.addOnServiceFailure=e(this.addOnServiceFailure,this),this.addOnServiceComplete=e(this.addOnServiceComplete,this),this.addOnServerUnsubscribe=e(this.addOnServerUnsubscribe,this),this.addOnServerUnbind=e(this.addOnServerUnbind,this),this.addOnServerSubscribe=e(this.addOnServerSubscribe,this),this.addOnServerBind=e(this.addOnServerBind,this),this.addOnPublishSuccess=e(this.addOnPublishSuccess,this),this.addOnPublishFailure=e(this.addOnPublishFailure,this),this.addOnPublishComplete=e(this.addOnPublishComplete,this),this.addOnNotifySuccess=e(this.addOnNotifySuccess,this),this.addOnNotifyFailure=e(this.addOnNotifyFailure,this),this.addOnNotifyComplete=e(this.addOnNotifyComplete,this),this.addOnNotify=e(this.addOnNotify,this),this.addOnDisconnectComplete=e(this.addOnDisconnectComplete,this),this.addOnConnectSuccess=e(this.addOnConnectSuccess,this),this.addOnConnectFailure=e(this.addOnConnectFailure,this),this.addOnConnectComplete=e(this.addOnConnectComplete,this),this.addOnBindSuccess=e(this.addOnBindSuccess,this),this.addOnBindFailure=e(this.addOnBindFailure,this),this.addOnBindComplete=e(this.addOnBindComplete,this),this.addBoundRecords=e(this.addBoundRecords,this),this.activateStream=e(this.activateStream,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.websync.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.websync.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?(t=s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.websync.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.websync.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),t):1===arguments.length?(n=arguments[0],s.call(this,n,n),t):2===arguments.length?(n=arguments[0],r=arguments[1],s.call(this),this.setRequestUrl(n),this.setStreamRequestUrl(r),t):void 0}return t(s,n),s.prototype.__streamRequestUrl=null,s._argsKey=null,s.prototype._batchCounter=0,s.prototype._batchCounterLock=null,s._bayeuxMinimumVersion=null,s._bayeuxVersion=null,s.prototype._boundRecords=null,s.prototype._boundRecordsLock=null,s.prototype._clientId=null,s.prototype._connectArgs=null,s.prototype._connectionType=null,s.prototype._counter=0,s.prototype._counterLock=null,s.prototype._customOnReceives=null,s.prototype._customOnReceivesLock=null,s.prototype._disableWebSockets=!1,s.prototype._instanceId=null,s.prototype._isConnected=!1,s.prototype._isConnecting=!1,s.prototype._isDisconnecting=!1,s.prototype._lastBackoffIndex=0,s.prototype._lastBackoffTimeout=0,s.prototype._lastInterval=0,s.prototype._lastReconnect=null,s.prototype._onBindComplete=null,s._onBindEnd=null,s.prototype._onBindFailure=null,s._onBindRequest=null,s._onBindResponse=null,s.prototype._onBindSuccess=null,s.prototype._onConnectComplete=null,s._onConnectEnd=null,s.prototype._onConnectFailure=null,s._onConnectRequest=null,s._onConnectResponse=null,s.prototype._onConnectSuccess=null,s.prototype._onDisconnectComplete=null,s._onDisconnectEnd=null,s._onDisconnectRequest=null,s._onDisconnectResponse=null,s.prototype._onNotify=null,s.prototype._onNotifyComplete=null,s._onNotifyEnd=null,s.prototype._onNotifyFailure=null,s._onNotifyRequest=null,s._onNotifyResponse=null,s.prototype._onNotifySuccess=null,s.prototype._onPublishComplete=null,s._onPublishEnd=null,s.prototype._onPublishFailure=null,s._onPublishRequest=null,s._onPublishResponse=null,s.prototype._onPublishSuccess=null,s.prototype._onServerBind=null,s.prototype._onServerSubscribe=null,s.prototype._onServerUnbind=null,s.prototype._onServerUnsubscribe=null,s.prototype._onServiceComplete=null,s._onServiceEnd=null,s.prototype._onServiceFailure=null,s._onServiceRequest=null,s._onServiceResponse=null,s.prototype._onServiceSuccess=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSubscribeComplete=null,s._onSubscribeEnd=null,s.prototype._onSubscribeFailure=null,s._onSubscribeRequest=null,s._onSubscribeResponse=null,s.prototype._onSubscribeSuccess=null,s.prototype._onUnbindComplete=null,s._onUnbindEnd=null,s.prototype._onUnbindFailure=null,s._onUnbindRequest=null,s._onUnbindResponse=null,s.prototype._onUnbindSuccess=null,s.prototype._onUnsubscribeComplete=null,s._onUnsubscribeEnd=null,s.prototype._onUnsubscribeFailure=null,s._onUnsubscribeRequest=null,s._onUnsubscribeResponse=null,s.prototype._onUnsubscribeSuccess=null,s.prototype._pendingReceives=null,s.prototype._pendingRestoreStateCalls=0,s.prototype._pendingRestoreStateCallsLock=null,s.prototype._queueActivated=!1,s.prototype._queueLock=null,s.prototype._rebindCache=null,s.prototype._reconnectCache=null,s.prototype._reconnectCacheLock=null,s.prototype._requestQueue=null,s.prototype._requestTransfer=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.prototype._responseArgs=null,s.prototype._resubscribeCache=null,s.prototype._serverTimeout=0,s.prototype._sessionId=null,s._stateKey=null,s.prototype._stateLock=null,s.prototype._streamRequestTransfer=null,s.prototype._subscribedChannels=null,s.prototype._subscribedChannelsLock=null,s.prototype._subscribedDynamicProperties=null,s.prototype._subscribedOnReceives=null,s.prototype._subscribedOnReceivesLock=null,s.prototype._supportedConnectionTypes=null,s.prototype._synchronous=null,s.prototype._threadCounters=null,s.prototype._threadCountersLock=null,s.prototype._token=null,s.prototype._webSocketOpened=!1,s.addOnBindEnd=function(){var e;return e=arguments[0],fm.websync.client._onBindEnd=fm.delegate.combine(fm.websync.client._onBindEnd,e)},s.addOnBindRequest=function(){var e;return e=arguments[0],fm.websync.client._onBindRequest=fm.delegate.combine(fm.websync.client._onBindRequest,e)},s.addOnBindResponse=function(){var e;return e=arguments[0],fm.websync.client._onBindResponse=fm.delegate.combine(fm.websync.client._onBindResponse,e)},s.addOnConnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onConnectEnd=fm.delegate.combine(fm.websync.client._onConnectEnd,e)},s.addOnConnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onConnectRequest=fm.delegate.combine(fm.websync.client._onConnectRequest,e)},s.addOnConnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onConnectResponse=fm.delegate.combine(fm.websync.client._onConnectResponse,e)},s.addOnDisconnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectEnd=fm.delegate.combine(fm.websync.client._onDisconnectEnd,e)},s.addOnDisconnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectRequest=fm.delegate.combine(fm.websync.client._onDisconnectRequest,e)},s.addOnDisconnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectResponse=fm.delegate.combine(fm.websync.client._onDisconnectResponse,e)},s.addOnNotifyEnd=function(){var e;return e=arguments[0],fm.websync.client._onNotifyEnd=fm.delegate.combine(fm.websync.client._onNotifyEnd,e)},s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.client._onNotifyRequest=fm.delegate.combine(fm.websync.client._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.client._onNotifyResponse=fm.delegate.combine(fm.websync.client._onNotifyResponse,e)},s.addOnPublishEnd=function(){var e;return e=arguments[0],fm.websync.client._onPublishEnd=fm.delegate.combine(fm.websync.client._onPublishEnd,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.client._onPublishRequest=fm.delegate.combine(fm.websync.client._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.client._onPublishResponse=fm.delegate.combine(fm.websync.client._onPublishResponse,e)},s.addOnServiceEnd=function(){var e;return e=arguments[0],fm.websync.client._onServiceEnd=fm.delegate.combine(fm.websync.client._onServiceEnd,e)},s.addOnServiceRequest=function(){var e;return e=arguments[0],fm.websync.client._onServiceRequest=fm.delegate.combine(fm.websync.client._onServiceRequest,e)},s.addOnServiceResponse=function(){var e;return e=arguments[0],fm.websync.client._onServiceResponse=fm.delegate.combine(fm.websync.client._onServiceResponse,e)},s.addOnSubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeEnd=fm.delegate.combine(fm.websync.client._onSubscribeEnd,e)},s.addOnSubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeRequest=fm.delegate.combine(fm.websync.client._onSubscribeRequest,e)},s.addOnSubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeResponse=fm.delegate.combine(fm.websync.client._onSubscribeResponse,e)},s.addOnUnbindEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnbindEnd=fm.delegate.combine(fm.websync.client._onUnbindEnd,e)},s.addOnUnbindRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnbindRequest=fm.delegate.combine(fm.websync.client._onUnbindRequest,e)},s.addOnUnbindResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnbindResponse=fm.delegate.combine(fm.websync.client._onUnbindResponse,e)},s.addOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeEnd=fm.delegate.combine(fm.websync.client._onUnsubscribeEnd,e)},s.addOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeRequest=fm.delegate.combine(fm.websync.client._onUnsubscribeRequest,e)},s.addOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeResponse=fm.delegate.combine(fm.websync.client._onUnsubscribeResponse,e)},s.generateToken=function(){var e;return e=fm.intExtensions.toString(fm.dateTime.getUtcNow().getTicks()),fm.stringExtensions.substring(e,e.length-12,8)},s.getChannelForPublish=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__channel:fm.global.equals(t.getChannel(),null)?e.__channel:t.getChannel()},s.getChannelForService=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__channel:fm.global.equals(e.getChannel(),null)?t.__channel:e.getChannel()},s.getChannelsForSubscribe=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__channels:fm.global.equals(e.getChannels(),null)?t.__channels:e.getChannels()},s.getChannelsForUnsubscribe=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__channels:fm.global.equals(e.getChannels(),null)?t.__channels:e.getChannels()},s.getDataBytesForNotify=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__dataBytes:fm.global.equals(t.getDataBytes(),null)?e.__dataBytes:t.getDataBytes()},s.getDataBytesForPublish=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__dataBytes:fm.global.equals(t.getDataBytes(),null)?e.__dataBytes:t.getDataBytes()},s.getDataBytesForService=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__dataBytes:fm.global.equals(e.getDataBytes(),null)?t.__dataBytes:e.getDataBytes()},s.getDataJsonForNotify=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__dataJson:fm.global.equals(t.getDataJson(),null)?e.__dataJson:t.getDataJson()},s.getDataJsonForPublish=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__dataJson:fm.global.equals(t.getDataJson(),null)?e.__dataJson:t.getDataJson()},s.getDataJsonForService=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__dataJson:fm.global.equals(e.getDataJson(),null)?t.__dataJson:e.getDataJson()},s.getExtensions=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.getExtensions():t.getExtensions()},s.getRecordsForBind=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t,null)?e.__records:fm.global.equals(t.getRecords(),null)?e.__records:t.getRecords()},s.getRecordsForUnbind=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?t.__records:fm.global.equals(e.getRecords(),null)?t.__records:e.getRecords()},s.getSubscribeKey=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(t,null)?fm.stringExtensions.format("-1|{0}",e):fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(t.length),t,e)},s.getTimestamp=function(){var e;return e=arguments[0],fm.global.equals(e,null)?null:e.getTimestamp()},s.removeOnBindEnd=function(){var e;return e=arguments[0],fm.websync.client._onBindEnd=fm.delegate.remove(fm.websync.client._onBindEnd,e)},s.removeOnBindRequest=function(){var e;return e=arguments[0],fm.websync.client._onBindRequest=fm.delegate.remove(fm.websync.client._onBindRequest,e)},s.removeOnBindResponse=function(){var e;return e=arguments[0],fm.websync.client._onBindResponse=fm.delegate.remove(fm.websync.client._onBindResponse,e)},s.removeOnConnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onConnectEnd=fm.delegate.remove(fm.websync.client._onConnectEnd,e)},s.removeOnConnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onConnectRequest=fm.delegate.remove(fm.websync.client._onConnectRequest,e)},s.removeOnConnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onConnectResponse=fm.delegate.remove(fm.websync.client._onConnectResponse,e)},s.removeOnDisconnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectEnd=fm.delegate.remove(fm.websync.client._onDisconnectEnd,e)},s.removeOnDisconnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectRequest=fm.delegate.remove(fm.websync.client._onDisconnectRequest,e)},s.removeOnDisconnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectResponse=fm.delegate.remove(fm.websync.client._onDisconnectResponse,e)},s.removeOnNotifyEnd=function(){var e;return e=arguments[0],fm.websync.client._onNotifyEnd=fm.delegate.remove(fm.websync.client._onNotifyEnd,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.client._onNotifyRequest=fm.delegate.remove(fm.websync.client._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.client._onNotifyResponse=fm.delegate.remove(fm.websync.client._onNotifyResponse,e)},s.removeOnPublishEnd=function(){var e;return e=arguments[0],fm.websync.client._onPublishEnd=fm.delegate.remove(fm.websync.client._onPublishEnd,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.client._onPublishRequest=fm.delegate.remove(fm.websync.client._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.client._onPublishResponse=fm.delegate.remove(fm.websync.client._onPublishResponse,e)},s.removeOnServiceEnd=function(){var e;return e=arguments[0],fm.websync.client._onServiceEnd=fm.delegate.remove(fm.websync.client._onServiceEnd,e)},s.removeOnServiceRequest=function(){var e;return e=arguments[0],fm.websync.client._onServiceRequest=fm.delegate.remove(fm.websync.client._onServiceRequest,e)},s.removeOnServiceResponse=function(){var e;return e=arguments[0],fm.websync.client._onServiceResponse=fm.delegate.remove(fm.websync.client._onServiceResponse,e)},s.removeOnSubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeEnd=fm.delegate.remove(fm.websync.client._onSubscribeEnd,e)},s.removeOnSubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeRequest=fm.delegate.remove(fm.websync.client._onSubscribeRequest,e)},s.removeOnSubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeResponse=fm.delegate.remove(fm.websync.client._onSubscribeResponse,e)},s.removeOnUnbindEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnbindEnd=fm.delegate.remove(fm.websync.client._onUnbindEnd,e)},s.removeOnUnbindRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnbindRequest=fm.delegate.remove(fm.websync.client._onUnbindRequest,e)},s.removeOnUnbindResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnbindResponse=fm.delegate.remove(fm.websync.client._onUnbindResponse,e)},s.removeOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeEnd=fm.delegate.remove(fm.websync.client._onUnsubscribeEnd,e)},s.removeOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeRequest=fm.delegate.remove(fm.websync.client._onUnsubscribeRequest,e)},s.removeOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeResponse=fm.delegate.remove(fm.websync.client._onUnsubscribeResponse,e)},s.prototype.activateStream=function(){var e,t,n;return t=arguments[0],n=arguments[1],this.raiseConnectSuccess(this._connectArgs,this._responseArgs),this.raiseConnectComplete(this._connectArgs,this._responseArgs),e=new fm.websync.clientConnectEndArgs,e.setMethodArgs(t),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,e,"OnConnectEnd",n),this.processQueue(!0),this.stream(this._connectArgs,!1)},s.prototype.addBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(this._boundRecords[s.getKey()]=s);return i},s.prototype.addOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.combine(this._onBindComplete,e)},s.prototype.addOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.combine(this._onBindFailure,e)},s.prototype.addOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.combine(this._onBindSuccess,e)},s.prototype.addOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.combine(this._onConnectComplete,e)},s.prototype.addOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.combine(this._onConnectFailure,e)},s.prototype.addOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.combine(this._onConnectSuccess,e)},s.prototype.addOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.combine(this._onDisconnectComplete,e)},s.prototype.addOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.combine(this._onNotify,e)},s.prototype.addOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.combine(this._onNotifyComplete,e)},s.prototype.addOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.combine(this._onNotifyFailure,e)},s.prototype.addOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.combine(this._onNotifySuccess,e)},s.prototype.addOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.combine(this._onPublishComplete,e)},s.prototype.addOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.combine(this._onPublishFailure,e)},s.prototype.addOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.combine(this._onPublishSuccess,e)},s.prototype.addOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.combine(this._onServerBind,e)},s.prototype.addOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.combine(this._onServerSubscribe,e)},s.prototype.addOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.combine(this._onServerUnbind,e)},s.prototype.addOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.combine(this._onServerUnsubscribe,e)},s.prototype.addOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.combine(this._onServiceComplete,e)},s.prototype.addOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.combine(this._onServiceFailure,e)},s.prototype.addOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.combine(this._onServiceSuccess,e)},s.prototype.addOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.combine(this._onStateRestored,e)},s.prototype.addOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.combine(this._onStreamFailure,e)},s.prototype.addOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.combine(this._onSubscribeComplete,e)},s.prototype.addOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.combine(this._onSubscribeFailure,e)},s.prototype.addOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.combine(this._onSubscribeSuccess,e)},s.prototype.addOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.combine(this._onUnbindComplete,e)},s.prototype.addOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.combine(this._onUnbindFailure,e)},s.prototype.addOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.combine(this._onUnbindSuccess,e)},s.prototype.addOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.combine(this._onUnsubscribeComplete,e)},s.prototype.addOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.combine(this._onUnsubscribeFailure,e)},s.prototype.addOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.combine(this._onUnsubscribeSuccess,e)},s.prototype.addSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,l;for(l=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,l,e),r=e.getValue(),t||(r={},this._subscribedChannels[l]=r),n=s,a=[],i=0,o=n.length;o>i;i++)u=n[i],fm.hashExtensions.containsKey(r,u)?a.push(void 0):a.push(r[u]=new fm.object);return a},s.prototype.addSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u,l,c,h;for(h=arguments[0],s=arguments[1],u=arguments[2],i=arguments[3],l=arguments[4],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,h,e),r=e.getValue(),t||(r={},this._subscribedOnReceives[h]=r),n=s,o=0,a=n.length;a>o;o++)c=n[o],r[c]=u,this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(c,h)]=i;return l=this.processPendingReceives(s,l)},s.prototype.addToQueue=function(){var e,t,n,s,r;return t=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3],r=null!=r?r:this.getRequestUrl(),e=fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(s),n?"1":"0",r),fm.hashExtensions.containsKey(this._requestQueue,e)||(this._requestQueue[e]=[]),fm.arrayExtensions.add(this._requestQueue[e],t)},s.prototype.bind=function(){var e,t,n,s,r;if(t=arguments[0],fm.global.equals(t.getRecords(),null)||fm.global.equals(t.getRecords().length,0))throw new Error("records cannot be null.");for(e=t.getRecords(),n=0,s=e.length;s>n;n++){if(r=e[n],fm.global.equals(r.getKey(),null))throw new Error("key cannot be null.");if(fm.global.equals(r.getValueJson(),null))throw new Error("valueJson cannot be null.")}return this.performBind(t),this},s.prototype.checkSynchronous=function(){var e;return e=arguments[0],null!==e?e:null!==this.getSynchronous()?this.getSynchronous():!1},s.prototype.clearBoundRecords=function(){return fm.hashExtensions.clear(this._boundRecords)},s.prototype.clearSubscribedChannels=function(){return fm.hashExtensions.clear(this._subscribedChannels),fm.hashExtensions.clear(this._customOnReceives)},s.prototype.connect=function(){var e;return 1===arguments.length?(e=arguments[0],this.performConnect(e),this):0===arguments.length?this.connect(new fm.websync.connectArgs):void 0},s.prototype.decrementPendingRestoreStateCalls=function(){return this._pendingRestoreStateCalls--,this._pendingRestoreStateCalls},s.prototype.disconnect=function(){var e;return 0===arguments.length?this.disconnect(new fm.websync.disconnectArgs):1===arguments.length?(e=arguments[0],this.performDisconnect(e),this):void 0},s.prototype.doLongPolling=function(){return this._connectionType=fm.websync.connectionType.LongPolling,this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.endBatch=function(){var e;return e=!1,this._batchCounter--,this._batchCounter<=0&&(this._batchCounter=0,e=!0),e&&this.processQueue(!1),this},s.prototype.getBoundRecords=function(){var e,t,n,s,r;for(t={},e=fm.hashExtensions.getKeys(this._boundRecords),n=0,s=e.length;s>n;n++)r=e[n],t[r]=this._boundRecords[r].duplicate();return t},s.prototype.getClientId=function(){return this._clientId},s.prototype.getCustomOnReceive=function(){var e;return e=arguments[0],this.getCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.getCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o,a;if(i=arguments[0],a=arguments[1],fm.global.equals(i,null))throw new Error("channel cannot be null.");return fm.global.equals(a,null)&&(a=fm.stringExtensions.empty),r=null,o=null,e=new fm.holder(o),t=fm.hashExtensions.tryGetValue(this._customOnReceives,a,e),o=e.getValue(),t?(n=new fm.holder(r),s=fm.hashExtensions.tryGetValue(o,i,n),r=n.getValue(),s||(r=null),r):r},s.prototype.getDisableWebSockets=function(){return this._disableWebSockets},s.prototype.getInstanceId=function(){return this._instanceId},s.prototype.getIsConnected=function(){return this._isConnected},s.prototype.getIsConnecting=function(){return this._isConnecting},s.prototype.getIsDisconnecting=function(){return this._isDisconnecting},s.prototype.getServerTimeout=function(){return this._serverTimeout},s.prototype.getSessionId=function(){return this._sessionId},s.prototype.getStreamRequestTimeout=function(){return this.getRequestTimeout()+this.getServerTimeout()},s.prototype.getStreamRequestUrl=function(){return this.__streamRequestUrl},s.prototype.getSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g;if(1===arguments.length){if(g=arguments[0],c=[],s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,g,e),s=e.getValue(),t||(s=null),!fm.global.equals(s,null))for(n=fm.hashExtensions.getKeys(s),r=0,a=n.length;a>r;r++)h=n[r],fm.arrayExtensions.add(c,h);return fm.arrayExtensions.toArray(c)}if(0===arguments.length){for(c=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),i=0,u=e.length;u>i;i++)for(h=e[i],t=fm.hashExtensions.getKeys(this._subscribedChannels[h]),o=0,l=t.length;l>o;o++)p=t[o],fm.arrayExtensions.add(c,p);return fm.arrayExtensions.toArray(c)}},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.getThreadId=function(){return fm.managedThread.currentThreadId()},s.prototype.getToken=function(){return this._token},s.prototype.inBatch=function(){return this._batchCounter>0},s.prototype.inCallback=function(){var e;return e=this.getThreadId(),fm.hashExtensions.containsKey(this._threadCounters,e)&&this._threadCounters[e]>0},s.prototype.maybeRaiseStateRestored=function(){var e;return fm.global.equals(this.decrementPendingRestoreStateCalls(),0)&&(e=this._connectArgs,
!fm.global.equals(e,null))?this.raiseStateRestored(e):void 0},s.prototype.notify=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performNotify(e),this},s.prototype.performBind=function(){var e,t,n,s,r,i;return t=arguments[0],null===t.getAutoRebind()&&t.setAutoRebind(!this.inCallback()),e=new fm.websync.clientBindRequestArgs,e.setMethodArgs(t),this.raiseRequestEvent(fm.websync.client._onBindRequest,e,"OnBindRequest")?(i=this.checkSynchronous(t.getSynchronous()),r=new fm.websync.clientRequest,n=new fm.websync.message("/meta/bind"),n.setValidate(!1),n.setRecords(t.getRecords()),n.setExtensions(t.getExtensions()),r.setMessage(n),r.setCallback(this.performBindCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,t),this.addToQueue(s,t.getRequestUrl(),i,null!==t.getRequestTimeout()?t.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performBindCallback=function(){var e,t,n,s,r,i,o,a,u,l;if(l=arguments[0],r=l.getDynamicValue(fm.websync.client._argsKey),t=new fm.websync.clientBindResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onBindResponse,t,"OnBindResponse",l),fm.global.equals(l.getException(),null)){if(fm.global.equals(r.getAutoRebind(),!0))for(fm.arrayExtensions.add(this._reconnectCache,r),e=l.getResponse().getRecords(),o=0,a=e.length;a>o;o++)u=e[o],this._rebindCache[u.getKey()]=r;if(this.addBoundRecords(l.getResponse().getRecords()),this.raiseBindSuccess(r,l),this.raiseBindComplete(r,l),s=new fm.websync.clientBindEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onBindEnd,s,"OnBindEnd",l),r.getIsRebind())return this.maybeRaiseStateRestored()}else{if(i=this.raiseBindFailure(r,l,!1),this.raiseBindComplete(r,l),n=new fm.websync.clientBindEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onBindEnd,n,"OnBindEnd",l),i)return r.setIsRetry(!0),this.bind(r);if(r.getIsRebind())return this.maybeRaiseStateRestored()}},s.prototype.performConnect=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p;return r=arguments[0],s=new fm.websync.clientConnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onConnectRequest,s,"OnConnectRequest")?this.getIsConnecting()||this.getIsConnected()?(h=this.getIsConnecting()?"Client is already connecting.":"Client is already connected.",t=new fm.websync.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),o=new fm.websync.message("/meta/handshake"),o.setExtensions(r.getExtensions()),o.setTimestamp(fm.dateTime.getUtcNow()),o.setSuccessful(!1),o.setError(h),t.setResponse(o),t.setException(new Error(h)),c=t,e=new fm.websync.clientConnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onConnectResponse,e,"OnConnectResponse",c),this.raiseConnectFailure(r,c,!1),this.raiseConnectComplete(r,c),n=new fm.websync.clientConnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.websync.client._onConnectEnd,n,"OnConnectEnd",c)):(this.setIsConnecting(!0),this._connectArgs=r,i=[],this.getDisableWebSockets()||fm.arrayExtensions.add(i,fm.websync.connectionType.WebSocket),fm.arrayExtensions.add(i,fm.websync.connectionType.LongPolling),this._supportedConnectionTypes=fm.arrayExtensions.toArray(i),p=this.checkSynchronous(r.getSynchronous()),l=new fm.websync.clientRequest,a=new fm.websync.message("/meta/handshake"),a.setVersion(fm.websync.client._bayeuxVersion),a.setMinimumVersion(fm.websync.client._bayeuxMinimumVersion),a.setSupportedConnectionTypes(this._supportedConnectionTypes),a.setExtensions(r.getExtensions()),l.setMessage(a),l.setCallback(this.performConnectCallback),u=l,null!==r.getLastClientId()&&null!==r.getLastSessionId()&&(u.getMessage().setLastClientId(r.getLastClientId()),u.getMessage().setLastSessionId(r.getLastSessionId())),u.setDynamicValue(fm.websync.client._argsKey,r),this.send(u,r.getRequestUrl(),p,null!==r.getRequestTimeout()?r.getRequestTimeout():0)):void 0},s.prototype.performConnectCallback=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y,d,_,b,v,R,C;if(f=arguments[0],o=f.getDynamicValue(fm.websync.client._argsKey),n=new fm.websync.clientConnectResponseArgs,n.setMethodArgs(o),this.raiseResponseEvent(fm.websync.client._onConnectResponse,n,"OnConnectResponse",f),fm.global.equals(f.getException(),null)){for(this.setClientId(f.getResponse().getClientId()),_=f.getResponse().getSessionId(),null!==_&&this.setSessionId(_),d=f.getResponse().getServerTimeout(),null!==d?this.setServerTimeout(d):this.setServerTimeout(25e3),l=2147483647,e=f.getResponse().getSupportedConnectionTypes(),c=0,p=e.length;p>c;c++)for(C=e[c],u=0;u<this._supportedConnectionTypes.length;)try{if(fm.global.equals(this._supportedConnectionTypes[u],C)){l>u&&(l=u);break}}finally{u++}0>l||l>this._supportedConnectionTypes.length?f.setException(new Error("Could not negotiate a connection type with the server.")):this._connectionType=this._supportedConnectionTypes[l]}if(fm.global.equals(f.getException(),null)){for(this._lastBackoffIndex=-1,this._lastBackoffTimeout=0,m=[],fm.arrayExtensions.addRange(m,this._reconnectCache),fm.arrayExtensions.clear(this._reconnectCache),fm.hashExtensions.clear(this._rebindCache),fm.hashExtensions.clear(this._resubscribeCache),this._pendingRestoreStateCalls=fm.arrayExtensions.getCount(m),t=m,h=0,g=t.length;g>h;h++)if(a=t[h],i=fm.global.tryCast(a,fm.websync.bindArgs),fm.global.equals(i,null)){if(v=fm.global.tryCast(a,fm.websync.subscribeArgs),!fm.global.equals(v,null)){v.setIsRetry(!1),v.setIsResubscribe(!0),this.subscribe(v);continue}}else i.setIsRetry(!1),i.setIsRebind(!0),this.bind(i);if(this.setIsConnecting(!1),this.setIsConnected(!0),this._responseArgs=f,!fm.global.equals(this._connectionType,fm.websync.connectionType.WebSocket)||this.getDisableWebSockets())return this.doLongPolling();if(!this.tryWebSocket())return this.doLongPolling()}else{switch(this.setIsConnecting(!1),y=!1,o.getRetryMode()){case fm.websync.connectRetryMode.Aggressive:y=!0;break;case fm.websync.connectRetryMode.Intelligent:y=f.getErrorCode()<800||f.getErrorCode()>899}if(y=this.raiseConnectFailure(o,f,y),this.raiseConnectComplete(o,f),r=new fm.websync.clientConnectEndArgs,r.setMethodArgs(o),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,r,"OnConnectEnd",f),y)return R=0,fm.global.equals(o.getRetryBackoff(),null)||(s=new fm.websync.backoffArgs,s.setIndex(this._lastBackoffIndex+1),s.setLastTimeout(this._lastBackoffTimeout),R=o.getRetryBackoff()(s)),R>0?(b=new fm.websync.deferredRetryConnectState,b.setConnectArgs(o),b.setBackoffTimeout(R),fm.deferrer.defer(this.retryConnectDeferred,R,b)):this.retryConnect(o,R)}},s.prototype.performDisconnect=function(){var e,t,n,s,r,i,o,a,u,l,c,h;return r=arguments[0],s=new fm.websync.clientDisconnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onDisconnectRequest,s,"OnDisconnectRequest")?this.getIsDisconnecting()||!this.getIsConnected()?(c=this.getIsDisconnecting()?"Client is already disconnecting.":"Client is already disconnected.",t=new fm.websync.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),i=new fm.websync.message("/meta/handshake"),i.setExtensions(r.getExtensions()),i.setTimestamp(fm.dateTime.getUtcNow()),i.setSuccessful(!1),i.setError(c),t.setResponse(i),t.setException(new Error(c)),l=t,e=new fm.websync.clientDisconnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,e,"OnDisonnectResponse",l),this.raiseDisconnectComplete(r,l),n=new fm.websync.clientDisconnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,n,"OnDisconnectEnd",l)):(this.setIsDisconnecting(!0),h=this.checkSynchronous(r.getSynchronous()),u=new fm.websync.clientRequest,o=new fm.websync.message("/meta/disconnect"),o.setExtensions(r.getExtensions()),u.setMessage(o),u.setCallback(this.performDisconnectCallback),a=u,a.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(a,r.getRequestUrl(),h,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performDisconnectCallback=function(){var e,t,n,s,r,i;i=arguments[0],n=i.getDynamicValue(fm.websync.client._argsKey),e=new fm.websync.clientDisconnectResponseArgs,e.setMethodArgs(n),this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,e,"OnDisconnectResponse",i),this.raiseForcedUnsubscribes(n,i),this.raiseForcedUnbinds(n,i),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsDisconnecting(!1),this.setIsConnected(!1),this._webSocketOpened=!1;try{fm.global.equals(this._requestTransfer,null)||this._requestTransfer.shutdown(),fm.global.equals(this._streamRequestTransfer,null)||this._streamRequestTransfer.shutdown()}catch(s){r=s}finally{}return this.raiseDisconnectComplete(n,i),this._queueActivated=!1,t=new fm.websync.clientDisconnectEndArgs,t.setMethodArgs(n),this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,t,"OnDisconnectEnd",i)},s.prototype.performNotify=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.websync.clientNotifyRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onNotifyRequest,e,"OnNotifyRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.websync.clientRequest,t=new fm.websync.message("/meta/notify"),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performNotifyCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performNotifyCallback=function(){var e,t,n,s,r,i;return i=arguments[0],s=i.getDynamicValue(fm.websync.client._argsKey),e=new fm.websync.clientNotifyResponseArgs,e.setMethodArgs(s),this.raiseResponseEvent(fm.websync.client._onNotifyResponse,e,"OnNotifyResponse",i),fm.global.equals(i.getException(),null)?(this.raiseNotifySuccess(s,i),this.raiseNotifyComplete(s,i),n=new fm.websync.clientNotifyEndArgs,n.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,n,"OnNotifyEnd",i)):(r=this.raiseNotifyFailure(s,i,!1),this.raiseNotifyComplete(s,i),t=new fm.websync.clientNotifyEndArgs,t.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,t,"OnNotifyEnd",i),r?(s.setIsRetry(!0),this.notify(s)):void 0)},s.prototype.performPublish=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.websync.clientPublishRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onPublishRequest,e,"OnPublishRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.websync.clientRequest,t=new fm.websync.message(n.getChannel()),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performPublishCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performPublishCallback=function(){var e,t,n,s,r,i;return i=arguments[0],s=i.getDynamicValue(fm.websync.client._argsKey),e=new fm.websync.clientPublishResponseArgs,e.setMethodArgs(s),this.raiseResponseEvent(fm.websync.client._onPublishResponse,e,"OnPublishResponse",i),fm.global.equals(i.getException(),null)?(this.raisePublishSuccess(s,i),this.raisePublishComplete(s,i),n=new fm.websync.clientPublishEndArgs,n.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,n,"OnPublishEnd",i)):(r=this.raisePublishFailure(s,i,!1),this.raisePublishComplete(s,i),t=new fm.websync.clientPublishEndArgs,t.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,t,"OnPublishEnd",i),r?(s.setIsRetry(!0),this.publish(s)):void 0)},s.prototype.performService=function(){var e,t,n,s,r,i;return r=arguments[0],e=new fm.websync.clientServiceRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onServiceRequest,e,"OnServiceRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(r.getChannel())),t.setValidate(!1),t.setDataJson(r.getDataJson()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performServiceCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performServiceCallback=function(){var e,t,n,s,r,i;return i=arguments[0],s=i.getDynamicValue(fm.websync.client._argsKey),e=new fm.websync.clientServiceResponseArgs,e.setMethodArgs(s),this.raiseResponseEvent(fm.websync.client._onServiceResponse,e,"OnServiceResponse",i),fm.global.equals(i.getException(),null)?(this.raiseServiceSuccess(s,i),this.raiseServiceComplete(s,i),n=new fm.websync.clientServiceEndArgs,n.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,n,"OnServiceEnd",i)):(r=this.raiseServiceFailure(s,i,!1),this.raiseServiceComplete(s,i),t=new fm.websync.clientServiceEndArgs,t.setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,t,"OnServiceEnd",i),r?(s.setIsRetry(!0),this.service(s)):void 0)},s.prototype.performSubscribe=function(){var e,t,n,s,r,i;return r=arguments[0],null===r.getAutoResubscribe()&&r.setAutoResubscribe(!this.inCallback()),e=new fm.websync.clientSubscribeRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onSubscribeRequest,e,"OnSubscribeRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/subscribe"),t.setValidate(!1),t.setChannels(r.getChannels()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performSubscribeCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performSubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p;if(h=arguments[0],i=h.getDynamicValue(fm.websync.client._argsKey),n=new fm.websync.clientSubscribeResponseArgs,n.setMethodArgs(i),this.raiseResponseEvent(fm.websync.client._onSubscribeResponse,n,"OnSubscribeResponse",h),fm.global.equals(h.getException(),null)){if(fm.global.equals(i.getAutoResubscribe(),!0))for(fm.arrayExtensions.add(this._reconnectCache,i),e=h.getResponse().getChannels(),a=0,l=e.length;l>a;a++)p=e[a],this._resubscribeCache[fm.websync.client.getSubscribeKey(p,i.getTag())]=i;for(t=h.getResponse().getChannels(),u=0,c=t.length;c>u;u++)p=t[u],this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(p,i.getTag())]=i.getDynamicProperties();if(this.addSubscribedChannels(h.getResponse().getTag(),h.getResponse().getChannels()),this.raiseSubscribeSuccess(i,h),this.raiseSubscribeComplete(i,h),this.addSubscribedOnReceive(h.getResponse().getTag(),h.getResponse().getChannels(),i.getOnReceive(),i.getDynamicProperties(),this._lastInterval),r=new fm.websync.clientSubscribeEndArgs,r.setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,r,"OnSubscribeEnd",h),i.getIsResubscribe())return this.maybeRaiseStateRestored()}else{if(o=this.raiseSubscribeFailure(i,h,!1),this.raiseSubscribeComplete(i,h),s=new fm.websync.clientSubscribeEndArgs,s.setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,s,"OnSubscribeEnd",h),o)return i.setIsRetry(!0),this.subscribe(i);if(i.getIsResubscribe())return this.maybeRaiseStateRestored()}},s.prototype.performUnbind=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.websync.clientUnbindRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onUnbindRequest,e,"OnUnbindRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/unbind"),t.setValidate(!1),t.setRecords(i.getRecords()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnbindCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnbindCallback=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m;if(m=arguments[0],a=m.getDynamicValue(fm.websync.client._argsKey),s=new fm.websync.clientUnbindResponseArgs,s.setMethodArgs(a),this.raiseResponseEvent(fm.websync.client._onUnbindResponse,s,"OnUnbindResponse",m),fm.global.equals(m.getException(),null)){for(e=m.getResponse().getRecords(),c=0,h=e.length;h>c;c++)if(g=e[c],i=null,t=new fm.holder(i),n=fm.hashExtensions.tryGetValue(this._rebindCache,g.getKey(),t),i=t.getValue(),n||(i=null),!fm.global.equals(i,null)){for(p=[],l=0;l<fm.arrayExtensions.getCount(p);)try{fm.global.equals(p[l].getKey(),g.getKey())&&(p.removeAt(l),l--)}finally{l++}i.setRecords(fm.arrayExtensions.toArray(p)),fm.hashExtensions.remove(this._rebindCache,g.getKey()),fm.hashExtensions.containsValue(this._rebindCache,i)||fm.arrayExtensions.remove(this._reconnectCache,i)}return this.removeBoundRecords(m.getResponse().getRecords()),this.raiseUnbindSuccess(a,m,!1),this.raiseUnbindComplete(a,m,!1),o=new fm.websync.clientUnbindEndArgs,o.setMethodArgs(a),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,o,"OnUnbindEnd",m)}return u=this.raiseUnbindFailure(a,m,!1),this.raiseUnbindComplete(a,m,!1),r=new fm.websync.clientUnbindEndArgs,r.setMethodArgs(a),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,r,"OnUnbindEnd",m),u?(a.setIsRetry(!0),this.unbind(a)):void 0},s.prototype.performUnsubscribe=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.websync.clientUnsubscribeRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onUnsubscribeRequest,e,"OnUnsubscribeRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/unsubscribe"),t.setValidate(!1),t.setChannels(i.getChannels()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnsubscribeCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnsubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m;if(p=arguments[0],a=p.getDynamicValue(fm.websync.client._argsKey),s=new fm.websync.clientUnsubscribeResponseArgs,s.setMethodArgs(a),this.raiseResponseEvent(fm.websync.client._onUnsubscribeResponse,s,"OnUnsubscribeResponse",p),fm.global.equals(p.getException(),null)){for(e=p.getResponse().getChannels(),l=0,c=e.length;c>l;l++)g=e[l],i=null,m=fm.websync.client.getSubscribeKey(g,a.getTag()),t=new fm.holder(i),n=fm.hashExtensions.tryGetValue(this._resubscribeCache,m,t),i=t.getValue(),n||(i=null),fm.global.equals(i,null)||(h=[],fm.arrayExtensions.remove(h,g),i.setChannels(fm.arrayExtensions.toArray(h)),fm.hashExtensions.remove(this._resubscribeCache,m),fm.hashExtensions.containsValue(this._resubscribeCache,i)||fm.arrayExtensions.remove(this._reconnectCache,i));return this.removeSubscribedChannels(p.getResponse().getTag(),p.getResponse().getChannels()),this.removeSubscribedOnReceive(p.getResponse().getTag(),p.getResponse().getChannels()),this.raiseUnsubscribeSuccess(a,p,!1),this.raiseUnsubscribeComplete(a,p,!1),o=new fm.websync.clientUnsubscribeEndArgs,o.setMethodArgs(a),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,o,"OnUnsubscribeEnd",p)}return u=this.raiseUnsubscribeFailure(a,p,!1),this.raiseUnsubscribeComplete(a,p,!1),r=new fm.websync.clientUnsubscribeEndArgs,r.setMethodArgs(a),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,r,"OnUnsubscribeEnd",p),u?(a.setIsRetry(!0),this.unsubscribe(a)):void 0},s.prototype.postRaise=function(){var e,t;return t=arguments[0],fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.Low)?(e=this._threadCounters[t],fm.global.equals(e,1)?fm.hashExtensions.remove(this._threadCounters,t):this._threadCounters[t]=e-1):(e=this._threadCounters[t],this._threadCounters[t]=e-1)},s.prototype.preRaise=function(){var e,t;return t=arguments[0],e=0,fm.hashExtensions.containsKey(this._threadCounters,t)&&(e=this._threadCounters[t]),this._threadCounters[t]=e+1},s.prototype.processAdvice=function(){var e;return e=arguments[0],null!==e.getInterval()&&(this._lastInterval=e.getInterval()),null!==e.getReconnect()?this._lastReconnect=e.getReconnect():void 0},s.prototype.processPendingReceives=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p;for(r=arguments[0],h=arguments[1],e=r,i=0,a=e.length;a>i;i++)if(p=e[i],l=null,t=new fm.holder(l),n=fm.hashExtensions.tryGetValue(this._pendingReceives,p,t),l=t.getValue(),n&&fm.hashExtensions.remove(this._pendingReceives,p),!fm.global.equals(l,null))for(s=l,o=0,u=s.length;u>o;o++)c=s[o],h=this.receiveMessage(c,h);return h},s.prototype.processQueue=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g;if(t=arguments[0],t&&(this._queueActivated=!0),this._queueActivated&&!this.inBatch()){for(i=this._requestQueue,this._requestQueue={},e=fm.hashExtensions.getKeys(i),a=[],s=0,r=e.length;r>s;s++)l=e[s],n=fm.stringExtensions.indexOf(l,"|"),u=fm.stringExtensions.substring(l,0,n),c=l.substring(n+1),p=fm.parseAssistant.parseIntegerValue(u),h=fm.global.equals(fm.stringExtensions.substring(c,0,1),"1"),g=c.substring(1),o=fm.arrayExtensions.toArray(i[l]),a.push(this.sendMany(o,g,h,p));return a}},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.websync.client._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"token",this.getToken()),"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),!fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High))return r;fm.websync.client._requestUrlCache[s]=r}return r},s.prototype.processServerAction=function(){var e,t,n;if(n=arguments[0],t=arguments[1],fm.global.equals(n.getBayeuxChannel(),"/meta/bind"))return this.addBoundRecords(n.getRecords()),this.raiseServerBind(n),t;if(fm.global.equals(n.getBayeuxChannel(),"/meta/unbind"))return this.removeBoundRecords(n.getRecords()),this.raiseServerUnbind(n),t;if(fm.global.equals(n.getBayeuxChannel(),"/meta/subscribe")){if(this.addSubscribedChannels(n.getTag(),n.getChannels()),e=this.raiseServerSubscribe(n),fm.global.equals(e,null))throw new Error(fm.stringExtensions.format("The server subscribed the client to [{0}], but the client did not supply a callback to handle received messages. A callback must be specified in the client's OnServerSubscribe event.",fm.stringExtensions.join(", ",n.getChannels())));return t=this.addSubscribedOnReceive(n.getTag(),n.getChannels(),e,n.getDynamicProperties(),t)}return fm.global.equals(n.getBayeuxChannel(),"/meta/unsubscribe")&&(this.removeSubscribedChannels(n.getTag(),n.getChannels()),this.raiseServerUnsubscribe(n),this.removeSubscribedOnReceive(n.getTag(),n.getChannels())),t},s.prototype.publish=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");if(fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performPublish(e),this},s.prototype.raiseAction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseActionManual(t,e,n,!1)},s.prototype.raiseActionManual=function(){var e,t,n,s,r,i,o,a,u,l;if(t=arguments[0],e=arguments[1],u=arguments[2],a=arguments[3])try{return t(e)}catch(n){if(i=n,r=i,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{}else{l=this.getThreadId(),this.preRaise(l);try{return t(e)}catch(s){if(o=s,r=o,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{this.postRaise(l)}}},s.prototype.raiseBindComplete=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.bindCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setIsRebind(n.getIsRebind()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onBindComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnBindComplete"),fm.global.equals(n.getOnComplete(),null)?void 0:this.raiseAction(n.getOnComplete(),e,"Client -> Bind -> OnComplete")},s.prototype.raiseBindFailure=function(){var e,t,n,s,r,i;return n=arguments[0],r=arguments[1],i=arguments[2],t=new fm.websync.bindFailureArgs,t.__records=fm.websync.client.getRecordsForBind(r.getResponse(),n),t.setException(r.getException()),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setIsRebind(n.getIsRebind()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onBindFailure,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnBindFailure"),fm.global.equals(n.getOnFailure(),null)||(i=this.raiseRetriable(n.getOnFailure(),i,e,"Client -> Bind -> OnFailure")),i},s.prototype.raiseBindSuccess=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.bindSuccessArgs,t.__records=fm.websync.client.getRecordsForBind(r.getResponse(),n),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setIsRebind(n.getIsRebind()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onBindSuccess,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnBindSuccess"),fm.global.equals(n.getOnSuccess(),null)?void 0:this.raiseAction(n.getOnSuccess(),e,"Client -> Bind -> OnSuccess")},s.prototype.raiseCompleteEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseConnectComplete=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.connectCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setIsReconnect(n.getIsReconnect()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onConnectComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnConnectComplete"),fm.global.equals(n.getOnComplete(),null)?void 0:this.raiseAction(n.getOnComplete(),e,"Client -> Connect -> OnComplete")},s.prototype.raiseConnectFailure=function(){var e,t,n,s,r,i;return n=arguments[0],r=arguments[1],i=arguments[2],t=new fm.websync.connectFailureArgs,t.setException(r.getException()),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setIsReconnect(n.getIsReconnect()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onConnectFailure,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnConnectFailure"),fm.global.equals(n.getOnFailure(),null)||(i=this.raiseRetriable(n.getOnFailure(),i,e,"Client -> Connect -> OnFailure")),i},s.prototype.raiseConnectSuccess=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.connectSuccessArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setConnectionType(this._connectionType),t.setIsReconnect(n.getIsReconnect()),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onConnectSuccess,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnConnectSuccess"),fm.global.equals(n.getOnSuccess(),null)?void 0:this.raiseAction(n.getOnSuccess(),e,"Client -> Connect -> OnSuccess")},s.prototype.raiseDisconnectComplete=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.disconnectCompleteArgs,t.setException(r.getException()),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onDisconnectComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnDisconnectComplete"),fm.global.equals(n.getOnComplete(),null)?void 0:this.raiseAction(n.getOnComplete(),e,"Client -> Disconnect -> OnComplete")},s.prototype.raiseEvent=function(){var e,t,n,s,r;if(n=arguments[0],e=arguments[1],s=arguments[2],e.setClient(this),!fm.global.equals(n,null))try{return n(this,e)}catch(t){if(r=t,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,fm.stringExtensions.format("Client -> {0}",s))}finally{}},s.prototype.raiseForcedUnbinds=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p;for(s=arguments[0],c=arguments[1],l=[],e=fm.hashExtensions.getKeys(this._boundRecords),i=0,a=e.length;a>i;i++)p=e[i],r=new fm.websync.unbindArgs([this._boundRecords[p]]),r.setRequestUrl(s.getRequestUrl()),r.setSynchronous(s.getSynchronous()),r.setIsRetry(s.getIsRetry()),r.setExtensions(fm.websync.client.getExtensions(c.getResponse(),s)),r.setDynamicProperties(s.getDynamicProperties()),fm.arrayExtensions.add(l,r);for(t=l,h=[],o=0,u=t.length;u>o;o++)n=t[o],this.raiseUnbindSuccess(n,c,!0),h.push(this.raiseUnbindComplete(n,c,!0));return h},s.prototype.raiseForcedUnsubscribes=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y;for(r=arguments[0],g=arguments[1],p=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),o=0,l=e.length;l>o;o++)for(f=e[o],t=fm.hashExtensions.getKeys(this._subscribedChannels[f]),a=0,c=t.length;c>a;a++)y=t[a],i=new fm.websync.unsubscribeArgs([y],f),i.setRequestUrl(r.getRequestUrl()),i.setSynchronous(r.getSynchronous()),i.setIsRetry(r.getIsRetry()),i.setExtensions(fm.websync.client.getExtensions(g.getResponse(),r)),i.setDynamicProperties(r.getDynamicProperties()),fm.arrayExtensions.add(p,i);for(n=p,m=[],u=0,h=n.length;h>u;u++)s=n[u],this.raiseUnsubscribeSuccess(s,g,!0),m.push(this.raiseUnsubscribeComplete(s,g,!0));return m},s.prototype.raiseFunction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseFunctionManual(t,e,n,!1)},s.prototype.raiseFunctionManual=function(){var e,t,n,s,r,i,o,a,u,l,c;if(t=arguments[0],e=arguments[1],l=arguments[2],u=arguments[3])try{return t(e)}catch(n){return i=n,r=i,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,l),null}finally{}c=this.getThreadId(),this.preRaise(c);try{a=t(e)}catch(s){o=s,r=o,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,l),a=null}finally{this.postRaise(c)}return a},s.prototype.raiseNotifyComplete=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.notifyCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onNotifyComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnNotifyComplete"),fm.global.equals(n.getOnComplete(),null)?void 0:this.raiseAction(n.getOnComplete(),e,"Client -> Notify -> OnComplete")},s.prototype.raiseNotifyDelivery=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],s=arguments[2],t=new fm.websync.notifyReceiveArgs(r.__dataJson,r.__dataBytes,this._connectionType,s),t.setExtensions(r.getExtensions()),t.setTimestamp(fm.websync.client.getTimestamp(r)),t.setClient(this),e=t,fm.global.equals(n,null)||this.raiseActionManual(n,e,"Client -> OnNotify",!0),e.getReconnectAfter()},s.prototype.raiseNotifyFailure=function(){var e,t,n,s,r,i;return n=arguments[0],r=arguments[1],i=arguments[2],t=new fm.websync.notifyFailureArgs,t.__dataJson=fm.websync.client.getDataJsonForNotify(r.getResponse(),n),
t.__dataBytes=fm.websync.client.getDataBytesForNotify(r.getResponse(),n),t.setException(r.getException()),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onNotifyFailure,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnNotifyFailure"),fm.global.equals(n.getOnFailure(),null)||(i=this.raiseRetriable(n.getOnFailure(),i,e,"Client -> Notify -> OnFailure")),i},s.prototype.raiseNotifySuccess=function(){var e,t,n,s,r;return n=arguments[0],r=arguments[1],t=new fm.websync.notifySuccessArgs,t.__dataJson=fm.websync.client.getDataJsonForNotify(r.getResponse(),n),t.__dataBytes=fm.websync.client.getDataBytesForNotify(r.getResponse(),n),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),n)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onNotifySuccess,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnNotifySuccess"),fm.global.equals(n.getOnSuccess(),null)?void 0:this.raiseAction(n.getOnSuccess(),e,"Client -> Notify -> OnSuccess")},s.prototype.raisePublishComplete=function(){var e,t,n,s,r;return s=arguments[0],r=arguments[1],t=new fm.websync.publishCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),s)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(s.getDynamicProperties()),e=t,n=this._onPublishComplete,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnPublishComplete"),fm.global.equals(s.getOnComplete(),null)?void 0:this.raiseAction(s.getOnComplete(),e,"Client -> Publish -> OnComplete")},s.prototype.raisePublishFailure=function(){var e,t,n,s,r,i;return s=arguments[0],r=arguments[1],i=arguments[2],t=new fm.websync.publishFailureArgs,t.__channel=fm.websync.client.getChannelForPublish(r.getResponse(),s),t.__dataJson=fm.websync.client.getDataJsonForPublish(r.getResponse(),s),t.__dataBytes=fm.websync.client.getDataBytesForPublish(r.getResponse(),s),t.setException(r.getException()),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),s)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(s.getDynamicProperties()),e=t,n=this._onPublishFailure,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnPublishFailure"),fm.global.equals(s.getOnFailure(),null)||(i=this.raiseRetriable(s.getOnFailure(),i,e,"Client -> Publish -> OnFailure")),i},s.prototype.raisePublishSuccess=function(){var e,t,n,s,r;return s=arguments[0],r=arguments[1],t=new fm.websync.publishSuccessArgs,t.__channel=fm.websync.client.getChannelForPublish(r.getResponse(),s),t.__dataJson=fm.websync.client.getDataJsonForPublish(r.getResponse(),s),t.__dataBytes=fm.websync.client.getDataBytesForPublish(r.getResponse(),s),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),s)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(s.getDynamicProperties()),e=t,n=this._onPublishSuccess,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnPublishSuccess"),fm.global.equals(s.getOnSuccess(),null)?void 0:this.raiseAction(s.getOnSuccess(),e,"Client -> Publish -> OnSuccess")},s.prototype.raiseRequestEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseEvent(t,e,n),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseRetriable=function(){var e,t,n,s;return t=arguments[0],n=arguments[1],e=arguments[2],s=arguments[3],e.setRetry(n),this.raiseAction(t,e,s),e.getRetry()},s.prototype.raiseSendException=function(){var e,t,n,s,r,i,o,a;for(a=arguments[0],t=arguments[1],e=a.getRequests(),o=[],n=0,s=e.length;s>n;n++)i=e[n],r=new fm.websync.clientResponseArgs,r.setDynamicProperties(i.getDynamicProperties()),r.setException(t),o.push(i.getCallback()(r));return o},s.prototype.raiseServerBind=function(){var e,t,n;return n=arguments[0],t=this._onServerBind,fm.global.equals(t,null)?void 0:(e=new fm.websync.serverBindArgs,e.__records=n.getRecords(),e.setExtensions(n.getExtensions()),e.setTimestamp(n.getTimestamp()),e.setClient(this),this.raiseAction(t,e,"Client -> OnServerBind"))},s.prototype.raiseServerSubscribe=function(){var e,t,n;return n=arguments[0],t=this._onServerSubscribe,fm.global.equals(t,null)?null:(e=new fm.websync.serverSubscribeArgs,e.__channels=n.getChannels(),e.setExtensions(n.getExtensions()),e.setTimestamp(n.getTimestamp()),e.setClient(this),this.raiseFunction(t,e,"Client -> OnServerSubscribe"))},s.prototype.raiseServerUnbind=function(){var e,t,n;return n=arguments[0],t=this._onServerUnbind,fm.global.equals(t,null)?void 0:(e=new fm.websync.serverUnbindArgs,e.__records=n.getRecords(),e.setExtensions(n.getExtensions()),e.setTimestamp(n.getTimestamp()),e.setClient(this),this.raiseAction(t,e,"Client -> OnServerUnbind"))},s.prototype.raiseServerUnsubscribe=function(){var e,t,n;return n=arguments[0],t=this._onServerUnsubscribe,fm.global.equals(t,null)?void 0:(e=new fm.websync.serverUnsubscribeArgs,e.__channels=n.getChannels(),e.setExtensions(n.getExtensions()),e.setTimestamp(n.getTimestamp()),e.setClient(this),this.raiseAction(t,e,"Client -> OnServerUnsubscribe"))},s.prototype.raiseServiceComplete=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],t=new fm.websync.serviceCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),r)),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(r.getDynamicProperties()),e=t,n=this._onServiceComplete,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnServiceComplete"),fm.global.equals(r.getOnComplete(),null)?void 0:this.raiseAction(r.getOnComplete(),e,"Client -> Service -> OnComplete")},s.prototype.raiseServiceFailure=function(){var e,t,n,s,r,i;return i=arguments[0],s=arguments[1],r=arguments[2],t=new fm.websync.serviceFailureArgs,t.__channel=fm.websync.client.getChannelForService(s.getResponse(),i),t.__dataJson=fm.websync.client.getDataJsonForService(s.getResponse(),i),t.__dataBytes=fm.websync.client.getDataBytesForService(s.getResponse(),i),t.setException(s.getException()),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),e=t,n=this._onServiceFailure,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnServiceFailure"),fm.global.equals(i.getOnFailure(),null)||(r=this.raiseRetriable(i.getOnFailure(),r,e,"Client -> Service -> OnFailure")),r},s.prototype.raiseServiceSuccess=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],t=new fm.websync.serviceSuccessArgs,t.__channel=fm.websync.client.getChannelForService(s.getResponse(),r),t.__dataJson=fm.websync.client.getDataJsonForService(s.getResponse(),r),t.__dataBytes=fm.websync.client.getDataBytesForService(s.getResponse(),r),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),r)),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(r.getDynamicProperties()),e=t,n=this._onServiceSuccess,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnServiceSuccess"),fm.global.equals(r.getOnSuccess(),null)?void 0:this.raiseAction(r.getOnSuccess(),e,"Client -> Service -> OnSuccess")},s.prototype.raiseStateRestored=function(){var e,t,n,s;return n=arguments[0],t=new fm.websync.stateRestoredArgs,t.setExtensions(n.getExtensions()),t.setClient(this),t.setDynamicProperties(n.getDynamicProperties()),e=t,s=this._onStateRestored,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnStateRestored"),fm.global.equals(n.getOnStateRestored(),null)?void 0:this.raiseAction(n.getOnStateRestored(),e,"Client -> Connect -> OnStateRestored")},s.prototype.raiseStreamFailure=function(){var e,t,n,s,r,i,o;return n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],t=new fm.websync.streamFailureArgs,t.setException(i.getException()),t.setExtensions(fm.websync.client.getExtensions(i.getResponse(),n)),t.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),t.setClient(this),t.setConnectArgs(n),t.setDynamicProperties(n.getDynamicProperties()),e=t,r=this._onStreamFailure,fm.global.equals(r,null)||this.raiseAction(r,e,"Client -> OnStreamFailure"),fm.global.equals(n.getOnStreamFailure(),null)||(o=this.raiseRetriable(n.getOnStreamFailure(),o,e,"Client -> Connect -> OnStreamFailure")),s.setValue(e.getConnectArgs()),o},s.prototype.raiseSubscribeComplete=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],t=new fm.websync.subscribeCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),r)),t.setIsResubscribe(r.getIsResubscribe()),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(r.getDynamicProperties()),e=t,n=this._onSubscribeComplete,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnSubscribeComplete"),fm.global.equals(r.getOnComplete(),null)?void 0:this.raiseAction(r.getOnComplete(),e,"Client -> Subscribe -> OnComplete")},s.prototype.raiseSubscribeDelivery=function(){var e,t,n,s,r,i;return s=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],t=new fm.websync.subscribeReceiveArgs(i.getBayeuxChannel(),i.__dataJson,i.__dataBytes,this._connectionType,r),t.setExtensions(i.getExtensions()),t.setTimestamp(fm.websync.client.getTimestamp(i)),t.setClient(this),t.setDynamicProperties(n),e=t,fm.global.equals(s,null)||this.raiseActionManual(s,e,"Client -> Subscribe -> OnReceive",!0),e.getReconnectAfter()},s.prototype.raiseSubscribeFailure=function(){var e,t,n,s,r,i;return i=arguments[0],s=arguments[1],r=arguments[2],t=new fm.websync.subscribeFailureArgs,t.__channels=fm.websync.client.getChannelsForSubscribe(s.getResponse(),i),t.setException(s.getException()),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),i)),t.setIsResubscribe(i.getIsResubscribe()),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),e=t,n=this._onSubscribeFailure,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnSubscribeFailure"),fm.global.equals(i.getOnFailure(),null)||(r=this.raiseRetriable(i.getOnFailure(),r,e,"Client -> Subscribe -> OnFailure")),r},s.prototype.raiseSubscribeSuccess=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],t=new fm.websync.subscribeSuccessArgs,t.__channels=fm.websync.client.getChannelsForSubscribe(s.getResponse(),r),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),r)),t.setIsResubscribe(r.getIsResubscribe()),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(r.getDynamicProperties()),e=t,n=this._onSubscribeSuccess,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnSubscribeSuccess"),fm.global.equals(r.getOnSuccess(),null)?void 0:this.raiseAction(r.getOnSuccess(),e,"Client -> Subscribe -> OnSuccess")},s.prototype.raiseUnbindComplete=function(){var e,t,n,s,r,i;return i=arguments[0],r=arguments[1],n=arguments[2],t=new fm.websync.unbindCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),t.__forced=n,e=t,s=this._onUnbindComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnUnbindComplete"),fm.global.equals(i.getOnComplete(),null)?void 0:this.raiseAction(i.getOnComplete(),e,"Client -> Unbind -> OnComplete")},s.prototype.raiseUnbindFailure=function(){var e,t,n,s,r,i;return i=arguments[0],s=arguments[1],r=arguments[2],t=new fm.websync.unbindFailureArgs,t.__records=fm.websync.client.getRecordsForUnbind(s.getResponse(),i),t.setException(s.getException()),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),e=t,n=this._onUnbindFailure,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnUnbindFailure"),fm.global.equals(i.getOnFailure(),null)||(r=this.raiseRetriable(i.getOnFailure(),r,e,"Client -> Unbind -> OnFailure")),r},s.prototype.raiseUnbindSuccess=function(){var e,t,n,s,r,i;return i=arguments[0],r=arguments[1],n=arguments[2],t=new fm.websync.unbindSuccessArgs,t.__records=fm.websync.client.getRecordsForUnbind(r.getResponse(),i),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),t.__forced=n,e=t,s=this._onUnbindSuccess,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnUnbindSuccess"),fm.global.equals(i.getOnSuccess(),null)?void 0:this.raiseAction(i.getOnSuccess(),e,"Client -> Unbind -> OnSuccess")},s.prototype.raiseUnsubscribeComplete=function(){var e,t,n,s,r,i;return i=arguments[0],r=arguments[1],n=arguments[2],t=new fm.websync.unsubscribeCompleteArgs,t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),t.__forced=n,e=t,s=this._onUnsubscribeComplete,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnUnsubscribeComplete"),fm.global.equals(i.getOnComplete(),null)?void 0:this.raiseAction(i.getOnComplete(),e,"Client -> Unsubscribe -> OnComplete")},s.prototype.raiseUnsubscribeFailure=function(){var e,t,n,s,r,i;return i=arguments[0],s=arguments[1],r=arguments[2],t=new fm.websync.unsubscribeFailureArgs,t.__channels=fm.websync.client.getChannelsForUnsubscribe(s.getResponse(),i),t.setException(s.getException()),t.setExtensions(fm.websync.client.getExtensions(s.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(s.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),e=t,n=this._onUnsubscribeFailure,fm.global.equals(n,null)||this.raiseAction(n,e,"Client -> OnUnsubscribeFailure"),fm.global.equals(i.getOnFailure(),null)||(r=this.raiseRetriable(i.getOnFailure(),r,e,"Client -> Unsubscribe -> OnFailure")),r},s.prototype.raiseUnsubscribeSuccess=function(){var e,t,n,s,r,i;return i=arguments[0],r=arguments[1],n=arguments[2],t=new fm.websync.unsubscribeSuccessArgs,t.__channels=fm.websync.client.getChannelsForUnsubscribe(r.getResponse(),i),t.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),t.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),t.setClient(this),t.setDynamicProperties(i.getDynamicProperties()),t.__forced=n,e=t,s=this._onUnsubscribeSuccess,fm.global.equals(s,null)||this.raiseAction(s,e,"Client -> OnUnsubscribeSuccess"),fm.global.equals(i.getOnSuccess(),null)?void 0:this.raiseAction(i.getOnSuccess(),e,"Client -> Unsubscribe -> OnSuccess")},s.prototype.receiveMessage=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y,d,_,b,v,R,C,w,S,O,q,x,E,P;if(w=arguments[0],q=arguments[1],fm.global.equals(w.getBayeuxChannel(),"/meta/notify"))return fm.global.equals(w.getTag(),"fm.server")?(x=fm.websync.message.fromJson(w.getDataJson()),q=this.processServerAction(x,q)):(S=this._onNotify,fm.global.equals(S,null)||(q=this.raiseNotifyDelivery(S,w,q))),q;for(b=[],v=[],e=fm.hashExtensions.getKeys(this._customOnReceives),p=0,f=e.length;f>p;p++)for(E=e[p],u=this._customOnReceives[E],t=fm.hashExtensions.getKeys(u),g=0,y=t.length;y>g;g++)P=t[g],fm.global.equals(P,w.getChannel())&&(fm.arrayExtensions.add(b,u[P]),fm.arrayExtensions.add(v,{}));for(n=fm.hashExtensions.getKeys(this._subscribedOnReceives),m=0,d=n.length;d>m;m++)for(E=n[m],l=this._subscribedOnReceives[E],s=fm.hashExtensions.getKeys(l),C=0,_=s.length;_>C;C++)P=s[C],fm.global.equals(P,w.getChannel())&&(fm.arrayExtensions.add(b,l[P]),c=null,r=new fm.holder(c),i=fm.hashExtensions.tryGetValue(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(P,E),r),c=r.getValue(),i||(c={}),fm.arrayExtensions.add(v,c));if(fm.global.equals(fm.arrayExtensions.getCount(b),0))return R=null,o=new fm.holder(R),a=fm.hashExtensions.tryGetValue(this._pendingReceives,w.getChannel(),o),R=o.getValue(),a||(R=[],this._pendingReceives[w.getChannel()]=R),fm.arrayExtensions.add(R,w),q;for(h=0;h<fm.arrayExtensions.getCount(b);)try{O=b[h],c=null,h<fm.arrayExtensions.getCount(v)&&(c=v[h]),q=this.raiseSubscribeDelivery(O,c,w,q)}finally{h++}return q},s.prototype.receiveSink=function(){var e;return e=arguments[0],fm.log.warn("Received message on channel with no receive handler.")},s.prototype.reconnect=function(){var e,t,n,s,r,i;return n=arguments[0],i=arguments[1],s=null,e=new fm.holder(s),t=this.raiseStreamFailure(n,i,!0,e),s=e.getValue(),r=t,fm.global.equals(s,null)&&(s=n),this.raiseForcedUnsubscribes(n,i),this.raiseForcedUnbinds(n,i),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsConnected(!1),this._queueActivated=!1,r?(n.setIsReconnect(!0),n.setLastClientId(this.getClientId()),n.setLastSessionId(this.getSessionId()),this.connect(n)):void 0},s.prototype.removeBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(fm.hashExtensions.remove(this._boundRecords,s.getKey()));return i},s.prototype.removeOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.remove(this._onBindComplete,e)},s.prototype.removeOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.remove(this._onBindFailure,e)},s.prototype.removeOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.remove(this._onBindSuccess,e)},s.prototype.removeOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.remove(this._onConnectComplete,e)},s.prototype.removeOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.remove(this._onConnectFailure,e)},s.prototype.removeOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.remove(this._onConnectSuccess,e)},s.prototype.removeOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.remove(this._onDisconnectComplete,e)},s.prototype.removeOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.remove(this._onNotify,e)},s.prototype.removeOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.remove(this._onNotifyComplete,e)},s.prototype.removeOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.remove(this._onNotifyFailure,e)},s.prototype.removeOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.remove(this._onNotifySuccess,e)},s.prototype.removeOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.remove(this._onPublishComplete,e)},s.prototype.removeOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.remove(this._onPublishFailure,e)},s.prototype.removeOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.remove(this._onPublishSuccess,e)},s.prototype.removeOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.remove(this._onServerBind,e)},s.prototype.removeOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.remove(this._onServerSubscribe,e)},s.prototype.removeOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.remove(this._onServerUnbind,e)},s.prototype.removeOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.remove(this._onServerUnsubscribe,e)},s.prototype.removeOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.remove(this._onServiceComplete,e)},s.prototype.removeOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.remove(this._onServiceFailure,e)},s.prototype.removeOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.remove(this._onServiceSuccess,e)},s.prototype.removeOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.remove(this._onStateRestored,e)},s.prototype.removeOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.remove(this._onStreamFailure,e)},s.prototype.removeOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.remove(this._onSubscribeComplete,e)},s.prototype.removeOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.remove(this._onSubscribeFailure,e)},s.prototype.removeOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.remove(this._onSubscribeSuccess,e)},s.prototype.removeOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.remove(this._onUnbindComplete,e)},s.prototype.removeOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.remove(this._onUnbindFailure,e)},s.prototype.removeOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.remove(this._onUnbindSuccess,e)},s.prototype.removeOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.remove(this._onUnsubscribeComplete,e)},s.prototype.removeOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.remove(this._onUnsubscribeFailure,e)},s.prototype.removeOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.remove(this._onUnsubscribeSuccess,e)},s.prototype.removeSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a);if(fm.global.equals(fm.hashExtensions.getCount(r),0))return fm.hashExtensions.remove(this._subscribedChannels,u)}},s.prototype.removeSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a),fm.hashExtensions.remove(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(a,u));if(fm.global.equals(fm.hashExtensions.getCount(r),0))return fm.hashExtensions.remove(this._subscribedOnReceives,u)}},s.prototype.restream=function(){var e,t,n,s;return e=arguments[0],t=arguments[1],n=arguments[2],n<this._lastInterval&&(n=this._lastInterval),fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.Low)&&n>0?(s=new fm.websync.deferredStreamState,s.setConnectArgs(e),s.setReceivedMessages(t),fm.deferrer.defer(this.streamDeferred,n,s)):this.stream(e,t)},s.prototype.retryConnect=function(){var e,t;return t=arguments[0],e=arguments[1],this._lastBackoffIndex++,this._lastBackoffTimeout=e,t.setIsRetry(!0),this.connect(t)},s.prototype.retryConnectDeferred=function(){var e,t;return e=arguments[0],t=e,this.retryConnect(t.getConnectArgs(),t.getBackoffTimeout())},s.prototype.send=function(){var e,t,n,s;return e=arguments[0],s=arguments[1],t=arguments[2],n=arguments[3],this.sendMany([e],s,t,n)},s.prototype.sendCallback=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y,d,_,b;if(d=arguments[0],a=d.getRequestArgs().getDynamicValue(fm.websync.client._stateKey),d.getRequestArgs().unsetDynamicValue(fm.websync.client._stateKey),fm.global.equals(d.getException(),null)){if(fm.global.equals(d.getMessages(),null)||fm.global.equals(d.getMessages().length,0))return this.raiseSendException(a,new Error("Invalid response received from server."));for(p=[],e=d.getMessages(),u=0,c=e.length;c>u;u++){if(g=e[u],i=g.getAdvice(),!fm.global.equals(i,null))switch(this.processAdvice(i),this._connectionType){case fm.websync.connectionType.WebSocket:fm.global.equals(i.getWebSocket(),null)||this.processAdvice(i.getWebSocket());break;case fm.websync.connectionType.LongPolling:fm.global.equals(i.getLongPolling(),null)||this.processAdvice(i.getLongPolling());break;case fm.websync.connectionType.CallbackPolling:fm.global.equals(i.getCallbackPolling(),null)||this.processAdvice(i.getCallbackPolling())}if(!a.getIsStream()||fm.global.equals(g.getBayeuxChannel(),"/meta/connect")){if(fm.stringExtensions.isNullOrEmpty(g.getId()))return void this.raiseSendException(a,new Error(g.getError()));if(y=null,t=new fm.holder(y),n=fm.hashExtensions.tryGetValue(a.getRequestMapping(),g.getId(),t),y=t.getValue(),!n)return void this.raiseSendException(a,new Error(g.getError()));f=new fm.websync.clientResponseArgs,f.setDynamicProperties(y.getDynamicProperties()),f.setResponse(g),f.setException(g.getSuccessful()?null:new Error(g.getError())),y.getCallback()(f)}else fm.arrayExtensions.add(p,g)}for(fm.arrayExtensions.getCount(p)>0&&(o=new fm.websync.clientResponseArgs,o.setDynamicProperties(a.getRequests()[0].getDynamicProperties()),o.setResponses(fm.arrayExtensions.toArray(p)),a.getRequests()[0].getCallback()(o)),s=d.getMessages(),_=[],l=0,h=s.length;h>l;l++)g=s[l],b=g.getServerActions(),fm.global.equals(b,null)?_.push(void 0):(r=b,_.push(function(){var e,t,n;for(n=[],e=0,t=r.length;t>e;e++)m=r[e],n.push(this.processServerAction(m,this._lastInterval));return n}.call(this)));return _}return this.raiseSendException(a,d.getException())},s.prototype.sendMany=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y;for(l=arguments[0],y=arguments[1],g=arguments[2],m=arguments[3],s=!1,fm.global.equals(l.length,1)&&(s=fm.global.equals(l[0].getMessage().getBayeuxChannel(),"/meta/connect")),n={},o=[],e=l,r=0,i=e.length;i>r;r++)a=e[r],fm.guid.equals(this.getClientId(),fm.guid.empty)||a.getMessage().isConnect()||(a.getMessage().setClientId(this.getClientId()),a.getMessage().setSessionId(this.getSessionId())),this.getDisableBinary()&&a.getMessage().setDisableBinary(this.getDisableBinary()),this._counter++,a.getMessage().setId(fm.intExtensions.toString(this._counter)),fm.arrayExtensions.add(o,a.getMessage()),n[a.getMessage().getId()]=a;return p=this.processRequestUrl(y),y=this.processRequestUrl(y),s?m=this.getStreamRequestTimeout():fm.global.equals(m,0)&&(m=this.getRequestTimeout()),f=s?this._streamRequestTransfer:this._requestTransfer,t=new fm.websync.messageRequestArgs(this.createHeaders()),t.setMessages(fm.arrayExtensions.toArray(o)),t.setOnRequestCreated(this.internalOnRequestCreated),t.setOnResponseReceived(this.internalOnResponseReceived),t.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),t.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),t.setSender(this),t.setTimeout(m),t.setUrl(y),u=t,u.setDynamicValue("frameUrl",p),h=new fm.websync.clientSendState,h.setRequests(l),h.setRequestMapping(n),h.setIsStream(s),u.setDynamicValue(fm.websync.client._stateKey,h),g?(c=f.send(u),this.sendCallback(c)):f.sendAsync(u,this.sendCallback)},s.prototype.service=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");return this.performService(e),this},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.setCustomOnReceive=function(){var e,t;return e=arguments[0],t=arguments[1],this.setCustomOnReceiveWithTag(e,fm.stringExtensions.empty,t)},s.prototype.setCustomOnReceiveWithTag=function(){var e,t,n,s,r,i;if(n=arguments[0],i=arguments[1],r=arguments[2],fm.global.equals(n,null))throw new Error("channel cannot be null.");if(fm.global.equals(r,null))throw new Error("onReceive cannot be null.");return fm.global.equals(i,null)&&(i=fm.stringExtensions.empty),s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this._customOnReceives,i,e),s=e.getValue(),t||(s={},this._customOnReceives[i]=s),s[n]=r,this.processPendingReceives([n],this._lastInterval)},s.prototype.setDisableWebSockets=function(){var e;return e=arguments[0],this._disableWebSockets=e},s.prototype.setInstanceId=function(){var e;return e=arguments[0],this._instanceId=e},s.prototype.setIsConnected=function(){var e;return e=arguments[0],this._isConnected=e},s.prototype.setIsConnecting=function(){var e;return e=arguments[0],this._isConnecting=e},s.prototype.setIsDisconnecting=function(){var e;return e=arguments[0],this._isDisconnecting=e},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this._serverTimeout=e},s.prototype.setSessionId=function(){var e;return e=arguments[0],this._sessionId=e},s.prototype.setStreamRequestUrl=function(){var e;if(e=arguments[0],fm.global.equals(e,null))throw new Error("Stream request URL cannot be null.");return this.__streamRequestUrl=fm.httpTransfer.replaceWildcards(e)},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s.prototype.setToken=function(){var e;return e=arguments[0],this._token=e},s.prototype.startBatch=function(){return this._batchCounter++,this},s.prototype.stream=function(){var e,t,n,s,r;return e=arguments[0],n=arguments[1],r=new fm.websync.clientRequest,t=new fm.websync.message("/meta/connect"),t.setConnectionType(this._connectionType),t.setAcknowledgement(n),r.setMessage(t),r.setCallback(this.streamCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,e),this.send(s,this.getStreamRequestUrl(),!1,0)},s.prototype.streamCallback=function(){var e,t,n,s,r,i,o,a;if(o=arguments[0],t=o.getDynamicValue(fm.websync.client._argsKey),this.getIsConnected()&&!this.getIsConnecting()&&!this.getIsDisconnecting()){if(fm.global.equals(o.getException(),null)){if(fm.global.equals(o.getResponses().length,1)&&fm.global.equals(o.getResponses()[0].getBayeuxChannel(),"/meta/connect"))return this.restream(t,!1,this._lastInterval);s=this._lastInterval,a=this.getThreadId(),this.preRaise(a);try{for(e=o.getResponses(),n=0,r=e.length;r>n;n++)i=e[n],s=this.receiveMessage(i,s)}finally{this.postRaise(a)}return this.restream(t,!0,s)}return fm.global.equals(o.getResponses(),null)?this.reconnect(t,o):null!==this._lastReconnect&&fm.global.equals(this._lastReconnect,fm.websync.reconnect.Retry)?this.restream(t,!1,this._lastInterval):this.reconnect(t,o)}},s.prototype.streamDeferred=function(){var e,t;return e=arguments[0],t=e,this.stream(t.getConnectArgs(),t.getReceivedMessages())},s.prototype.subscribe=function(){var e;if(e=arguments[0],fm.global.equals(e.getChannels(),null)||fm.global.equals(e.getChannels().length,0))throw new Error("channels cannot be null.");return fm.global.equals(e.getOnReceive(),null)&&e.setOnReceive(this.receiveSink),fm.global.equals(e.getTag(),null)&&e.setTag(fm.stringExtensions.empty),this.performSubscribe(e),this},s.prototype.tryWebSocket=function(){var e,t,n;try{return n=fm.websync.messageTransferFactory.getWebSocketMessageTransfer(this.processRequestUrl(this.getStreamRequestUrl())),n.setHandshakeTimeout(this.getRequestTimeout()),n.setStreamTimeout(this.getStreamRequestTimeout()),n.setOnRequestCreated(this.internalOnHttpRequestCreated),n.setOnResponseReceived(this.internalOnHttpResponseReceived),n.setOnOpenSuccess(this.webSocketOpenSuccess),n.setOnOpenFailure(this.webSocketOpenFailure),n.setOnStreamFailure(this.webSocketStreamFailure),n.setSender(this),this._connectionType=fm.websync.connectionType.WebSocket,this._streamRequestTransfer=n,n.open(this.createHeaders()),!0}catch(e){return t=e,!1}finally{}},s.prototype.unbind=function(){var e,t,n,s,r;if(r=arguments[0],fm.global.equals(r.getRecords(),null)||fm.global.equals(r.getRecords().length,0))throw new Error("records cannot be null.");
for(e=r.getRecords(),t=0,n=e.length;n>t;t++)if(s=e[t],fm.global.equals(s.getKey(),null))throw new Error("key cannot be null.");return this.performUnbind(r),this},s.prototype.unsetCustomOnReceive=function(){var e;return e=arguments[0],this.unsetCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.unsetCustomOnReceiveWithTag=function(){var e,t,n,s,r;if(n=arguments[0],r=arguments[1],fm.global.equals(n,null))throw new Error("channel cannot be null.");return fm.global.equals(r,null)&&(r=fm.stringExtensions.empty),s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this._customOnReceives,r,e),s=e.getValue(),t&&fm.hashExtensions.remove(s,n)?(fm.global.equals(fm.hashExtensions.getCount(s),0)&&fm.hashExtensions.remove(this._customOnReceives,r),!0):!1},s.prototype.unsubscribe=function(){var e;if(e=arguments[0],fm.global.equals(e.getChannels(),null)||fm.global.equals(e.getChannels().length,0))throw new Error("channels cannot be null.");return fm.global.equals(e.getTag(),null)&&e.setTag(fm.stringExtensions.empty),this.performUnsubscribe(e),this},s.prototype.webSocketOpenFailure=function(){var e;return e=arguments[0],this._webSocketOpened&&this.tryWebSocket()?void 0:this.doLongPolling()},s.prototype.webSocketOpenSuccess=function(){var e;return e=arguments[0],this._webSocketOpened=!0,this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.webSocketStreamFailure=function(){var e,t;return e=arguments[0],t=new fm.websync.clientResponseArgs,t.setDynamicProperties(this._responseArgs.getDynamicProperties()),t.setException(new Error(fm.stringExtensions.format("WebSocket stream error. {0}",e.getException().message))),this.streamCallback(t)},s._bayeuxVersion="1.0",s._bayeuxMinimumVersion="1.0",s._argsKey="fm.args",s._stateKey="fm.state",s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.websync.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSendState=function(n){function s(){this.setRequests=e(this.setRequests,this),this.setRequestMapping=e(this.setRequestMapping,this),this.setIsStream=e(this.setIsStream,this),this.getRequests=e(this.getRequests,this),this.getRequestMapping=e(this.getRequestMapping,this),this.getIsStream=e(this.getIsStream,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._isStream=!1,s.prototype._requestMapping=null,s.prototype._requests=null,s.prototype.getIsStream=function(){return this._isStream},s.prototype.getRequestMapping=function(){return this._requestMapping},s.prototype.getRequests=function(){return this._requests},s.prototype.setIsStream=function(){var e;return e=arguments[0],this._isStream=e},s.prototype.setRequestMapping=function(){var e;return e=arguments[0],this._requestMapping=e},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientRequest=function(n){function s(){this.setMessage=e(this.setMessage,this),this.setCallback=e(this.setCallback,this),this.getMessage=e(this.getMessage,this),this.getCallback=e(this.getCallback,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=s.__super__.constructor.call(this)}return t(s,n),s.prototype._callback=null,s.prototype._message=null,s.prototype.getCallback=function(){return this._callback},s.prototype.getMessage=function(){return this._message},s.prototype.setCallback=function(){var e;return e=arguments[0],this._callback=e},s.prototype.setMessage=function(){var e;return e=arguments[0],this._message=e},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.defaults=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n.__domainKey=null,n.__domainName=null,n.getDomainKey=function(){return fm.websync.defaults.__domainKey},n.getDomainName=function(){return fm.websync.defaults.__domainName},n.__domainKey=new fm.guid("11111111-1111-1111-1111-111111111111"),n.__domainName="localhost",n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),fm.util.attachProperties(this,arguments[0]),r):2===arguments.length?(n=arguments[0],t=arguments[1],r=s.__super__.constructor.call(this),this.setClientId(n),this.setBoundRecords(t),r):0===arguments.length?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),r):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublishingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublishingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s;return n=arguments[0],fm.global.equals(this.getBoundRecords(),null)?null:(s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this.getBoundRecords(),n,e),s=e.getValue(),t?s.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.publishingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.extensions=function(n){function s(){this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setExtensionJsons=e(this.setExtensionJsons,this),this.getValueJson=e(this.getValueJson,this),this.getNames=e(this.getNames,this),this.getExtensionJsons=e(this.getExtensionJsons,this),this.getCount=e(this.getCount,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this.setExtensionJsons({}),fm.util.attachProperties(this,arguments[0]),t):(t=s.__super__.constructor.call(this),this.setExtensionJsons({}),t)}return t(s,n),s.prototype._extensionJsons=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeExtensions(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeExtensions(e)},s.prototype.getCount=function(){return fm.hashExtensions.getCount(this.getExtensionJsons())},s.prototype.getExtensionJsons=function(){return this._extensionJsons},s.prototype.getNames=function(){var e;return e=[],fm.arrayExtensions.addRange(e,fm.hashExtensions.getKeys(this.getExtensionJsons())),e},s.prototype.getValueJson=function(){var e;return e=arguments[0],fm.hashExtensions.containsKey(this.getExtensionJsons(),e)?this.getExtensionJsons()[e]:null},s.prototype.setExtensionJsons=function(){var e;return e=arguments[0],this._extensionJsons=e},s.prototype.setValueJson=function(){var e,t,n;if(3===arguments.length){if(e=arguments[0],n=arguments[1],t=arguments[2],fm.global.equals(n,null))fm.hashExtensions.containsKey(this.getExtensionJsons(),e)&&fm.hashExtensions.remove(this.getExtensionJsons(),e);else{if(t&&!fm.serializer.isValidJson(n))throw new Error("The value is not valid JSON.");this.getExtensionJsons()[e]=n}return void this.setIsDirty(!0)}2===arguments.length&&(e=arguments[0],n=arguments[1],this.setValueJson(e,n,!0))},s.prototype.toJson=function(){return fm.websync.extensions.toJson(this)},s.prototype.getValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setValueJson.apply(this,arguments)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)))},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.message=function(n){function s(){this.toJsonNoData=e(this.toJsonNoData,this),this.toJson=e(this.toJson,this),this.toBinary=e(this.toBinary,this),this.setVersion=e(this.setVersion,this),this.setTag=e(this.setTag,this),this.setSupportedConnectionTypes=e(this.setSupportedConnectionTypes,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setServerActions=e(this.setServerActions,this),this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setPublishingClient=e(this.setPublishingClient,this),this.setNotifyingClient=e(this.setNotifyingClient,this),this.setNotifyClientId=e(this.setNotifyClientId,this),this.setMinimumVersion=e(this.setMinimumVersion,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.setId=e(this.setId,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConnectionType=e(this.setConnectionType,this),this.setClientId=e(this.setClientId,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setBayeuxChannel=e(this.setBayeuxChannel,this),this.setAdvice=e(this.setAdvice,this),this.setAcknowledgement=e(this.setAcknowledgement,this),this.isUnsubscribingFrom=e(this.isUnsubscribingFrom,this),this.isUnsubscribe=e(this.isUnsubscribe,this),this.isUnbindingFrom=e(this.isUnbindingFrom,this),this.isUnbind=e(this.isUnbind,this),this.isSubscribingTo=e(this.isSubscribingTo,this),this.isSubscribe=e(this.isSubscribe,this),this.isStream=e(this.isStream,this),this.isService=e(this.isService,this),this.isPublish=e(this.isPublish,this),this.isNotify=e(this.isNotify,this),this.isDisconnect=e(this.isDisconnect,this),this.isConnect=e(this.isConnect,this),this.isBindingTo=e(this.isBindingTo,this),this.isBind=e(this.isBind,this),this.getVersion=e(this.getVersion,this),this.getType=e(this.getType,this),this.getTag=e(this.getTag,this),this.getSupportedConnectionTypes=e(this.getSupportedConnectionTypes,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getServerActions=e(this.getServerActions,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getNotifyingClient=e(this.getNotifyingClient,this),this.getNotifyClientId=e(this.getNotifyClientId,this),this.getMinimumVersion=e(this.getMinimumVersion,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getId=e(this.getId,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConnectionType=e(this.getConnectionType,this),this.getClientId=e(this.getClientId,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getBayeuxChannel=e(this.getBayeuxChannel,this),this.getAdvice=e(this.getAdvice,this),this.getAcknowledgement=e(this.getAcknowledgement,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,fm.util.attachProperties(this,arguments[0]),n):0===arguments.length?(n=s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,n):1===arguments.length?(t=arguments[0],n=s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,this.setValidate(!1),this.setBayeuxChannel(t),this.setValidate(!0),n):void 0}return t(s,n),s.prototype.__advice=null,s.prototype.__bayeuxChannel=null,s.prototype.__channels=null,s.prototype.__clientId=null,s.prototype.__connectionType=null,s.prototype.__id=null,s.prototype.__minimumVersion=null,s.prototype.__records=null,s.prototype.__supportedConnectionTypes=null,s.prototype.__version=null,s.prototype._toJsonNoDataLock=null,s.bytesToInt=function(){var e,t;return e=arguments[0],t=arguments[1],e.length<t+4?-1:fm.bitAssistant.toIntegerNetwork(e,t)},s.fromBinary=function(){var e,t,n,s,r,i,o;return 1===arguments.length?(n=arguments[0],fm.websync.message.fromBinary(n,0)):2===arguments.length?(n=arguments[0],o=arguments[1],s=fm.websync.message.bytesToInt(n,o),0>s?null:(o+=4,i=fm.websync.message.bytesToInt(n,o),0>i?null:(o+=4,e=fm.bitAssistant.subArray(n,o,s),o+=s,t=fm.bitAssistant.subArray(n,o,i),o+=i,r=fm.websync.message.fromJson(fm.encoding.getUtf8().getString(e,0,e.length)),r.setDataBytes(t),r))):void 0},s.fromBinaryMultiple=function(){var e,t,n,s,r,i,o;if(e=arguments[0],n=0,i=fm.websync.message.bytesToInt(e,n),0>i)return new Array(0);for(n+=4,r=new Array(i),t=0;i>t;)try{if(o=fm.websync.message.bytesToInt(e,n),0>o)return new Array(0);if(n+=4,s=fm.websync.message.fromBinary(e,n),fm.global.equals(s,null))return new Array(0);n+=o,r[t]=s}finally{t++}return r},s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeMessage(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeMessageArray(e)},s.intToBytes=function(){var e;return e=arguments[0],fm.bitAssistant.getIntegerBytesNetwork(e)},s.toBinary=function(){var e,t,n,s,r,i,o,a,u,l;if(u=arguments[0],r=null,i=null,e=new fm.holder(r),t=new fm.holder(i),n=u.toJsonNoData(e,t),r=e.getValue(),i=t.getValue(),l=n,fm.global.equals(r,null)){if(fm.global.equals(i,null))throw new Error("Message data bytes cannot be null.");throw new Error(fm.stringExtensions.format("Message data bytes cannot be null (JSON: {0}).",i))}if(fm.global.equals(l,null))throw new Error("Message JSON cannot be null.");return s=fm.encoding.getUtf8().getBytes(l),o=new Uint8Array(8+s.length+r.length),a=0,fm.bitAssistant.copy(fm.websync.message.intToBytes(s.length),0,o,a,4),a+=4,fm.bitAssistant.copy(fm.websync.message.intToBytes(r.length),0,o,a,4),a+=4,fm.bitAssistant.copy(s,0,o,a,s.length),a+=s.length,fm.bitAssistant.copy(r,0,o,a,r.length),a+=r.length,o},s.toBinaryMultiple=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g;for(p=arguments[0],g=4,c=[],e=p,o=0,u=e.length;u>o;o++)h=e[o],i=fm.websync.message.toBinary(h),fm.arrayExtensions.add(c,i),g+=4+i.length;for(s=new Uint8Array(g),r=0,fm.bitAssistant.copy(fm.websync.message.intToBytes(fm.arrayExtensions.getCount(c)),0,s,r,4),r+=4,t=c,a=0,l=t.length;l>a;a++)n=t[a],fm.bitAssistant.copy(fm.websync.message.intToBytes(n.length),0,s,r,4),r+=4,fm.bitAssistant.copy(n,0,s,r,n.length),r+=n.length;return s},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeMessage(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeMessageArray(e)},s.prototype.getAcknowledgement=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.ack"))},s.prototype.getAdvice=function(){return this.__advice},s.prototype.getBayeuxChannel=function(){return this.__bayeuxChannel},s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getClientId=function(){return this.__clientId},s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDisableBinary=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.dbin"))},s.prototype.getId=function(){return this.__id},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getLastClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lcid"))},s.prototype.getLastSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lsid"))},s.prototype.getMinimumVersion=function(){return this.__minimumVersion},s.prototype.getNotifyClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"))},s.prototype.getNotifyingClient=function(){return fm.websync.serializer.deserializeNotifyingClient(this.getExtensionValueJson("fm.notifying"))},s.prototype.getPublishingClient=function(){return fm.websync.serializer.deserializePublishingClient(this.getExtensionValueJson("fm.publishing"))},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.getServerActions=function(){var e,t;return e=this.getExtensionValueJson("fm.server"),fm.stringExtensions.isNullOrEmpty(e)||(t=fm.websync.message.fromJsonMultiple(e),fm.global.equals(t,null))?null:t},s.prototype.getServerTimeout=function(){return fm.serializer.deserializeInteger(this.getExtensionValueJson("fm.timeout"))},s.prototype.getSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.sessionId"))},s.prototype.getSupportedConnectionTypes=function(){return this.__supportedConnectionTypes},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.getType=function(){return fm.websync.metaChannels.getMessageType(this.getBayeuxChannel())},s.prototype.getVersion=function(){return this.__version},s.prototype.isBind=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Bind)},s.prototype.isBindingTo=function(){var e,t,n,s,r;if(n=arguments[0],fm.global.equals(this.getType(),fm.websync.messageType.Bind)){if(fm.global.equals(this.getRecords(),null))return!1;for(e=this.getRecords(),t=0,s=e.length;s>t;t++)if(r=e[t],fm.global.equals(r.getKey(),n))return!0}return!1},s.prototype.isConnect=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Connect)},s.prototype.isDisconnect=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Disconnect)},s.prototype.isNotify=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Notify)},s.prototype.isPublish=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Publish)},s.prototype.isService=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Service)},s.prototype.isStream=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Stream)},s.prototype.isSubscribe=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Subscribe)},s.prototype.isSubscribingTo=function(){var e,t,n,s,r;if(t=arguments[0],fm.global.equals(this.getType(),fm.websync.messageType.Subscribe)){if(fm.global.equals(this.getChannels(),null))return!1;for(e=this.getChannels(),n=0,s=e.length;s>n;n++)if(r=e[n],fm.global.equals(r,t))return!0}return!1},s.prototype.isUnbind=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Unbind)},s.prototype.isUnbindingFrom=function(){var e,t,n,s,r;if(n=arguments[0],fm.global.equals(this.getType(),fm.websync.messageType.Unbind)){if(fm.global.equals(this.getRecords(),null))return!1;for(e=this.getRecords(),t=0,s=e.length;s>t;t++)if(r=e[t],fm.global.equals(r.getKey(),n))return!0}return!1},s.prototype.isUnsubscribe=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Unsubscribe)},s.prototype.isUnsubscribingFrom=function(){var e,t,n,s,r;if(t=arguments[0],fm.global.equals(this.getType(),fm.websync.messageType.Unsubscribe)){if(fm.global.equals(this.getChannels(),null))return!1;for(e=this.getChannels(),n=0,s=e.length;s>n;n++)if(r=e[n],fm.global.equals(r,t))return!0}return!1},s.prototype.setAcknowledgement=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.ack",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setAdvice=function(){var e;return e=arguments[0],this.__advice=e,this.setIsDirty(!0)},s.prototype.setBayeuxChannel=function(){var e;return e=arguments[0],this.__bayeuxChannel=e,fm.websync.metaChannels.isServiceChannel(e)?this.setChannel(fm.websync.metaChannels.convertChannelFromServiced(e)):fm.websync.metaChannels.isMetaChannel(e)||this.setChannel(e),this.setIsDirty(!0)},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setClientId=function(){var e;return e=arguments[0],this.__clientId=e,this.setIsDirty(!0)},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this.__connectionType=e,this.setIsDirty(!0)},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.dbin",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setId=function(){var e;return e=arguments[0],this.__id=e,this.setIsDirty(!0)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKey(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKeys(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lcid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lsid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setMinimumVersion=function(){var e;return e=arguments[0],this.__minimumVersion=e,this.setIsDirty(!0)},s.prototype.setNotifyClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setNotifyingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notifying",fm.websync.serializer.serializeNotifyingClient(e),!1),this.setIsDirty(!0)},s.prototype.setPublishingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.publishing",fm.websync.serializer.serializePublishingClient(e),!1),this.setIsDirty(!0)},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setServerActions=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.server",fm.websync.message.toJsonMultiple(e),!1),this.setIsDirty(!0)},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.timeout",fm.serializer.serializeInteger(e),!1),this.setIsDirty(!0)},s.prototype.setSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.sessionId",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setSupportedConnectionTypes=function(){var e;return e=arguments[0],this.__supportedConnectionTypes=e,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1),this.setIsDirty(!0)},s.prototype.setVersion=function(){var e;return e=arguments[0],this.__version=e,this.setIsDirty(!0)},s.prototype.toBinary=function(){return fm.websync.message.toBinary(this)},s.prototype.toJson=function(){return fm.websync.message.toJson(this)},s.prototype.toJsonNoData=function(){var e,t,n;return e=arguments[0],t=arguments[1],this.getIsBinary()?(e.setValue(this.getDataBytes()),t.setValue(null),this.setDataBytes(null),n=this.toJson(),this.setDataBytes(e.getValue()),n):(e.setValue(null),t.setValue(this.getDataJson()),this.setDataJson(null),n=this.toJson(),this.setDataJson(t.getValue()),n)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publication=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getChannel=e(this.getChannel,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),r):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this,t,n,null),r):3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],r=s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),this.setTag(i),r):0===arguments.length?r=s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],r=s.__super__.constructor.call(this),this.setChannel(t),r):void 0}return t(s,n),s.prototype.__channel=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublication(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublicationArray(e)},s.fromMessage=function(){var e,t;return e=arguments[0],fm.global.equals(e,null)?null:(t=new fm.websync.publication,t.setChannel(e.getBayeuxChannel()),t.setSuccessful(e.getSuccessful()),t.setError(e.getError()),t.setTimestamp(e.getTimestamp()),t.setDataJson(e.getDataJson()),t.setExtensions(e.getExtensions()),t)},s.fromMessages=function(){var e,t,n;if(t=arguments[0],fm.global.equals(t,null))return null;for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.websync.publication.fromMessage(t[e])}finally{e++}return n},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublication(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublicationArray(e)},s.toMessage=function(){var e,t;return t=arguments[0],fm.global.equals(t,null)?null:(e=new fm.websync.message,e.setBayeuxChannel(t.getChannel()),e.setSuccessful(t.getSuccessful()),e.setError(t.getError()),e.setTimestamp(t.getTimestamp()),e.setDataJson(t.getDataJson()),e.setExtensions(t.getExtensions()),e)},s.toMessages=function(){var e,t,n;if(n=arguments[0],fm.global.equals(n,null))return null;for(t=new Array(n.length),e=0;e<n.length;)try{t[e]=fm.websync.publication.toMessage(n[e])}finally{e++}return t},s.prototype.getChannel=function(){return this.__channel},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],fm.global.equals(s,null))return this.__channel=s,this.setIsDirty(!0);if(n=null,e=new fm.holder(n),t=fm.websync.extensible.validateChannel(s,e),n=e.getValue(),this.getValidate()&&!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.publication.toJson(this)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisher=function(n){function s(){this.send=e(this.send,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raiseEvent=e(this.raiseEvent,this),this.publishMany=e(this.publishMany,this),this.publish=e(this.publish,this),this.processRequestUrl=e(this.processRequestUrl,this),this.performPublish=e(this.performPublish,this),this.performNotify=e(this.performNotify,this),this.notifyMany=e(this.notifyMany,this),this.notify=e(this.notify,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=s.__super__.constructor.call(this),this.setRequestUrl(n),t)}return t(s,n),s._onNotifyRequest=null,s._onNotifyResponse=null,s._onPublishRequest=null,s._onPublishResponse=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyRequest=fm.delegate.combine(fm.websync.publisher._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyResponse=fm.delegate.combine(fm.websync.publisher._onNotifyResponse,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishRequest=fm.delegate.combine(fm.websync.publisher._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishResponse=fm.delegate.combine(fm.websync.publisher._onPublishResponse,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyRequest=fm.delegate.remove(fm.websync.publisher._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyResponse=fm.delegate.remove(fm.websync.publisher._onNotifyResponse,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishRequest=fm.delegate.remove(fm.websync.publisher._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishResponse=fm.delegate.remove(fm.websync.publisher._onPublishResponse,e)},s.prototype.notify=function(){var e,t,n,s,r;return 3===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],this.notify(new fm.websync.notification(e,t,r))):1===arguments.length?(n=arguments[0],
s=this.notifyMany([n]),fm.global.equals(s,null)||fm.global.equals(s.length,0)?null:s[0]):2===arguments.length?(e=arguments[0],t=arguments[1],this.notify(new fm.websync.notification(e,t))):void 0},s.prototype.notifyMany=function(){var e;if(e=arguments[0],fm.global.equals(e,null)||fm.global.equals(e.length,0))throw new Error("notifications cannot be null/empty.");return this.performNotify(e)},s.prototype.performNotify=function(){var e,t,n,s,r,i;if(r=arguments[0],t=new fm.websync.publisherNotifyRequestArgs,t.setRequests(r),this.raiseRequestEvent(fm.websync.publisher._onNotifyRequest,t)){if(s=fm.websync.notification.toMessages(r),i=this.send(s,this.getRequestUrl()),n=fm.websync.notification.fromMessages(i.getResponses()),e=new fm.websync.publisherNotifyResponseArgs,e.setRequests(r),e.setResponses(n),this.raiseResponseEvent(fm.websync.publisher._onNotifyResponse,e,i),!fm.global.equals(i.getException(),null))throw i.getException();return n}return null},s.prototype.performPublish=function(){var e,t,n,s,r,i;if(r=arguments[0],t=new fm.websync.publisherPublishRequestArgs,t.setRequests(r),this.raiseRequestEvent(fm.websync.publisher._onPublishRequest,t)){if(s=fm.websync.publication.toMessages(r),i=this.send(s,this.getRequestUrl()),n=fm.websync.publication.fromMessages(i.getResponses()),e=new fm.websync.publisherPublishResponseArgs,e.setRequests(r),e.setResponses(n),this.raiseResponseEvent(fm.websync.publisher._onPublishResponse,e,i),!fm.global.equals(i.getException(),null))throw i.getException();return n}return null},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.websync.publisher._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),!fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High))return r;fm.websync.publisher._requestUrlCache[s]=r}return r},s.prototype.publish=function(){var e,t,n,s,r;return 3===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],this.publish(new fm.websync.publication(e,t,r))):1===arguments.length?(n=arguments[0],s=this.publishMany([n]),fm.global.equals(s,null)||fm.global.equals(s.length,0)?null:s[0]):2===arguments.length?(e=arguments[0],t=arguments[1],this.publish(new fm.websync.publication(e,t))):void 0},s.prototype.publishMany=function(){var e;if(e=arguments[0],fm.global.equals(e,null)||fm.global.equals(e.length,0))throw new Error("publications cannot be null/empty.");return this.performPublish(e)},s.prototype.raiseEvent=function(){var e,t;return t=arguments[0],e=arguments[1],e.setPublisher(this),fm.global.equals(t,null)?void 0:t(this,e)},s.prototype.raiseRequestEvent=function(){var e,t;return t=arguments[0],e=arguments[1],this.raiseEvent(t,e),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],e.setException(n.getException()),this.raiseEvent(t,e)},s.prototype.send=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f;for(g=arguments[0],f=arguments[1],m=this.processRequestUrl(f),f=this.processRequestUrl(f),e=g,l=0,c=e.length;c>l;l++)h=e[l],this.getDisableBinary()&&h.setDisableBinary(this.getDisableBinary());i=new fm.websync.messageRequestArgs(this.createHeaders()),i.setMessages(g),i.setOnRequestCreated(this.internalOnRequestCreated),i.setOnResponseReceived(this.internalOnResponseReceived),i.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),i.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),i.setSender(this),i.setTimeout(this.getRequestTimeout()),i.setUrl(f),p=i,p.setDynamicValue("frameUrl",m),u=fm.websync.messageTransferFactory.getHttpMessageTransfer(),t=u.send(p);try{u.shutdown()}catch(o){a=o}finally{}return fm.global.equals(t.getException(),null)?fm.global.equals(t.getMessages(),null)||fm.global.equals(t.getMessages().length,0)?(s=new fm.websync.publisherResponseArgs,s.setException(new Error("Invalid response received from server.")),s):(r=new fm.websync.publisherResponseArgs,r.setResponses(t.getMessages()),r):(n=new fm.websync.publisherResponseArgs,n.setException(t.getException()),n)},s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.websync.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.record=function(n){function s(){this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toString=e(this.toString,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setValidate=e(this.setValidate,this),this.setPrivate=e(this.setPrivate,this),this.setKey=e(this.setKey,this),this.getValueJson=e(this.getValueJson,this),this.getValidate=e(this.getValidate,this),this.getPrivate=e(this.getPrivate,this),this.getKey=e(this.getKey,this),this.getHashCode=e(this.getHashCode,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this.setValidate(!0),fm.util.attachProperties(this,arguments[0]),t):1===arguments.length?(n=arguments[0],s.call(this,n,null),t):0===arguments.length?(t=s.__super__.constructor.call(this),this.setValidate(!0),t):3===arguments.length?(n=arguments[0],i=arguments[1],r=arguments[2],s.call(this),this.setKey(n),this.setValueJson(i),this.setPrivate(r),t):2===arguments.length?(n=arguments[0],i=arguments[1],s.call(this,n,i,!1),t):void 0}return t(s,n),s.prototype.__key=null,s.prototype.__priv=!1,s.prototype.__valueJson=null,s.prototype._validate=!1,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeRecord(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeRecordArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeRecord(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeRecordArray(e)},s.prototype.duplicate=function(){return new fm.websync.record(this.getKey(),this.getValueJson(),this.getPrivate())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.websync.record),fm.global.equals(t,this)},s.prototype.getHashCode=function(){var e;return e=17,fm.global.equals(this.getKey(),null)||(e=23*e+this.getKey().hashCode()),fm.global.equals(this.getValueJson(),null)||(e=23*e+this.getValueJson().hashCode()),23*e+this.getPrivate().hashCode()},s.prototype.getKey=function(){return this.__key},s.prototype.getPrivate=function(){return this.__priv},s.prototype.getValidate=function(){return this._validate},s.prototype.getValueJson=function(){return this.__valueJson},s.prototype.setKey=function(){var e;if(e=arguments[0],fm.global.equals(e,null))throw new Error("key cannot be null.");return this.__key=e,this.setIsDirty(!0)},s.prototype.setPrivate=function(){var e;return e=arguments[0],this.__priv=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.setValueJson=function(){var e;if(e=arguments[0],this.getValidate()&&!fm.global.equals(e,null)&&!fm.serializer.isValidJson(e))throw new Error("value is not valid JSON.");return this.__valueJson=e,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.record.toJson(this)},s.prototype.toString=function(){return this.toJson()},s.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serializer=function(e){function n(){var e;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e=n.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),e):e=n.__super__.constructor.call(this)}return t(n,e),n.createAdvice=function(){return new fm.websync.advice},n.createBaseAdvice=function(){return new fm.websync.baseAdvice},n.createBoundRecords=function(){return{}},n.createExtensions=function(){return new fm.websync.extensions},n.createMessage=function(){return new fm.websync.message},n.createNotification=function(){return new fm.websync.notification},n.createNotifyingClient=function(){return new fm.websync.notifyingClient},n.createPublication=function(){return new fm.websync.publication},n.createPublishingClient=function(){return new fm.websync.publishingClient},n.createRecord=function(){return new fm.websync.record("key")},n.createSubscribedClient=function(){return new fm.websync.subscribedClient},n.createSubscription=function(){return new fm.websync.subscription("/")},n.deserializeAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createAdvice,n.deserializeAdviceCallback)},n.deserializeAdviceCallback=function(){var e,t,n;switch(e=arguments[0],t=arguments[1],n=arguments[2],t){case"websocket":return void e.setWebSocket(fm.websync.serializer.deserializeBaseAdvice(n));case"long-polling":return void e.setLongPolling(fm.websync.serializer.deserializeBaseAdvice(n));case"callback-polling":return void e.setCallbackPolling(fm.websync.serializer.deserializeBaseAdvice(n))}return fm.websync.serializer.deserializeBaseAdviceCallback(e,t,n)},n.deserializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createBaseAdvice,n.deserializeBaseAdviceCallback)},n.deserializeBaseAdviceCallback=function(){var e,t,n,s;if(e=arguments[0],t=arguments[1],s=arguments[2],n=t,!fm.global.equals(n,null)){if(fm.global.equals(n,"hosts"))return e.setHosts(fm.serializer.deserializeStringArray(s));if(fm.global.equals(n,"interval"))return e.setInterval(fm.serializer.deserializeInteger(s));if(fm.global.equals(n,"reconnect"))return e.setReconnect(fm.websync.serializer.deserializeReconnect(s))}},n.deserializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createBoundRecords,n.deserializeBoundRecordsCallback)},n.deserializeBoundRecordsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e[t]=new fm.websync.record(t,fm.serializer.deserializeRaw(n))},n.deserializeConnectionType=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"long-polling":return fm.websync.connectionType.LongPolling;case"callback-polling":return fm.websync.connectionType.CallbackPolling;case"websocket":return fm.websync.connectionType.WebSocket;case"iframe":return fm.websync.connectionType.IFrame;case"flash":return fm.websync.connectionType.Flash}return fm.websync.connectionType.Unknown},n.deserializeConnectionTypeArray=function(){var e,t,n,s;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||fm.global.equals(e,"null")||e.length<2||!fm.global.equals(e.charAt(0),"[")||!fm.global.equals(e.charAt(e.length-1),"]"))return null;for(e=fm.stringExtensions.substring(e,1,e.length-2),n=fm.stringExtensions.split(e,[","]),s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.websync.serializer.deserializeConnectionType(n[t])}finally{t++}return s},n.deserializeExtensions=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createExtensions,n.deserializeExtensionsCallback)},n.deserializeExtensionsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e.setValueJson(t,fm.serializer.deserializeRaw(n),!1)},n.deserializeMessage=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createMessage,n.deserializeMessageCallback)},n.deserializeMessageArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createMessage,n.deserializeMessageCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeMessageCallback=function(){var e,t,n,s,r;switch(e=arguments[0],t=arguments[1],r=arguments[2],e.setValidate(!1),t){case"advice":e.setAdvice(fm.websync.serializer.deserializeAdvice(r));break;case"binding":e.setRecords(fm.websync.serializer.deserializeRecordArray(r));break;case"channel":e.setBayeuxChannel(fm.serializer.deserializeString(r));break;case"clientId":e.setClientId(fm.serializer.deserializeGuid(r));break;case"connectionType":e.setConnectionType(fm.websync.serializer.deserializeConnectionType(r));break;case"data":e.setDataJson(fm.serializer.deserializeRaw(r));break;case"error":e.setError(fm.serializer.deserializeString(r));break;case"ext":e.setExtensions(fm.websync.serializer.deserializeExtensions(r));break;case"id":e.setId(fm.serializer.deserializeString(r));break;case"minimumVersion":e.setMinimumVersion(fm.serializer.deserializeString(r));break;case"subscription":if(!fm.stringExtensions.startsWith(r,"[")){s=fm.serializer.deserializeString(r),fm.stringExtensions.isNullOrEmpty(s)||e.setChannels([s]);break}e.setChannels(fm.serializer.deserializeStringArray(r));break;case"successful":n=fm.serializer.deserializeBoolean(r),e.setSuccessful(fm.global.equals(n,!0));break;case"supportedConnectionTypes":e.setSupportedConnectionTypes(fm.websync.serializer.deserializeConnectionTypeArray(r));break;case"timestamp":e.setTimestamp(fm.websync.serializer.deserializeTimestamp(r));break;case"version":e.setVersion(fm.serializer.deserializeString(r))}return e.setValidate(!0)},n.deserializeNotification=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotification,n.deserializeNotificationCallback)},n.deserializeNotificationArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createNotification,n.deserializeNotificationCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeNotificationCallback=function(){var e,t,n,s,r;return t=arguments[0],e=arguments[1],r=arguments[2],t.setValidate(!1),s=e,fm.global.equals(s,null)||(fm.global.equals(s,"data")?t.setDataJson(fm.serializer.deserializeRaw(r)):fm.global.equals(s,"ext")?t.setExtensions(fm.websync.serializer.deserializeExtensions(r)):fm.global.equals(s,"successful")?(n=fm.serializer.deserializeBoolean(r),t.setSuccessful(fm.global.equals(n,!0))):fm.global.equals(s,"error")?t.setError(fm.serializer.deserializeString(r)):fm.global.equals(s,"timestamp")&&t.setTimestamp(fm.websync.serializer.deserializeTimestamp(r))),t.setValidate(!0)},n.deserializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotifyingClient,n.deserializeNotifyingClientCallback)},n.deserializeNotifyingClientCallback=function(){var e,t,n,s;if(t=arguments[0],e=arguments[1],s=arguments[2],n=e,!fm.global.equals(n,null)){if(fm.global.equals(n,"clientId"))return t.setClientId(fm.serializer.deserializeGuid(s));if(fm.global.equals(n,"boundRecords"))return t.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(s))}},n.deserializePublication=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublication,n.deserializePublicationCallback)},n.deserializePublicationArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createPublication,n.deserializePublicationCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializePublicationCallback=function(){var e,t,n,s,r;return n=arguments[0],e=arguments[1],r=arguments[2],n.setValidate(!1),s=e,fm.global.equals(s,null)||(fm.global.equals(s,"channel")?n.setChannel(fm.serializer.deserializeString(r)):fm.global.equals(s,"data")?n.setDataJson(fm.serializer.deserializeRaw(r)):fm.global.equals(s,"ext")?n.setExtensions(fm.websync.serializer.deserializeExtensions(r)):fm.global.equals(s,"successful")?(t=fm.serializer.deserializeBoolean(r),n.setSuccessful(fm.global.equals(t,!0))):fm.global.equals(s,"error")?n.setError(fm.serializer.deserializeString(r)):fm.global.equals(s,"timestamp")&&n.setTimestamp(fm.websync.serializer.deserializeTimestamp(r))),n.setValidate(!0)},n.deserializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublishingClient,n.deserializePublishingClientCallback)},n.deserializePublishingClientCallback=function(){var e,t,n,s;if(t=arguments[0],e=arguments[1],s=arguments[2],n=e,!fm.global.equals(n,null)){if(fm.global.equals(n,"clientId"))return t.setClientId(fm.serializer.deserializeGuid(s));if(fm.global.equals(n,"boundRecords"))return t.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(s))}},n.deserializeReconnect=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"retry":return fm.websync.reconnect.Retry;case"handshake":return fm.websync.reconnect.Handshake;case"none":return fm.websync.reconnect.None}throw new Error("Unknown reconnect advice.")},n.deserializeRecord=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createRecord,n.deserializeRecordCallback)},n.deserializeRecordArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createRecord,n.deserializeRecordCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeRecordCallback=function(){var e,t,n,s,r;return n=arguments[0],e=arguments[1],r=arguments[2],n.setValidate(!1),s=e,fm.global.equals(s,null)||(fm.global.equals(s,"key")?n.setKey(fm.serializer.deserializeString(r)):fm.global.equals(s,"private")?(t=fm.serializer.deserializeBoolean(r),n.setPrivate(fm.global.equals(t,!0))):fm.global.equals(s,"value")&&n.setValueJson(fm.serializer.deserializeRaw(r))),n.setValidate(!0)},n.deserializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscribedClient,n.deserializeSubscribedClientCallback)},n.deserializeSubscribedClientArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createSubscribedClient,n.deserializeSubscribedClientCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeSubscribedClientCallback=function(){var e,t,n,s;if(n=arguments[0],e=arguments[1],s=arguments[2],t=e,!fm.global.equals(t,null)){if(fm.global.equals(t,"clientId"))return n.setClientId(fm.serializer.deserializeGuid(s));if(fm.global.equals(t,"boundRecords"))return n.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(s))}},n.deserializeSubscription=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscription,n.deserializeSubscriptionCallback)},n.deserializeSubscriptionArray=function(){var e,t;return t=arguments[0],e=fm.serializer.deserializeObjectArrayFast(t,n.createSubscription,n.deserializeSubscriptionCallback),fm.global.equals(e,null)?null:fm.arrayExtensions.toArray(e)},n.deserializeSubscriptionCallback=function(){var e,t,n,s;if(n=arguments[0],e=arguments[1],s=arguments[2],t=e,!fm.global.equals(t,null)){if(fm.global.equals(t,"channel"))return n.setChannel(fm.serializer.deserializeString(s));if(fm.global.equals(t,"tag"))return n.setTag(fm.serializer.deserializeString(s))}},n.deserializeTimestamp=function(){var e,t,n,s,r,i,o,a,u,l,c,h,p,g,m,f,y,d,_,b,v,R,C,w,S,O,q,x,E,P;if(E=arguments[0],b=fm.serializer.deserializeString(E),P=fm.dateTime.getUtcNow(),!fm.stringExtensions.isNullOrEmpty(b)){if(x=fm.stringExtensions.split(b,["T"]),!fm.global.equals(x.length,2))return P;if(R=x[0],C=x[1],x=fm.stringExtensions.split(R,["-"]),!fm.global.equals(x.length,3))return P;if(_=x[0],w=x[1],S=x[2],x=fm.stringExtensions.split(C,[":"]),!fm.global.equals(x.length,3))return P;if(O=x[0],q=x[1],x=fm.stringExtensions.split(x[2],["."]),!fm.global.equals(x.length,2))return P;v=x[0],p=0,g=0,m=0,f=0,y=0,d=0,e=new fm.holder(p),t=fm.parseAssistant.tryParseIntegerValue(_,e),p=e.getValue(),r=new fm.holder(g),i=fm.parseAssistant.tryParseIntegerValue(w,r),g=r.getValue(),o=new fm.holder(m),a=fm.parseAssistant.tryParseIntegerValue(S,o),m=o.getValue(),u=new fm.holder(f),l=fm.parseAssistant.tryParseIntegerValue(O,u),f=u.getValue(),c=new fm.holder(y),h=fm.parseAssistant.tryParseIntegerValue(q,c),y=c.getValue(),n=new fm.holder(d),s=fm.parseAssistant.tryParseIntegerValue(v,n),d=n.getValue(),t&&i&&a&&l&&h&&s&&(P=new fm.dateTime(p,g,m,f,y,d))}return P},n.serializeAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeAdviceCallback)},n.serializeAdviceCallback=function(){var e,t;return e=arguments[0],t=arguments[1],fm.websync.serializer.serializeBaseAdviceCallback(e,t),fm.global.equals(e.getWebSocket(),null)||(t.websocket=fm.websync.serializer.serializeBaseAdvice(e.getWebSocket())),fm.global.equals(e.getLongPolling(),null)||(t["long-polling"]=fm.websync.serializer.serializeBaseAdvice(e.getLongPolling())),fm.global.equals(e.getCallbackPolling(),null)?void 0:t["callback-polling"]=fm.websync.serializer.serializeBaseAdvice(e.getCallbackPolling())},n.serializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeBaseAdviceCallback)},n.serializeBaseAdviceCallback=function(){var e,t;return e=arguments[0],t=arguments[1],fm.global.equals(e.getHosts(),null)||(t.hosts=fm.serializer.serializeStringArray(e.getHosts())),null!==e.getInterval()&&(t.interval=fm.serializer.serializeInteger(e.getInterval())),null!==e.getReconnect()?t.reconnect=fm.websync.serializer.serializeReconnect(e.getReconnect()):void 0},n.serializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeBoundRecordsCallback)},n.serializeBoundRecordsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=fm.hashExtensions.getKeys(t),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t[o].getValueJson()));return i},n.serializeConnectionType=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.websync.connectionType.WebSocket:t="websocket";break;case fm.websync.connectionType.LongPolling:t="long-polling";break;case fm.websync.connectionType.CallbackPolling:t="callback-polling";break;case fm.websync.connectionType.IFrame:t="iframe";break;case fm.websync.connectionType.Flash:t="flash"}return fm.serializer.serializeString(t)},n.serializeConnectionTypeArray=function(){var e,t,n;for(e=arguments[0],n=new Array(e.length),t=0;t<e.length;)try{n[t]=fm.websync.serializer.serializeConnectionType(e[t])}finally{t++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},n.serializeExtensions=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeExtensionsCallback)},n.serializeExtensionsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=t.getNames(),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t.getValueJson(o)));return i},n.serializeMessage=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeMessageCallback)},n.serializeMessageArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeMessageCallback)},n.serializeMessageCallback=function(){var e,t;return t=arguments[0],e=arguments[1],null!==t.getClientId()&&(e.clientId=fm.serializer.serializeGuid(t.getClientId())),null!==t.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(t.getTimestamp())),fm.global.equals(t.getAdvice(),null)||(e.advice=fm.websync.serializer.serializeAdvice(t.getAdvice())),fm.global.equals(t.getRecords(),null)||!fm.global.equals(t.getType(),fm.websync.messageType.Bind)&&!fm.global.equals(t.getType(),fm.websync.messageType.Unbind)||(e.binding=fm.websync.serializer.serializeRecordArray(t.getRecords())),fm.global.equals(t.getBayeuxChannel(),null)||(e.channel=fm.serializer.serializeString(t.getBayeuxChannel())),null!==t.getConnectionType()&&(e.connectionType=fm.websync.serializer.serializeConnectionType(t.getConnectionType())),fm.global.equals(t.getDataJson(),null)||(e.data=fm.serializer.serializeRaw(t.getDataJson())),fm.global.equals(t.getError(),null)||(e.error=fm.serializer.serializeString(t.getError())),t.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(t.getExtensions())),fm.global.equals(t.getId(),null)||(e.id=fm.serializer.serializeString(t.getId())),fm.global.equals(t.getMinimumVersion(),null)||(e.minimumVersion=fm.serializer.serializeString(t.getMinimumVersion())),fm.global.equals(t.getChannels(),null)||!fm.global.equals(t.getType(),fm.websync.messageType.Subscribe)&&!fm.global.equals(t.getType(),fm.websync.messageType.Unsubscribe)||(e.subscription=fm.serializer.serializeStringArray(t.getChannels())),t.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(t.getSuccessful())),fm.global.equals(t.getSupportedConnectionTypes(),null)||(e.supportedConnectionTypes=fm.websync.serializer.serializeConnectionTypeArray(t.getSupportedConnectionTypes())),fm.global.equals(t.getVersion(),null)?void 0:e.version=fm.serializer.serializeString(t.getVersion())},n.serializeNotification=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotificationCallback)},n.serializeNotificationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeNotificationCallback)},n.serializeNotificationCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t.getError(),null)||(e.error=fm.serializer.serializeString(t.getError())),t.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(t.getSuccessful())),null!==t.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(t.getTimestamp())),t.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(t.getExtensions())),fm.global.equals(t.getDataJson(),null)?void 0:e.data=fm.serializer.serializeRaw(t.getDataJson())},n.serializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotifyingClientCallback)},n.serializeNotifyingClientCallback=function(){var e,t;return t=arguments[0],e=arguments[1],null!==t.getClientId()&&(e.clientId=fm.serializer.serializeGuid(t.getClientId())),fm.global.equals(t.getBoundRecords(),null)?void 0:e.boundRecords=fm.websync.serializer.serializeBoundRecords(t.getBoundRecords())},n.serializePublication=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublicationCallback)},n.serializePublicationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializePublicationCallback)},n.serializePublicationCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t.getChannel(),null)||(e.channel=fm.serializer.serializeString(t.getChannel())),fm.global.equals(t.getError(),null)||(e.error=fm.serializer.serializeString(t.getError())),t.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(t.getSuccessful())),null!==t.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(t.getTimestamp())),t.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(t.getExtensions())),fm.global.equals(t.getDataJson(),null)?void 0:e.data=fm.serializer.serializeRaw(t.getDataJson())},n.serializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublishingClientCallback)},n.serializePublishingClientCallback=function(){var e,t;return t=arguments[0],e=arguments[1],null!==t.getClientId()&&(e.clientId=fm.serializer.serializeGuid(t.getClientId())),fm.global.equals(t.getBoundRecords(),null)?void 0:e.boundRecords=fm.websync.serializer.serializeBoundRecords(t.getBoundRecords())},n.serializeReconnect=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.websync.reconnect.Retry:t="retry";break;case fm.websync.reconnect.Handshake:t="handshake";break;case fm.websync.reconnect.None:t="none"}return fm.serializer.serializeString(t)},n.serializeRecord=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeRecordCallback)},n.serializeRecordArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeRecordCallback)},n.serializeRecordCallback=function(){var e,t;return t=arguments[0],e=arguments[1],fm.global.equals(t.getKey(),null)||(e.key=fm.serializer.serializeString(t.getKey())),t.getPrivate()&&(e["private"]=fm.serializer.serializeBoolean(t.getPrivate())),fm.global.equals(t.getValueJson(),null)?void 0:e.value=fm.serializer.serializeRaw(t.getValueJson())},n.serializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientCallback=function(){var e,t;return t=arguments[0],e=arguments[1],e.clientId=fm.serializer.serializeGuid(t.getClientId()),fm.global.equals(t.getBoundRecords(),null)?void 0:e.boundRecords=fm.websync.serializer.serializeBoundRecords(t.getBoundRecords())},n.serializeSubscription=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionCallback=function(){var e,t;return t=arguments[0],e=arguments[1],e.channel=fm.serializer.serializeString(t.getChannel()),fm.global.equals(t.getTag(),null)?void 0:e.tag=fm.serializer.serializeString(t.getTag())},n.serializeTimestamp=function(){var e,t,n,s,r,i,o,a;if(a=arguments[0],e=null,null!==a){for(t=fm.intExtensions.toString(a.getYear()),n=fm.intExtensions.toString(a.getMonth()),s=fm.intExtensions.toString(a.getDay()),r=fm.intExtensions.toString(a.getHour()),i=fm.intExtensions.toString(a.getMinute()),o=fm.intExtensions.toString(a.getSecond());t.length<4;)t=fm.stringExtensions.concat("0",t);for(;n.length<2;)n=fm.stringExtensions.concat("0",n);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);for(;o.length<2;)o=fm.stringExtensions.concat("0",o);e=fm.stringExtensions.format("{0}-{1}-{2}T{3}:{4}:{5}.00",[t,n,s,r,i,o])}return fm.serializer.serializeString(e)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.webSocketMessageTransfer=function(n){function s(){this.shutdown=e(this.shutdown,this),this.setUrl=e(this.setUrl,this),this.setStreamTimeout=e(this.setStreamTimeout,this),this.setSender=e(this.setSender,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnOpenSuccess=e(this.setOnOpenSuccess,this),this.setOnOpenFailure=e(this.setOnOpenFailure,this),this.setHandshakeTimeout=e(this.setHandshakeTimeout,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.open=e(this.open,this),this.getUrl=e(this.getUrl,this),this.getStreamTimeout=e(this.getStreamTimeout,this),this.getSender=e(this.getSender,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),
this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnOpenSuccess=e(this.getOnOpenSuccess,this),this.getOnOpenFailure=e(this.getOnOpenFailure,this),this.getHandshakeTimeout=e(this.getHandshakeTimeout,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=s.__super__.constructor.call(this),this._callbackKey="fm.websync.webSocketMessageTransfer.callback",fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?(t=s.__super__.constructor.call(this),this._callbackKey="fm.websync.webSocketMessageTransfer.callback",t):1===arguments.length?(n=arguments[0],s.call(this),this.setUrl(n),this._webSocketTransfer=fm.webSocketTransferFactory.getWebSocketTransfer(this.getUrl()),t):void 0}return t(s,n),s.prototype._callbackKey=null,s.prototype._url=null,s.prototype._webSocketTransfer=null,s.prototype.getHandshakeTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getOnOpenFailure=function(){return this._webSocketTransfer.getOnOpenFailure()},s.prototype.getOnOpenSuccess=function(){return this._webSocketTransfer.getOnOpenSuccess()},s.prototype.getOnRequestCreated=function(){return this._webSocketTransfer.getOnRequestCreated()},s.prototype.getOnResponseReceived=function(){return this._webSocketTransfer.getOnResponseReceived()},s.prototype.getOnStreamFailure=function(){return this._webSocketTransfer.getOnStreamFailure()},s.prototype.getSender=function(){return this._webSocketTransfer.getSender()},s.prototype.getStreamTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getUrl=function(){return this._url},s.prototype.open=function(){var e;return e=arguments[0],this._webSocketTransfer.open(e)},s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._webSocketTransfer.send(e),this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._webSocketTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.setHandshakeTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setOnOpenFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenFailure(e)},s.prototype.setOnOpenSuccess=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenSuccess(e)},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnRequestCreated(e)},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnResponseReceived(e)},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnStreamFailure(e)},s.prototype.setSender=function(){var e;return e=arguments[0],this._webSocketTransfer.setSender(e)},s.prototype.setStreamTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s.prototype.shutdown=function(){var e,t;try{return this._webSocketTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.websync.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscription=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getHashCode=e(this.getHashCode,this),this.getChannel=e(this.getChannel,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=s.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),n):2===arguments.length?(t=arguments[0],r=arguments[1],n=s.__super__.constructor.call(this),this.setChannel(t),this.setTag(r),n):1===arguments.length?(t=arguments[0],n=s.__super__.constructor.call(this),this.setChannel(t),n):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__tag=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscription(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscriptionArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscription(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscriptionArray(e)},s.prototype.duplicate=function(){return new fm.websync.subscription(this.getChannel(),this.getTag())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.websync.subscription),fm.global.equals(t,this)},s.prototype.getChannel=function(){return this.__channel},s.prototype.getHashCode=function(){var e;return e=17,e=23*e+this.getChannel().hashCode(),fm.global.equals(this.getTag(),null)||(e=23*e+this.getTag().hashCode()),e},s.prototype.getTag=function(){var e;return null!=(e=this.__tag)?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e;if(e=arguments[0],fm.global.equals(e,null))throw new Error("channel cannot be null.");return this.__channel=e,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.__tag=null!=e?e:fm.stringExtensions.empty,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.subscription.toJson(this)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;return fm.websync.subscribedClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),fm.util.attachProperties(this,arguments[0]),r):2===arguments.length?(n=arguments[0],t=arguments[1],r=s.__super__.constructor.call(this),this.setClientId(n),this.setBoundRecords(t),r):0===arguments.length?(r=s.__super__.constructor.call(this),this.setBoundRecords({}),r):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscribedClient(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscribedClientArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscribedClient(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscribedClientArray(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s;return n=arguments[0],fm.global.equals(this.getBoundRecords(),null)?null:(s=null,e=new fm.holder(s),t=fm.hashExtensions.tryGetValue(this.getBoundRecords(),n,e),s=e.getValue(),t?s.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.subscribedClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable),function(){var e,t,n,s,r,i,o,a,u,l,c,h;return n=fm.websync.client,n.addOnConnectRequest(function(e,t){var s;s=t.getMethodArgs(),s.getIsReconnect()||s.getLastClientId()||s.getLastSessionId()||(n=c(),n&&(s.setLastClientId(n.clientId),s.setLastSessionId(n.sessionId),n.token&&e.setToken(n.token),i(n.clientId)))}),n.addOnConnectEnd(function(e,t){var n;t.getException()||(n=t.getMethodArgs(),n.getLastClientId()&&s(n.getLastClientId()),o({clientId:e.getClientId(),sessionId:e.getSessionId(),token:e.getToken()}))}),n.addOnDisconnectEnd(function(e,t){t.getException()||s(e.getClientId())}),fm.util.observe(window,"beforeunload",function(){var e,t,n,s;for(t=l(),n=0,s=t.length;s>n;n++)e=t[n],u(e)}),e=[],l=function(){return e},o=function(t){e.push(t)},s=function(t){var n,s,r,i;for(s=r=0,i=e.length;i>r;s=++r)if(n=e[s],n.clientId.equals(t))return void e.splice(s,1)},t="fm-websync-",c=function(){var e,n,s,r;r=h(),e=null;for(n in r)s=r[n],fm.stringExtensions.startsWith(n,t)&&(s=fm.json.deserialize(s),e={clientId:new fm.guid(s.clientId),sessionId:new fm.guid(s.sessionId),token:s.token});return e},u=function(e){var n;n={clientId:e.clientId.toString(),sessionId:e.sessionId.toString(),token:e.token},a(t+e.clientId.toString(),fm.json.serialize(n),60)},i=function(e){r(t+e.toString())},h=function(){var e,t,n,s,r,i;for(n={},t=document.cookie.split(";"),r=0,i=t.length;i>r;r++){for(e=t[r];" "===e.charAt(0);)e=e.substring(1,e.length);s=e.indexOf("="),s>=0&&(n[e.substring(0,s)]=decodeURIComponent(e.substring(s+1,e.length)))}return n},a=function(e,t,n){var s,r;r="",n&&(s=new Date,s.setTime(s.getTime()+1e3*n),r="; expires="+s.toGMTString()),document.cookie=e+"="+encodeURIComponent(t)+r+"; path=/"},r=function(e){a(e,"",-1)}}(),function(){var e,t,n,s,r,i,o,a,u,l,c;for(t=fm.websync.client,c=["connect","disconnect","subscribe","unsubscribe","bind","unbind","publish","notify","service"],n=function(e){var n;return n=t.prototype[e],t.prototype[e]=function(){var t,s,r,i,o,a;if(1===arguments.length&&fm.util.isPlainObject(arguments[0])){if(i=arguments[0],i.record&&fm.util.isPlainObject(i.record)&&(i.record=new fm.websync.record(i.record)),i.records)for(a=i.records,t=s=0,r=a.length;r>s;t=++s)o=a[t],fm.util.isPlainObject(i.records[t])&&(i.records[t]=new fm.websync.record(i.records[t]));return n.call(this,new fm.websync[e+"Args"](i))}return n.apply(this,arguments)}},s=0,r=c.length;r>s;s++)i=c[s],n(i);a=t.prototype.constructor,u=t.prototype,o=t,e=!1,fm.websync.client.enableMultiple=!1,fm.websync.client=function(){var n;if(e&&!t.enableMultiple)throw Error("To create multiple instances of the JavaScript client, set fm.websync.client.enableMultiple to true.");return e=!0,a.apply(this,arguments),n=this,fm.util.observe(window,"beforeunload",function(){var e,t;e=n._autoDisconnect,e&&(t=n._autoDisconnectConfig,t?n.disconnect(t):n.disconnect())}),n},fm.websync.client.prototype=u;for(l in o)fm.websync.client[l]=o[l];return t=fm.websync.client,t.prototype.setDisableCORS=function(e){return this._disableCORS=e},t.prototype.getDisableCORS=function(){return this._disableCORS||!1},t.prototype.setDisablePostMessage=function(e){return this._disablePostMessage=e},t.prototype.getDisablePostMessage=function(){return this._disablePostMessage||!1},t.prototype.setDisableJSONP=function(e){return this._disableJSONP=e},t.prototype.getDisableJSONP=function(){return this._disableJSONP||!1},t.prototype.setForceJSONP=function(e){return this._forceJSONP=e},t.prototype.getForceJSONP=function(){return this._forceJSONP||!1},t.prototype.setAutoDisconnect=function(e){return this._autoDisconnect=!0,this._autoDisconnectConfig=e}}(),fm.websync});