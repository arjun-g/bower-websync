
/*
 * Title: FM Core for JavaScript
 * Version: 2.9.1
 * Copyright Frozen Mountain Software 2011+
 */

!function(t,e,n){if("function"==typeof define&&define.amd)define(t,e,n);else if("object"==typeof exports){for(var r=0;r<e.length;r++)require("./"+e[r]);module.exports=n()}else this[t]=n()}("fm",[],function(){"undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),window.fm||(window.fm={});var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,s,i,o,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSONFM&&(u=u.toJSONFM(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)o[n]=str(n,u)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],s=str(r,u),s&&o.push(quote(r)+(gap?": ":":")+s));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(s=str(r,u),s&&o.push(quote(r)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSONFM&&(Date.prototype.toJSONFM=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSONFM=Number.prototype.toJSONFM=Boolean.prototype.toJSONFM=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,s=t[e];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r=walk(s,n),void 0!==r?s[n]=r:delete s[n]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),fm.getVersion=function(){return"2.9.1"},fm.object=function(){function t(){}return t}();var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};fm.util=function(){function t(){}return t._xdCache={},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isPlainObject=function(t){var e,n,r,s;if(!t||"[object Object]"!==Object.prototype.toString.call(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!Object.prototype.hasOwnProperty.call(t,"constructor")&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return e=n,!1}for(r in t)s=0;return void 0===r||Object.prototype.hasOwnProperty.call(t,r)},t.canAttachProperties=function(t,e){var n,r,s,i;for(n in e)if(i=e[n],s="set"+n.charAt(0).toUpperCase()+n.substring(1),r=t[s],!r||"[object Function]"!==Object.prototype.toString.call(r))return!1;return!0},t.attachProperties=function(t,e){var n,r,s,i,o;r=[];for(n in e)o=e[n],i="set"+n.charAt(0).toUpperCase()+n.substring(1),s=t[i],s&&"[object Function]"===Object.prototype.toString.call(s)?r.push(s.call(t,o)):(s=t.setExtensionValue,s&&"[object Function]"===Object.prototype.toString.call(s)?"[object Function]"===Object.prototype.toString.call(o)?r.push(fm.log.warn('Property "'+n+'" did not match any known setter and has a function as its value. Please verify your callback names are correct.')):(s.call(t,n,o),r.push(fm.log.debug('Property "'+n+'" did not match any known setter and is assumed to be an extension value.'))):r.push(fm.log.debug('Property "'+n+'" did not match any known setter and was ignored.')));return r},t.isIE=function(){return!!document.protocol},t.isIE6=function(){return t.isIE()&&!window.XMLHttpRequest},t.isIE7=function(){return t.isIE()&&window.XMLHttpRequest&&!document.implementation},t.isIE8=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isIE9=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isAndroid=function(){return navigator.userAgent.match(/Android/i)},t.isBlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i)},t.isiOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},t.isOpera=function(){return navigator.userAgent.match(/Opera Mini/i)},t.isWindows=function(){return navigator.userAgent.match(/IEMobile/i)},t.isMobile=function(){return t.isAndroid()||t.isBlackBerry()||t.isiOS()||t.isOpera()||t.isWindows()},t.hasActiveX=function(){var t;return t=void 0!==window.ActiveXObject,t&&"undefined"!=typeof window.external.msActiveXFilteringEnabled&&window.external.msActiveXFilteringEnabled()&&(t=!1,fm.log.debug("ActiveX is filtered and cannot be used.")),t},t.hasJava=function(){return t.getJavaVersion()},t.getJavaVersion=function(){var e,n,r,s,i,o,a;if(t.isIE()&&t.hasActiveX())return t.isJavaWebStartInstalledActiveX("1.9.0")?"1.9.0":t.isJavaWebStartInstalledActiveX("1.8.0")?"1.8.0":t.isJavaWebStartInstalledActiveX("1.7.0")?"1.7.0":t.isJavaWebStartInstalledActiveX("1.6.0")?"1.6.0":t.isJavaWebStartInstalledActiveX("1.5.0")?"1.5.0":t.isJavaWebStartInstalledActiveX("1.4.2")?"1.4.2":!1;if(a=0,s=window.navigator.mimeTypes)for(e=0,n=s.length;n>e;e++)r=s[e],o=r.type,o.indexOf("java")>0&&o.indexOf("jpi")>0&&o.indexOf("applet")>0&&(i=o.split("="),a=i[i.length-1]);return a},t.isJavaWebStartInstalledActiveX=function(e){var n,r;try{return t.hasActiveX()&&null!==new ActiveXObject("JavaWebStart.isInstalled."+e+".0")}catch(r){return n=r,!1}},t.isXD=function(e,n){var r,s,i,o,a,u;try{return n?(o=t.getHost(e),a=t.getHost(n),t.compareHost(o,a)):(t._xdCache[e]||(i=t.getHost(e),u=t.getHost(),t._xdCache[e]=t.compareHost(i,u)?"y":"n"),"y"===t._xdCache[e])}catch(s){return r=s,!1}},t.getHost=function(e){var n;return e?(n=t.parseUrl(e),n.protocol?n:t.getCurrentHost()):t.getCurrentHost()},t.compareHost=function(t,e){return t.server!==e.server||(t.port||e.port)&&t.port!==e.port},t.getCurrentHost=function(){var t;return t=document.location,{protocol:t.protocol,server:t.hostname,port:t.port}},t.parseUrl=function(t){var e;if(e=/(((http|ws)s?:)\/\/)?([\-\w\.\*]+)+(:(\d+))?(\/([^\?]*(\?\S+)?)?)?/i.exec(t),e.length<6)throw new Error("Invalid URL ("+t+").");return{prefix:e[1],protocol:e[2],server:e[4],postfix:e[5],port:e[6],path:e[7]}},t.absolutizeUrl=function(e){var n,r,s;return e?(s=t.parseUrl(e),s.protocol?-1===s.server.indexOf("*")?e:(e=s.prefix+t.wildcard(s.server),s.postfix&&(e+=s.postfix),s.path&&(e+=s.path),e):(r=document.location,n=r.protocol+"//"+r.host,"/"===e.charAt(0)?n+e:n+r.pathname.substring(0,r.pathname.lastIndexOf("/")+1)+e)):e},t.wildcard=function(e){return e.replace("*",t.getWildcard())},t._chars="abcdefghijklmnopqrstuvwxyz",t.getWildcard=function(){return t._wildcard||(t._wildcard=t.randomChar(t._chars)),t._wildcard},t.randomChar=function(t){return t?t.charAt(Math.floor(Math.random()*t.length)):t},t.observe=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},t.unobserve=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},t.observeAttr=function(t,e){var n,r,s,i;return n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r=function(){var t,e;if(e=document.createElement("p"),t=!1,e.addEventListener)e.addEventListener("DOMAttrModified",function(){return t=!0},!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",function(){return t=!0})}return e.setAttribute("id","target"),t},n?(i={subtree:!1,attributes:!0},s=new n(function(t){var n,r,s,i;for(i=[],n=0,r=t.length;r>n;n++)s=t[n],i.push(e.call(s.target,s.attributeName));return i}),s.observe(t,i)):r()?t.on("DOMAttrModified",function(n){return e.call(t,n.attrName)}):indexOf.call(document.body,"onpropertychange")>=0?t.on("propertychange",function(n){return e.call(t,window.event.propertyName)}):void 0},t.extend=function(t,e){var n;for(n in e)t[n]=e[n];return t},t.logging=!0,t.log=function(e){var n;if(t.logging)return document.body?(t._logContainer||(t._logContainer=document.createElement("div"),t._logContainer.className="fm-log",t._logContainer.style.position="absolute",t._logContainer.style.zIndex=99999,t._logContainer.style.right="5px",t._logContainer.style.top="5px",document.body.appendChild(t._logContainer)),n=document.createElement("div"),n.innerHTML=e,t._logContainer.appendChild(n)):void t.addOnLoad(function(){return t.log(e)})},t._loadFunctions=[],t.addOnLoad=function(e){return t._readyRun?window.setTimeout(e,1):t._loadFunctions.push(e)},t.ready=function(){return t._readyRun?void 0:(t._readyRun=!0,window.setTimeout(function(){var e,n,r,s,i;for(s=t._loadFunctions,i=[],e=0,n=s.length;n>e;e++)r=s[e],i.push(r());return i},1))},t.bindReady=function(){var e;if(!t._readyBound){if(t._readyBound=!0,"complete"===document.readyState)return window.setTimeout(function(){return t.ready()},1);if(document.addEventListener)return document.addEventListener("DOMContentLoaded",function(){return document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t.ready()},!1),window.addEventListener("load",function(){return window.removeEventListener("load",arguments.callee,!1),t.ready()},!1);if(!document.attachEvent)return t.ready();document.attachEvent("onreadystatechange",function(){return"complete"===document.readyState?(document.detachEvent("onreadystatechange",arguments.callee),t.ready()):void 0});try{e=null===window.frameElement}catch(n){}return document.documentElement.doScroll&&e?function(){var e,n;if(!t._loaded){try{document.documentElement.doScroll("left")}catch(n){return e=n,void window.setTimeout(arguments.callee,0)}return t.ready()}}():void 0}},t._loaded||t.addOnLoad(function(){return t._loaded=!0}),t.bindReady(),t}(),fm.mathAssistant=function(){function t(){}return t.getPi=function(){return Math.PI},t.getE=function(){return Math.E},t.abs=function(t){return Math.abs(t)},t.acos=function(t){return Math.acos(t)},t.asin=function(t){return Math.asin(t)},t.atan=function(t){return Math.atan(t)},t.atan2=function(t,e){return Math.atan2(t,e)},t.ceil=function(t){return Math.ceil(t)},t.cos=function(t){return Math.cos(t)},t.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2},t.exp=function(t){return Math.exp(t)},t.floor=function(t){return Math.floor(t)},t.log=function(t){return Math.log(t)},t.log10=function(t){return Math.log(t)/2.302585092994046},t.max=function(t,e){return Math.max(t,e)},t.min=function(t,e){return Math.min(t,e)},t.pow=function(t,e){return Math.pow(t,e)},t.sin=function(t){return Math.sin(t)},t.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},t.sqrt=function(t){return Math.sqrt(t)},t.tan=function(t){return Math.tan(t)},t.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},t}(),fm.global=function(){function t(){}return t.tryCast=function(t,e){return!t||t instanceof e?t:null},t.tryCastArray=function(t){return!t||t instanceof Array?t:null},t.tryCastObject=function(t){return!t||t instanceof Object?t:null},t.tryCastString=function(t){return t&&"string"!=typeof t?null:t},t.tryCastInt=function(t){return t&&isNaN(parseInt(t))?null:t},t.tryCastFloat=function(t){return t&&isNaN(parseFloat(t))?null:t},t.equals=function(t,e){return null===t||"undefined"==typeof t?null===e||"undefined"==typeof e:null===e||"undefined"==typeof e?null===t||"undefined"==typeof t:t===e},t}(),fm.stringComparison={CurrentCulture:0,CurrentCultureIgnoreCase:1,InvariantCulture:2,InvariantCultureIgnoreCase:3,Ordinal:4,OrdinalIgnoreCase:5};var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.dateTime=function(){function t(){this.getSecond=bind(this.getSecond,this),this.getMinute=bind(this.getMinute,this),this.getHour=bind(this.getHour,this),this.getDay=bind(this.getDay,this),this.getMonth=bind(this.getMonth,this),this.getYear=bind(this.getYear,this),this.toUniversalTime=bind(this.toUniversalTime,this),this.getTicks=bind(this.getTicks,this);var t,e,n,r,s,i;if(1===arguments.length)this._date=arguments[0];else{if(6!==arguments.length)throw new Error("Unknown argument set.");i=arguments[0],r=arguments[1],t=arguments[2],e=arguments[3],n=arguments[4],s=arguments[5],this._date=new Date(Date.UTC(i,r-1,t,e,n,s))}}return t.getNow=function(){return new fm.dateTime(new Date)},t.getUtcNow=function(){return new fm.dateTime(new Date)},t.prototype.getTicks=function(){return 621355968e9+1e4*this._date.getTime()},t.prototype.toUniversalTime=function(){return new fm.dateTime(this._date)},t.prototype.getYear=function(){return this._date.getUTCFullYear()},t.prototype.getMonth=function(){return this._date.getUTCMonth()+1},t.prototype.getDay=function(){return this._date.getUTCDate()},t.prototype.getHour=function(){return this._date.getUTCHours()},t.prototype.getMinute=function(){return this._date.getUTCMinutes()},t.prototype.getSecond=function(){return this._date.getUTCSeconds()},t}(),fm.byteCollection=function(){function t(t){t?this._buffer=new Uint8Array(t):this._buffer=new Uint8Array}return t.prototype._buffer=null,t.prototype.count=function(){return this._buffer.length},t.prototype.add=function(t){var e,n;return e=this._buffer,n=new Uint8Array(e.length+1),n.set(e),n[e.length]=t,this._buffer=n},t.prototype.addRange=function(t){var e,n,r,s;return r=fm.global.tryCast(t,fm.byteCollection),r&&(t=r._buffer),e=this._buffer,n=t,s=new Uint8Array(e.length+n.length),s.set(e),s.set(n,e.length),this._buffer=s},t.prototype.removeRange=function(t,e){var n,r,s;return n=this._buffer.subarray(0,t),r=this._buffer.subarray(t+e),s=new Uint8Array(n.length+r.length),s.set(n),s.set(r,n.length),this._buffer=s},t.prototype.insertRange=function(t,e){var n,r,s,i,o;return i=fm.global.tryCast(e,fm.byteCollection),i&&(e=i._buffer),n=this._buffer.subarray(0,t),r=e,s=this._buffer.subarray(t),o=new Uint8Array(n.length+r.length+s.length),o.set(n),o.set(r,n.length),o.set(s,n.length+r.length),this._buffer=o},t.prototype.getRange=function(t,e){var n;return n=new Uint8Array(e),n.set(this._buffer.subarray(t,t+e)),n},t.prototype.get=function(t){return this._buffer[t]},t.prototype.toArray=function(){return new Uint8Array(this._buffer)},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.nameValueCollection=function(){function t(){this.getAllKeys=bind(this.getAllKeys,this),this.getKeys=bind(this.getKeys,this);var t,e,n;if(this._value={},1===arguments.length){e=arguments[0];for(t in e)n=e[t],this._value[t]=n}}return t.prototype.source=function(){return this._value},t.prototype.get=function(t){var e;for(e in this._value)if(e.toLowerCase()===t.toLowerCase())return this._value[e];return null},t.prototype.set=function(t,e){var n;for(n in this._value)if(n.toLowerCase()===t.toLowerCase())return void(this._value[n]=e);return this._value[t]=e},t.prototype.getCount=function(){var t,e;t=0;for(e in this._value)t++;return t},t.prototype.toHash=function(){return this._value},t.prototype.getKeys=function(){return this.getAllKeys()},t.prototype.getAllKeys=function(){var t,e;e=[];for(t in this._value)e.push(t);return e},t}(),fm.stringBuilder=function(){function t(){this._value="",1===arguments.length&&(this._value=arguments[0])}return t.prototype.append=function(t,e,n){return null!=e&&null!=n?this._value=this._value+t.substring(e,e+n):this._value=this._value+t,this},t.prototype.toString=function(){return this._value},t.prototype.getLength=function(){return this._value.length},t.prototype.remove=function(t,e){return this._value=this._value.substring(0,t)+this._value.substring(t+e),this},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.regex=function(){function t(t){this.isMatch=bind(this.isMatch,this),this.pattern=t}return t.prototype.pattern="",t.isMatch=function(t,e){return new RegExp(e).test(t)},t.prototype.isMatch=function(t){return new RegExp(this.pattern).test(t)},t}(),fm.bitAssistant=function(){function t(){}return t.getIntegerBytesNetwork=function(t){var e,n;return e=new Uint8Array(4),n=t%16777216,e[0]=(t-n)/16777216,t=n,n=t%65536,e[1]=(t-n)/65536,t=n,n=t%256,e[2]=(t-n)/256,e[3]=n,e},t.toIntegerNetwork=function(t,e){var n,r,s,i;return n=t[e],r=t[e+1],s=t[e+2],i=t[e+3],16777216*n+65536*r+256*s+1*i},t.copy=function(t,e,n,r,s){return n.set(t.subarray(e,e+s),r)},t.subArray=function(e,n,r){var s;return 2===arguments.length?t.subArray(e,n,e.length-n):(s=new Uint8Array(r),t.copy(e,n,s,0,r),s)},t}(),fm.uri=function(){function t(){}return t.escapeDataString=function(t){return encodeURIComponent(t)},t}(),fm.guid=function(){function t(){0===arguments.length?this._guid="00000000-0000-0000-0000-000000000000":this._guid=arguments[0]}return t.prototype.equals=function(t){return t?t.toString()===this._guid:!1},t.prototype.toString=function(){return this._guid},t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},t.empty=new t,t.equals=function(t,e){return null===t||"undefined"==typeof t?null===e||"undefined"==typeof e:null===e||"undefined"==typeof e?null===t||"undefined"==typeof t:t.equals(e)},t}(),fm.holder=function(){function t(t){this._value=t}return t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){return this._value=t},t}(),fm.delegate=function(){function t(){}return t.combine=function(t,e){var n,r,s,i,o,a,u,l,c,p;if(!t)return e;if(!e)return t;if(p=this,n=[],s=function(){var t,e,r,s;for(s=[],e=0,r=n.length;r>e;e++)t=n[e],s.push(t.apply(p,arguments));return s},t._chain)for(l=t._chain,i=0,a=l.length;a>i;i++)r=l[i],n.push(r);else n.push(t);if(e._chain)for(c=e._chain,o=0,u=c.length;u>o;o++)r=c[o],n.push(r);else n.push(e);return s._chain=n,s},t.remove=function(t,e){var n,r,s,i,o;if(!t||t===e)return null;if(t._chain)for(o=t._chain,r=s=0,i=o.length;i>s;r=++s)if(n=o[r],n===e){t._chain.splice(r,1);break}return t},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.stack=function(){function t(){this.peek=bind(this.peek,this),this.pop=bind(this.pop,this),this.push=bind(this.push,this),this._list=[]}return t.prototype.push=function(t){return this._list.push(t)},t.prototype.pop=function(){return this._list.pop()},t.prototype.peek=function(){return 0===this._list.length?null:this._list[this._list.length-1]},t}(),fm.managedThread=function(){function t(){}return t.currentThreadId=function(){return"0"},t}(),fm.deferrer=function(){function t(){}return t.defer=function(t,e,n){return window.setTimeout(function(e){return function(){return t(n)}}(this),e)},t}(),fm.dateTimeStyles={AssumeUniversal:1,AdjustToUniversal:2},fm.dateTimeFormatInfo=function(){function t(){}return t.getInvariantInfo=function(){return new fm.dateTimeFormatInfo},t}(),fm.convert=function(){function t(){}return t.toInt32=function(t){return t.charCodeAt()},t}(),fm.parseAssistant=function(){function t(){}return t.parseIntegerValue=function(t){return parseInt(t)},t.parseLongValue=function(t){return parseInt(t)},t.parseFloatValue=function(t){return parseFloat(t)},t.parseDoubleValue=function(t){return parseFloat(t)},t.parseDecimalValue=function(t){return parseFloat(t)},t.parseBooleanValue=function(t){return"true"===t.toLowerCase()||"y"===t.toLowerCase()||"1"===t?!0:!1},t.parseGuidValue=function(t){return new fm.guid(t)},t.tryParseIntegerValue=function(t,e){return isNaN(parseInt(t))?!1:(e.setValue(parseInt(t)),!0)},t.tryParseLongValue=function(t,e){return isNaN(parseInt(t))?!1:(e.setValue(parseInt(t)),!0)},t.tryParseFloatValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseDoubleValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseDecimalValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseBooleanValue=function(t,e){return"true"===t.toLowerCase()||"y"===t.toLowerCase()||"1"===t?e.setValue(!0):e.setValue(!1),!0},t.tryParseGuidValue=function(t,e){return/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i.test(t)?(e.setValue(new fm.guid(t)),!0):!1},t}(),fm.stringExtensions=function(){function t(){}return t.empty="",t.toString=function(){return arguments[0]},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.concat=function(){var t,e,n,r,s,i,o;if(i="",1===arguments.length&&fm.util.isArray(arguments[0]))for(s=arguments[0],t=0,n=s.length;n>t;t++)o=s[t],i+=o;else for(e=0,r=arguments.length;r>e;e++)o=arguments[e],i+=o;return i},t.join=function(t,e){var n,r,s,i,o;for(i=new fm.stringBuilder,n=r=0,s=e.length;s>r;n=++r)o=e[n],n>0&&i.append(t),i.append(o);return i.toString()},t.split=function(t,e){var n,r,s,i,o,a,u,l;for(u=[],l=0,r=s=0,a=t.length-1;a>=0?a>=s:s>=a;r=a>=0?++s:--s)for(i=0,o=e.length;o>i;i++)n=e[i],n===t.charAt(r)&&(u.push(t.substring(l,r)),l=r+1);return u.push(t.substring(l,t.length)),u},t.isNullOrEmpty=function(t){var e;if(e="undefined"==typeof t||null===t||""===t,!(e||"string"==typeof t||t instanceof String))throw new Error("Object is not a string.");return e},t.indexOf=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?e.toLowerCase().indexOf(t.toLowerCase()):e.indexOf(t)},t.lastIndexOf=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?e.toLowerCase().lastIndexOf(t.toLowerCase()):e.lastIndexOf(t)},t.startsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?0===e.toLowerCase().indexOf(t.toLowerCase()):0===e.indexOf(t)},t.endsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?-1!==e.toLowerCase().indexOf(t.toLowerCase(),e.length-t.length):-1!==e.indexOf(t,e.length-t.length)},t.compareTo=function(){var t,e;return t=arguments[0],e=arguments[1],t.toString()<e.toString()?-1:t.toString()>e.toString()?1:0},t.format=function(){var t,e,n,r,s,i;if(e=arguments[0],t=[],arguments.length>1)if(fm.util.isArray(arguments[1]))t=arguments[1];else for(r=s=1,i=arguments.length-1;i>=1?i>=s:s>=i;r=i>=1?++s:--s)t.push(arguments[r]?arguments[r]:"");return n=function(e,n){return null!=t[n]?t[n]:e},e.replace(/{(\d+)}/g,n)},t.toLower=function(){return arguments[0].toLowerCase()},t.toUpper=function(){return arguments[0].toUpperCase()},t.getLength=function(){return arguments[0].length},t.getChars=function(t){var e,n,r,s;for(e=[],n=r=0,s=t.length-1;s>=0?s>=r:r>=s;n=s>=0?++r:--r)e.push(t[n]);return e},t.substring=function(t,e,n){return t.substring(e,e+n)},t}(),fm.arrayExtensions=function(){function t(){}return t.getCount=function(t){return t.length},t.add=function(t,e){return t.push(e)},t.remove=function(t,e){var n,r,s,i;for(n=r=0,s=t.length;s>r;n=++r)if(i=t[n],i===e)return t.splice(n,1),!0;return!1},t.toArray=function(t){return t},t.clear=function(t){return t.splice(0,t.length)},t.addRange=function(t,e){var n,r,s,i;for(s=[],n=0,r=e.length;r>n;n++)i=e[n],s.push(t.push(i));return s},t.contains=function(t,e){var n,r,s;for(n=0,r=t.length;r>n;n++)if(s=t[n],s===e)return!0;return!1},t}(),fm.hashExtensions=function(){function t(){}return t.getCount=function(t){var e,n;e=0;for(n in t)e++;return e},t.getKeys=function(t){var e,n;n=[];for(e in t)n.push(e);return n},t.getValues=function(t){var e,n,r;r=[];for(e in t)n=t[e],r.push(n);return r},t.tryGetValue=function(e,n,r){return t.containsKey(e,n)?(r.setValue(e[n]),!0):!1},t.containsKey=function(t,e){return e in t?!0:!1},t.containsValue=function(t,e){var n,r;for(n in t)if(r=t[n],r===e)return!0;return!1},t.add=function(t,e,n){return t[e]=n},t.remove=function(t,e){return delete t[e]},t.clear=function(t){var e,n;n=[];for(e in t)n.push(delete t[e]);return n},t}(),fm.intExtensions=function(){function t(){}return t.toString=function(){return arguments[0].toString()},t}(),fm.xhr=function(){function t(){}return t._count=0,t._current={},t._disableBinary=!1,t.setDisableBinary=function(e){return t._disableBinary=e},t.getDisableBinary=function(){return"undefined"==typeof Uint8Array?!0:t._disableBinary},fm.util.observe(window,"unload",function(){var e,n,r;n=t._current;for(e in n){r=n[e];try{r._abortingOnUnload=!0,r.abort()}catch(s){}}}),t.failureHandler=function(t,e){return t.onFailure?t.onFailure({message:e}):void 0},t.successHandler=function(e,n){var r,s,i,o,a,u,l,c,p,f,h,g,m,d;if(e.onSuccess){if(u={},a=n.getAllResponseHeaders())for(m=a.split(/\r?\n/),l=0,c=m.length;c>l;l++)p=m[l],h=p.split(":"),2===h.length&&(f=h[0].replace(/\s+$/,""),d=h[1].replace(/^\s+/,""),u[f]=d);if(r=null,s=null,g=!1,!t.getDisableBinary())try{"arraybuffer"===n.responseType&&n.response&&(s=new Uint8Array(n.response),"application/octet-stream"!==u["Content-Type"]&&(r=fm.encoding.getUtf8().getString(s)),g=!0)}catch(o){i=o,t.setDisableBinary(!0)}return g||(r=n.responseText),e.onSuccess({content:r,contentBinary:s,statusCode:n.status,headers:u})}},t.handler=function(e,n){return n._aborting?t.failureHandler(e,"XHR request timed out."):(e.onResponseReceived&&e.onResponseReceived(n),t.successHandler(e,n))},t.send=function(e){var n,r,s,i,o,a,u,l,c,p,f,h,g,m,d;e=fm.util.extend({sync:!1,url:"",method:"POST",content:null,contentBinary:null,headers:{},timeout:15e3,abortOnUnload:!1,cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},e||{});try{if(window.XMLHttpRequest)m=new XMLHttpRequest;else{try{m=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(y){}if(!m)try{m=new ActiveXObject("Microsoft.XMLHTTP")}catch(y){}}if(!m)return!1;h=e.url,"GET"===e.method&&(h=h+(-1===h.indexOf("?")?"?":"&")+e.cacheBusterParameterName+"="+(new Date).getTime()),m.open(e.method,h,!e.sync),p=e.headers;for(c in p)g=p[c],"referer"!==c.toLowerCase()&&"origin"!==c.toLowerCase()&&m.setRequestHeader(c,g);if(t.getDisableBinary()&&m.setRequestHeader("X-FM-DisableBinary","true"),"withCredentials"in m&&(m.withCredentials=!0),!t.getDisableBinary()&&!e.sync)try{m.responseType="arraybuffer"}catch(o){r=o,t.setDisableBinary(!0)}if(e.onRequestCreated&&e.onRequestCreated(m),e.abortOnUnload&&(n=++t._count,t._current[n]=m),e.sync||(m.onreadystatechange=function(){var r,s;if(m.readyState>3&&!m._abortingOnUnload){clearTimeout(d);try{m.onreadystatechange=null}catch(r){s=r,m.onreadystatechange=function(){}}if(m.status>0?t.handler(e,m):t.failureHandler(e,"Invalid XHR response."),e.abortOnUnload)return delete t._current[n]}}),f=!1,!t.getDisableBinary()&&e.contentBinary)try{m.send(e.contentBinary.buffer),f=!0}catch(a){s=a;try{m.send(e.contentBinary),f=!0}catch(u){i=u,t.setDisableBinary(!0)}}return f||(e.content?(m.setRequestHeader("Content-Type","application/json"),m.send(e.content)):m.send()),d=window.setTimeout(function(){try{return m._aborting=!0,m.abort()}catch(t){}},e.timeout),e.sync&&(t.handler(e,m),e.abortOnUnload&&delete t._xhrCurrent[n]),!0}catch(l){return r=l,t.failureHandler(e,"XHR request failed. "+(r.message||r.error||r.description||r))}},t}(),fm.postMessage=function(){function t(){}return t._cache={},t.createFrame=function(e,n){var r,s,i,o,a;return a=t._cache[e.frameUrl],a?a.frame.loading?a.callbacks.push(n):window.setTimeout(function(){return a.frame.loaded?n(a.frame):n(null,"Frame not loaded.")},1):(i=document.createElement("iframe"),i.style.display="none",document.body.appendChild(i),s=[n],i.loading=!0,t._cache[e.frameUrl]=a={frame:i,callbacks:s},o=window.setTimeout(function(){var t;for(i.loading=!1,i.loaded=!1,i.timedOut=!0,t=[];s.length>0;)t.push(s.shift()(null,"Frame load timed out."));return t},e.timeout),r=null,fm.util.observe(i,"load",function(){var n,r;if(!i.timedOut)return clearTimeout(o),r=function(o){if(o.source===i.contentWindow&&"pong"===o.data){if(i.timedOut)return;for(clearTimeout(n),i.loading=!1,i.loaded=!0,i.timedOut=!1,t.listen(e,i);s.length>0;)s.shift()(i);return fm.util.unobserve(window,"message",r)}},n=window.setTimeout(function(){for(i.loading=!1,i.loaded=!1,i.timedOut=!0;s.length>0;)s.shift()(null,"Frame pong timed out.");return r?fm.util.unobserve(window,"message",r):void 0},500),fm.util.observe(window,"message",r),i.contentWindow.postMessage("ping",t.getOrigin(e.url))}),i.src=fm.httpTransfer.addQueryToUrl(e.frameUrl,"type","pmf"))},t._optionsCounter=0,t._optionsCache={},t.getOrigin=function(t){return/\w+:\/\/[^\/]+/.exec(t)[0]},t.send=function(e){return e=fm.util.extend({url:"",onFailure:function(){},onSuccess:function(){},onRequestCreated:function(){},onResponseReceived:function(){}},e||{}),e.contentBinary=null,t.createFrame(e,function(n,r){var s;return n?(e.id=++t._optionsCounter,t._optionsCache[e.id]=e,n.contentWindow.postMessage(fm.json.serialize(e),t.getOrigin(e.url))):e.onFailure?(s="Could not initialize postMessage frame.",r&&(s+=" "+r),e.onFailure({message:s,local:!0})):void 0})},t.listen=function(e,n){return fm.util.observe(window,"message",function(r){var s,i;if(r.source===n.contentWindow){try{r=fm.json.deserialize(r.data)}catch(i){return void(s=i)}if(!r.id)return;if(e=t._optionsCache[r.id],!e)return;if((1===r.type||2===r.type)&&delete t._optionsCache[r.id],1===r.type){if(e.onFailure)return e.onFailure(r)}else if(2===r.type){if(e.onSuccess)return e.onSuccess(r)}else if(3===r.type){if(e.onRequestCreated)return e.onRequestCreated(null)}else if(4===r.type&&e.onResponseReceived)return e.onResponseReceived(null)}})},t}(),fm.jsonp=function(){function t(){}return t.send=function(t){},t._scriptFrame=null,t._scriptFrameLoaded=!1,t._callbackCount=0,t._cb={},t._pastScriptFrames=[],t._scriptFrameDestroyer=null,t.maxUrlLength=2048,t.getNextCallback=function(e){var n,r;return n="cb"+t._callbackCount++,r="fm.jsonp._cb.",t._cb[n]=function(s){var i,o,a;try{if(e.onResponseReceived&&e.onResponseReceived(null),e.onSuccess)return e.robustResponse?(i=s[e.contentParameterName],i?"string"!=typeof i&&(i=fm.json.serialize(i)):i="",e.onSuccess({content:i,statusCode:s[e.statusCodeParameterName]||200,headers:s[e.headersParameterName]||{}})):(i=s,i?"string"!=typeof i&&(i=fm.json.serialize(i)):i="",
e.onSuccess({content:i,statusCode:200,headers:{}}))}catch(a){throw o=a}finally{t.cleanup((e.useFrame?"parent.":"")+r+n,e.useFrame)}},(e.useFrame?"parent.":"")+r+n},t.failureHandler=function(e,n,r){return e.onFailure&&e.onFailure({message:r}),t.cleanup(n,e.useFrame)},t.send=function(e){var n,r,s,i,o,a,u,l;try{if(e=fm.util.extend({url:"",method:"POST",content:null,headers:{},timeout:15e3,canSegmentJsonArray:!1,robustResponse:!1,callbackParameterName:"jsonp",contentParameterName:"content",methodParameterName:"method",headersParameterName:"headers",statusCodeParameterName:"statusCode",cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},e||{}),e.useFrame=!0,n=t.getNextCallback(e),e.useFrame&&(t._scriptFrameDestroyer||(t._scriptFrameDestroyer=window.setInterval(function(){var e,n,r,s;if(null!==t._scriptFrame&&(t._pastScriptFrames.push(t._scriptFrame),t._scriptFrame=null,t._scriptFrameLoaded=!1,2===t._pastScriptFrames.length)){for(s=t._pastScriptFrames[0],e=0,n=s.length;n>e;e++)r=s[e],delete t._pastScriptFrames[0][r];return document.body.removeChild(t._pastScriptFrames[0]),t._pastScriptFrames.splice(0,1)}},3e5))),r=document.getElementsByTagName("head")[0],e.useFrame){if(t._scriptFrame||(t._scriptFrame=document.createElement("iframe"),t._scriptFrame.style.display="none",t._scriptFrame.src="PLEASE_IGNORE_THIS_404.htm",document.body.appendChild(t._scriptFrame)),s=t._scriptFrame.contentWindow.document,!s)throw"Could not create script frame.";u=s.createElement("script")}else u=document.createElement("script");if(u.type="text/javascript",u.charset="utf-8",u.id=n,l=e.url,l=fm.httpTransfer.addQueryToUrl(l,e.methodParameterName,e.method),l=fm.httpTransfer.addQueryToUrl(l,e.headersParameterName,fm.json.serialize(e.headers)),l=fm.httpTransfer.addQueryToUrl(l,e.callbackParameterName,n),l=fm.httpTransfer.addQueryToUrl(l,e.cacheBusterParameterName,(new Date).getTime()),l=fm.httpTransfer.addQueryToUrl(l,e.contentParameterName,e.content),l.length>t.maxUrlLength&&alert("URL length "+l.length+" exceeds maximum for JSON-P ("+t.maxUrlLength+")."),u.src=l,e.onRequestCreated&&e.onRequestCreated(null),window.setTimeout(function(){return t.callbackExists(n)?t.failureHandler(e,n,"JSONP request timed out."):void 0},e.timeout),!e.useFrame)return r.appendChild(u);if(!t._scriptFrameLoaded)return fm.util.observe(t._scriptFrame,"load",function(){return window.setTimeout(function(){var s,i;try{return r=t._scriptFrame.contentWindow.document.body,r.appendChild(u)}catch(i){return s=i,t.failureHandler(e,n,"JSONP request failed. Could not access script frame.")}},10),t._scriptFrameLoaded=!0});try{return r=t._scriptFrame.contentWindow.document.body,r.appendChild(u)}catch(o){return i=o,t.failureHandler(e,n,"JSONP request failed. Could not access script frame.")}}catch(a){return i=a,t.failureHandler(e,n,"JSONP request failed. "+(i.message||i.error||i.description||i))}},t.cleanup=function(e,n){var r,s,i,o,a,u,l,c,p,f;l=e.split("."),u=l[l.length-1],t._cb[u]=null,delete t._cb[u];try{if(n){for(f=t._pastScriptFrames.concat([]),null!==t._scriptFrame&&f.push(t._scriptFrame),o=a=c=f.length-1;(0>=c?0>=a:a>=0)&&(r=f[o].contentWindow.document,r&&(p=r.getElementById(e)),!p);o=0>=c?++a:--a);if(p)return r.body.removeChild(p)}else if(p=document.getElementById(e))return document.getElementsByTagName("head")[0].removeChild(p)}catch(i){if(s=i,window&&window.console&&window.console.error)return window.console.error("Could not remove script element. "+(s.message||s.error||s.description||s))}},t.callbackExists=function(e){var n,r;return r=e.split("."),n=r[r.length-1],n in t._cb},t}(),fm.json=function(){function t(){}return t.useMicrosoftDateFormat=!0,t._dateRegex=/^\/Date\((\d+[\-|\+]?\d{0,4})\)\/$/,t._reviver=function(e,n){var r,s,i,o;return n&&"string"==typeof n&&t._dateRegex.test(n)?(o=n.match(t._dateRegex)[1],r=o.indexOf("-")>-1?"-":"+",s=o.split(r),i=parseInt(s[0],10),new Date(i)):n},t._build_reviver=function(t){return this.useMicrosoftDateFormat?null!=t?function(e){return function(n,r){return t(n,e._reviver(n,r))}}(this):this._reviver:t},Date.prototype.toJSONFM=function(t){return isFinite(this.valueOf())?"/Date("+this.getTime()+"-0000)/":null},t.deserialize=function(){var e;return e=Array.prototype.slice.call(arguments),0===e.length||null===e[0]||""===e[0]?null:(e[1]=t._build_reviver(e[1]),JSON.parse.apply(t,e))},t.serialize=function(){var e,n,r,s,i;return t.useMicrosoftDateFormat?(n=Date.prototype.toJSON,i=String.prototype.toJSON,s=Number.prototype.toJSON,e=Boolean.prototype.toJSON,Date.prototype.toJSON=Date.prototype.toJSONFM,String.prototype.toJSON=String.prototype.toJSONFM,Number.prototype.toJSON=Number.prototype.toJSONFM,Boolean.prototype.toJSON=Boolean.prototype.toJSONFM,r=JSON.stringify.apply(t,arguments).replace(/\//g,"\\/"),Date.prototype.toJSON=n,String.prototype.toJSON=i,Number.prototype.toJSON=s,Boolean.prototype.toJSON=e,r):JSON.stringify.apply(t,arguments)},t}(),fm.asyncException=function(){function t(){}return t.asyncThrow=function(t,e){var n;return n="An exception in user code ("+e+") was unhandled.",fm.log.error(n,t),t.stack&&(fm.log.error(t.stack),window&&window.console&&console.error(t.stack)),window.setTimeout(function(){throw t},1)},t}(),fm.base64=function(){function t(){}return t.b64ToUint6=function(t){return t>64&&91>t?t-65:t>96&&123>t?t-71:t>47&&58>t?t+4:43===t?62:47===t?63:0},t.decode=function(t,e){var n,r,s,i,o,a,u,l,c,p,f;if("undefined"==typeof Uint8Array)return null;for(f=t.replace(/[^A-Za-z0-9\+\/]/g,""),p=f.length,r=e?Math.ceil((3*p+1>>2)/e)*e:3*p+1>>2,s=new Uint8Array(r),u=0,n=0,c=i=0,l=p-1;l>=0?l>=i:i>=l;c=l>=0?++i:--i)if(a=3&c,u|=this.b64ToUint6(f.charCodeAt(c))<<18-6*a,3===a||p-c===1){for(o=0;3>o&&r>n;)s[n]=u>>>(16>>>o&24)&255,o++,n++;u=0}return s},t.uint6ToB64=function(t){return 26>t?t+65:52>t?t+71:62>t?t-4:62===t?43:63===t?47:65},t.encode=function(t){var e,n,r,s,i,o,a;if("undefined"==typeof Uint8Array)return null;for(a="",n=t.length,i=0,e=r=0,o=n-1;o>=0?o>=r:r>=o;e=o>=0?++r:--r)s=e%3,i|=t[e]<<(16>>>s&24),(2===s||t.length-e===1)&&(a+=String.fromCharCode(this.uint6ToB64(i>>>18&63),this.uint6ToB64(i>>>12&63),this.uint6ToB64(i>>>6&63),this.uint6ToB64(63&i)),i=0);return a.replace(/A(?=A$|$)/g,"=")},t}(),fm.encoding=function(){function t(){}return t.getUtf8=function(){return new fm.encoding},t.prototype.getString=function(t,e,n){var r,s,i,o;if(!t)return null;for("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=t.length),o="",s=e;e+n>s;){if(t[s]<=127)r=t[s];else if(t[s]>>5===6)r=(31&t[s])<<6|63&t[++s];else if(t[s]>>4===14)r=(15&t[s])<<12|(63&t[++s])<<6|63&t[++s];else{for(i=1;t[s]&32>>>i;)i++;for(r=t[s]&31>>>i;i-->=0;)r=r<<6^63&t[++s]}o+=String.fromCharCode(r),s++}return o},t.prototype.getBytes=function(t){var e,n,r,s,i,o;if(!t)return null;for(i=t.length,r=0,o=new Uint8Array(new ArrayBuffer(4*i)),n=0;i>n;){if(e=t.charCodeAt(n),127>=e)o[r++]=e;else if(2047>=e)o[r++]=192|e>>>6,o[r++]=128|63&e;else if(65535>=e)o[r++]=224|e>>>12,o[r++]=128|e>>>6&63,o[r++]=128|63&e;else{for(s=4;e>>6*s;)s++;for(o[r++]=65280>>>s&255|e>>>6*--s;s--;)o[r++]=128|e>>>6*s&63}n++}return o.subarray(0,r)},t.prototype.getByteCount=function(t){return this.getBytes(t).length},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.randomizer=function(t){function e(){return this.randomString=bind(this.randomString,this),this.nextDouble=bind(this.nextDouble,this),this.next=bind(this.next,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.next=function(t,e){return t||e?e||(e=t,t=0):(t=0,e=2147483647),Math.floor(Math.random()*(e-t))+t},e.prototype.nextDouble=function(){return Math.random()},e.prototype._randomCharset="abcdefghijklmnopqrstuvwxyz0123456789",e.prototype.randomString=function(t){var e,n,r,s;for(s="",e=n=0,r=t-1;r>=0?r>=n:n>=r;e=r>=0?++n:--n)s+=this._randomCharset.charAt(this.next(this._randomCharset.length));return s},e}(fm.object),fm.crypto=function(){function t(){}return t.base64Regex=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,t.base64Encode=function(t){return t?fm.base64.encode(t):null},t.base64Decode=function(e){return e&&t.base64Regex.test(e)?fm.base64.decode(e):null},t.tryBase64Encode=function(e,n){var r,s,i;try{return r=t.base64Encode(e),n.setValue(r),r?!0:!1}catch(i){return s=i,n.setValue(null),!1}},t.tryBase64Decode=function(e,n){var r,s,i;try{return r=t.base64Decode(e),n.setValue(r),r?!0:!1}catch(i){return s=i,n.setValue(null),!1}},t}(),fm.httpMethod={Get:1,Head:2,Post:3,Put:4,Patch:5,Delete:6},fm.backoffMode={Additive:1,Constant:2,None:3},fm.jsonCheckerMode={Array:1,Done:2,Key:3,Object:4,String:5},fm.logLevel={Debug:1,Info:2,Warn:3,Error:4,Fatal:5,None:6},fm.stringType={None:1,Single:2,Double:3},fm.webSocketStatusCode={Normal:1e3,GoingAway:1001,ProtocolError:1002,InvalidType:1003,NoStatus:1005,Abnormal:1006,InvalidData:1007,PolicyViolation:1008,MessageTooLarge:1009,UnsupportedExtension:1010,UnexpectedCondition:1011,SecureHandshakeFailure:1015};var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.serializable=function(t){function e(){this.setSerialized=bind(this.setSerialized,this),this.setIsSerialized=bind(this.setIsSerialized,this),this.setIsDirty=bind(this.setIsDirty,this),this.getSerialized=bind(this.getSerialized,this),this.getIsSerialized=bind(this.getIsSerialized,this),this.getIsDirty=bind(this.getIsDirty,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setIsSerialized(!1),this.setIsDirty(!1),fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setIsSerialized(!1),this.setIsDirty(!1),t)}return extend(e,t),e.prototype.__serialized=null,e.prototype._isDirty=!1,e.prototype._isSerialized=!1,e.prototype.getIsDirty=function(){return this._isDirty},e.prototype.getIsSerialized=function(){return this._isSerialized},e.prototype.getSerialized=function(){return this.__serialized},e.prototype.setIsDirty=function(){var t;return t=arguments[0],this._isDirty=t},e.prototype.setIsSerialized=function(){var t;return t=arguments[0],this._isSerialized=t},e.prototype.setSerialized=function(){var t;return t=arguments[0],this.__serialized=t,this.setIsSerialized(!0),this.setIsDirty(!1)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.dynamic=function(t){function e(){this.unsetDynamicValue=bind(this.unsetDynamicValue,this),this.setDynamicValue=bind(this.setDynamicValue,this),this.setDynamicProperties=bind(this.setDynamicProperties,this),this.getDynamicValue=bind(this.getDynamicValue,this),this.getDynamicProperties=bind(this.getDynamicProperties,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.__dynamicProperties={},this.__dynamicPropertiesLock=new fm.object,fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.__dynamicProperties={},this.__dynamicPropertiesLock=new fm.object,t)}return extend(e,t),e.prototype.__dynamicProperties=null,e.prototype.__dynamicPropertiesLock=null,e.prototype.getDynamicProperties=function(){var t,e,n,r,s;for(e={},t=fm.hashExtensions.getKeys(this.__dynamicProperties),n=0,r=t.length;r>n;n++)s=t[n],e[s]=this.__dynamicProperties[s];return e},e.prototype.getDynamicValue=function(){var t,e,n,r;return n=arguments[0],r=null,t=new fm.holder(r),e=fm.hashExtensions.tryGetValue(this.__dynamicProperties,n,t),r=t.getValue(),e?r:null},e.prototype.setDynamicProperties=function(){var t,e,n,r,s,i;for(i=arguments[0],fm.global.equals(i,null)&&(i={}),e={},t=fm.hashExtensions.getKeys(i),n=0,r=t.length;r>n;n++)s=t[n],e[s]=i[s];return this.__dynamicProperties=e},e.prototype.setDynamicValue=function(){var t,e;return t=arguments[0],e=arguments[1],this.__dynamicProperties[t]=e},e.prototype.unsetDynamicValue=function(){var t;return t=arguments[0],fm.hashExtensions.remove(this.__dynamicProperties,t)},e}(fm.serializable);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpResponseReceivedArgs=function(t){function e(){this.setSender=bind(this.setSender,this),this.setResponse=bind(this.setResponse,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.getSender=bind(this.getSender,this),this.getResponse=bind(this.getResponse,this),this.getRequestArgs=bind(this.getRequestArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestArgs=null,e.prototype._response=null,e.prototype._sender=null,e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getResponse=function(){return this._response},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setResponse=function(){var t;return t=arguments[0],this._response=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketCloseArgs=function(t){function e(){this.setStatusCode=bind(this.setStatusCode,this),this.setReason=bind(this.setReason,this),this.setOnComplete=bind(this.setOnComplete,this),this.getStatusCode=bind(this.getStatusCode,this),this.getReason=bind(this.getReason,this),this.getOnComplete=bind(this.getOnComplete,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setStatusCode(fm.webSocketStatusCode.Normal),this.setReason(fm.stringExtensions.empty),fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setStatusCode(fm.webSocketStatusCode.Normal),this.setReason(fm.stringExtensions.empty),t)}return extend(e,t),e.prototype._onComplete=null,e.prototype._reason=null,e.prototype._statusCode=null,e.prototype.getOnComplete=function(){return this._onComplete},e.prototype.getReason=function(){return this._reason},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setOnComplete=function(){var t;return t=arguments[0],this._onComplete=t},e.prototype.setReason=function(){var t;return t=arguments[0],this._reason=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketCloseCompleteArgs=function(t){function e(){this.setStatusCode=bind(this.setStatusCode,this),this.setReason=bind(this.setReason,this),this.setCloseArgs=bind(this.setCloseArgs,this),this.getStatusCode=bind(this.getStatusCode,this),this.getReason=bind(this.getReason,this),this.getCloseArgs=bind(this.getCloseArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._closeArgs=null,e.prototype._reason=null,e.prototype._statusCode=null,e.prototype.getCloseArgs=function(){return this._closeArgs},e.prototype.getReason=function(){return this._reason},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setCloseArgs=function(){var t;return t=arguments[0],this._closeArgs=t},e.prototype.setReason=function(){var t;return t=arguments[0],this._reason=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenArgs=function(t){function e(){this.setStreamTimeout=bind(this.setStreamTimeout,this),this.setSender=bind(this.setSender,this),this.setOnSuccess=bind(this.setOnSuccess,this),this.setOnStreamFailure=bind(this.setOnStreamFailure,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setOnReceive=bind(this.setOnReceive,this),this.setOnFailure=bind(this.setOnFailure,this),this.setHeaders=bind(this.setHeaders,this),this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this),this.getStreamTimeout=bind(this.getStreamTimeout,this),this.getSender=bind(this.getSender,this),this.getOnSuccess=bind(this.getOnSuccess,this),this.getOnStreamFailure=bind(this.getOnStreamFailure,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getOnReceive=bind(this.getOnReceive,this),this.getOnFailure=bind(this.getOnFailure,this),this.getHeaders=bind(this.getHeaders,this),this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),this.setStreamTimeout(4e4),fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),this.setStreamTimeout(4e4),t)}return extend(e,t),e.prototype._handshakeTimeout=0,e.prototype._headers=null,e.prototype._onFailure=null,e.prototype._onReceive=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._onStreamFailure=null,e.prototype._onSuccess=null,e.prototype._sender=null,e.prototype._streamTimeout=0,e.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},e.prototype.getHeaders=function(){return this._headers},e.prototype.getOnFailure=function(){return this._onFailure},e.prototype.getOnReceive=function(){return this._onReceive},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getOnStreamFailure=function(){return this._onStreamFailure},e.prototype.getOnSuccess=function(){return this._onSuccess},e.prototype.getSender=function(){return this._sender},e.prototype.getStreamTimeout=function(){return this._streamTimeout},e.prototype.setHandshakeTimeout=function(){var t;return t=arguments[0],this._handshakeTimeout=t},e.prototype.setHeaders=function(){var t;return t=arguments[0],this._headers=t},e.prototype.setOnFailure=function(){var t;return t=arguments[0],this._onFailure=t},e.prototype.setOnReceive=function(){var t;return t=arguments[0],this._onReceive=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setOnStreamFailure=function(){var t;return t=arguments[0],this._onStreamFailure=t},e.prototype.setOnSuccess=function(){var t;return t=arguments[0],this._onSuccess=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setStreamTimeout=function(){var t;return t=arguments[0],this._streamTimeout=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenFailureArgs=function(t){function e(){this.setStatusCode=bind(this.setStatusCode,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setException=bind(this.setException,this),this.getStatusCode=bind(this.getStatusCode,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getException=bind(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._exception=null,e.prototype._openArgs=null,e.prototype._statusCode=null,e.prototype.getException=function(){return this._exception},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenSuccessArgs=function(t){function e(){this.setOpenArgs=bind(this.setOpenArgs,this),this.getOpenArgs=bind(this.getOpenArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._openArgs=null,e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketReceiveArgs=function(t){function e(){this.setTextMessage=bind(this.setTextMessage,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setBinaryMessage=bind(this.setBinaryMessage,this),this.getTextMessage=bind(this.getTextMessage,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getIsText=bind(this.getIsText,this),this.getBinaryMessage=bind(this.getBinaryMessage,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._binaryMessage=null,e.prototype._openArgs=null,e.prototype._textMessage=null,e.prototype.getBinaryMessage=function(){return this._binaryMessage},e.prototype.getIsText=function(){return!fm.global.equals(this.getTextMessage(),null)},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getTextMessage=function(){return this._textMessage},e.prototype.setBinaryMessage=function(){var t;return t=arguments[0],this._binaryMessage=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setTextMessage=function(){var t;return t=arguments[0],this._textMessage=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketSendArgs=function(t){function e(){this.setTimeout=bind(this.setTimeout,this),this.setTextMessage=bind(this.setTextMessage,this),this.setBinaryMessage=bind(this.setBinaryMessage,this),this.getTimeout=bind(this.getTimeout,this),this.getTextMessage=bind(this.getTextMessage,this),this.getIsText=bind(this.getIsText,this),this.getBinaryMessage=bind(this.getBinaryMessage,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setTimeout(15e3),fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setTimeout(15e3),t)}return extend(e,t),e.prototype._binaryMessage=null,e.prototype._textMessage=null,e.prototype._timeout=0,e.prototype.getBinaryMessage=function(){return this._binaryMessage},e.prototype.getIsText=function(){return!fm.global.equals(this.getTextMessage(),null)},e.prototype.getTextMessage=function(){return this._textMessage},e.prototype.getTimeout=function(){return this._timeout},e.prototype.setBinaryMessage=function(){var t;return t=arguments[0],this._binaryMessage=t},e.prototype.setTextMessage=function(){var t;return t=arguments[0],this._textMessage=t},e.prototype.setTimeout=function(){var t;return t=arguments[0],this._timeout=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketStreamFailureArgs=function(t){function e(){this.setStatusCode=bind(this.setStatusCode,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setException=bind(this.setException,this),this.getStatusCode=bind(this.getStatusCode,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getException=bind(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._exception=null,e.prototype._openArgs=null,e.prototype._statusCode=null,e.prototype.getException=function(){return this._exception},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.baseTimeoutTimer=function(t){function e(){this.stop=bind(this.stop,this),this.start=bind(this.start,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype.start=function(){var t;return t=arguments[0]},e.prototype.stop=function(){},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.baseWebSocket=function(t){function e(){this.send=bind(this.send,this),this.open=bind(this.open,this),this.getSecure=bind(this.getSecure,this),this.getIsOpen=bind(this.getIsOpen,this),this.getBufferedAmount=bind(this.getBufferedAmount,this),this.close=bind(this.close,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype.close=function(){var t;0!==arguments.length&&1===arguments.length&&(t=arguments[0])},e.prototype.getBufferedAmount=function(){},e.prototype.getIsOpen=function(){},e.prototype.getSecure=function(){},e.prototype.open=function(){var t;return t=arguments[0]},e.prototype.send=function(){var t;return t=arguments[0]},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.byteHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.callbackState=function(t){function e(){this.setState=bind(this.setState,this),this.setCallback=bind(this.setCallback,this),this.getState=bind(this.getState,this),this.getCallback=bind(this.getCallback,this),this.execute=bind(this.execute,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),n):(t=arguments[0],r=arguments[1],n=e.__super__.constructor.call(this),this.setCallback(t),this.setState(r),n)}return extend(e,t),e.prototype._callback=null,e.prototype._state=null,e.prototype.execute=function(){return fm.global.equals(this.getCallback(),null)?void 0:this.getCallback()(this.getState())},e.prototype.getCallback=function(){return this._callback},e.prototype.getState=function(){return this._state},e.prototype.setCallback=function(){var t;return t=arguments[0],this._callback=t},e.prototype.setState=function(){var t;return t=arguments[0],this._state=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.characterHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value="\x00",e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,
t},hasProp={}.hasOwnProperty;fm.logProvider=function(t){function e(){this.writeLine=bind(this.writeLine,this),this.warnFormat=bind(this.warnFormat,this),this.warn=bind(this.warn,this),this.setLevel=bind(this.setLevel,this),this.log=bind(this.log,this),this.isEnabled=bind(this.isEnabled,this),this.infoFormat=bind(this.infoFormat,this),this.info=bind(this.info,this),this.getLevel=bind(this.getLevel,this),this.getIsWarnEnabled=bind(this.getIsWarnEnabled,this),this.getIsInfoEnabled=bind(this.getIsInfoEnabled,this),this.getIsFatalEnabled=bind(this.getIsFatalEnabled,this),this.getIsErrorEnabled=bind(this.getIsErrorEnabled,this),this.getIsDebugEnabled=bind(this.getIsDebugEnabled,this),this.formatAndWriteLine=bind(this.formatAndWriteLine,this),this.fatalFormat=bind(this.fatalFormat,this),this.fatal=bind(this.fatal,this),this.errorFormat=bind(this.errorFormat,this),this.error=bind(this.error,this),this.debugFormat=bind(this.debugFormat,this),this.debug=bind(this.debug,this),this._log=bind(this._log,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setLevel(fm.logLevel.None),fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setLevel(fm.logLevel.None),t)}return extend(e,t),e.prototype._level=null,e.getPrefix=function(){var t,e,n;return e=arguments[0],t=arguments[1],n=fm.logProvider.getPrefixLevel(e),t&&(n=fm.stringExtensions.format("{0} {1}",n,fm.logProvider.getPrefixTimestamp(fm.dateTime.getUtcNow()))),n},e.getPrefixLevel=function(){var t;switch(t=arguments[0]){case fm.logLevel.Debug:return"DEBUG";case fm.logLevel.Info:return"INFO ";case fm.logLevel.Warn:return"WARN ";case fm.logLevel.Error:return"ERROR";case fm.logLevel.Fatal:return"FATAL";case fm.logLevel.None:return"NONE "}return"?????"},e.getPrefixTimestamp=function(){var t,e,n,r,s,i,o;for(o=arguments[0],t=fm.intExtensions.toString(o.getYear()),e=fm.intExtensions.toString(o.getMonth()),n=fm.intExtensions.toString(o.getDay()),r=fm.intExtensions.toString(o.getHour()),s=fm.intExtensions.toString(o.getMinute()),i=fm.intExtensions.toString(o.getSecond());t.length<4;)t=fm.stringExtensions.concat("0",t);for(;e.length<2;)e=fm.stringExtensions.concat("0",e);for(;n.length<2;)n=fm.stringExtensions.concat("0",n);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);return fm.stringExtensions.format("{0}/{1}/{2}-{3}:{4}:{5}",[t,e,n,r,s,i])},e.prototype._log=function(){var t,e,n,r,s,i;if(2!==arguments.length){if(3===arguments.length&&(r=arguments[0],s=arguments[1],n=arguments[2],this.isEnabled(r)))try{this.log(r,s,n)}catch(e){i=e}finally{}}else if(r=arguments[0],s=arguments[1],this.isEnabled(r))try{this.log(r,s)}catch(t){i=t}finally{}},e.prototype.debug=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Debug,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Debug,e)))},e.prototype.debugFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.debug(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.error=function(){var t,e;return 1===arguments.length?(e=arguments[0],void this._log(fm.logLevel.Error,e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],this._log(fm.logLevel.Error,e,t)))},e.prototype.errorFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.error(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.fatal=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Fatal,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Fatal,e)))},e.prototype.fatalFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.fatal(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.formatAndWriteLine=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.writeLine(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.getIsDebugEnabled=function(){return this.isEnabled(fm.logLevel.Debug)},e.prototype.getIsErrorEnabled=function(){return this.isEnabled(fm.logLevel.Error)},e.prototype.getIsFatalEnabled=function(){return this.isEnabled(fm.logLevel.Fatal)},e.prototype.getIsInfoEnabled=function(){return this.isEnabled(fm.logLevel.Info)},e.prototype.getIsWarnEnabled=function(){return this.isEnabled(fm.logLevel.Warn)},e.prototype.getLevel=function(){return this._level},e.prototype.info=function(){var t,e;return 1===arguments.length?(e=arguments[0],void this._log(fm.logLevel.Info,e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],this._log(fm.logLevel.Info,e,t)))},e.prototype.infoFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.info(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.isEnabled=function(){var t;return t=arguments[0],t>=this.getLevel()},e.prototype.log=function(){var t,e,n;return 2===arguments.length?(e=arguments[0],void(n=arguments[1])):void(3===arguments.length&&(e=arguments[0],n=arguments[1],t=arguments[2]))},e.prototype.setLevel=function(){var t;return t=arguments[0],this._level=t},e.prototype.warn=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Warn,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Warn,e)))},e.prototype.warnFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.warn(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.writeLine=function(){var t;return t=arguments[0]},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.booleanHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=!1,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketTransfer=function(t){function e(){this.shutdown=bind(this.shutdown,this),this.setUrl=bind(this.setUrl,this),this.setStreamTimeout=bind(this.setStreamTimeout,this),this.setSender=bind(this.setSender,this),this.setOnStreamFailure=bind(this.setOnStreamFailure,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setOnOpenSuccess=bind(this.setOnOpenSuccess,this),this.setOnOpenFailure=bind(this.setOnOpenFailure,this),this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.open=bind(this.open,this),this.getUrl=bind(this.getUrl,this),this.getStreamTimeout=bind(this.getStreamTimeout,this),this.getSender=bind(this.getSender,this),this.getOnStreamFailure=bind(this.getOnStreamFailure,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getOnOpenSuccess=bind(this.getOnOpenSuccess,this),this.getOnOpenFailure=bind(this.getOnOpenFailure,this),this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=e.__super__.constructor.call(this),this.setUrl(n),t)}return extend(e,t),e.prototype.__url=null,e.prototype._handshakeTimeout=0,e.prototype._onOpenFailure=null,e.prototype._onOpenSuccess=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._onStreamFailure=null,e.prototype._sender=null,e.prototype._streamTimeout=0,e.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},e.prototype.getOnOpenFailure=function(){return this._onOpenFailure},e.prototype.getOnOpenSuccess=function(){return this._onOpenSuccess},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getOnStreamFailure=function(){return this._onStreamFailure},e.prototype.getSender=function(){return this._sender},e.prototype.getStreamTimeout=function(){return this._streamTimeout},e.prototype.getUrl=function(){return this.__url},e.prototype.open=function(){var t;return t=arguments[0]},e.prototype.send=function(){var t;return t=arguments[0]},e.prototype.sendAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.setHandshakeTimeout=function(){var t;return t=arguments[0],this._handshakeTimeout=t},e.prototype.setOnOpenFailure=function(){var t;return t=arguments[0],this._onOpenFailure=t},e.prototype.setOnOpenSuccess=function(){var t;return t=arguments[0],this._onOpenSuccess=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setOnStreamFailure=function(){var t;return t=arguments[0],this._onStreamFailure=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setStreamTimeout=function(){var t;return t=arguments[0],this._streamTimeout=t},e.prototype.setUrl=function(){var t;return t=arguments[0],t=t.replace("https://","wss://"),t=t.replace("http://","ws://"),this.__url=t},e.prototype.shutdown=function(){},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketTransferFactory=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e._createWebSocketTransfer=null,e.defaultCreateWebSocketTransfer=function(){var t;return t=arguments[0],new fm.webSocketWebRequestTransfer(t)},e.getCreateWebSocketTransfer=function(){return fm.webSocketTransferFactory._createWebSocketTransfer},e.getWebSocketTransfer=function(){var t,n;return n=arguments[0],fm.global.equals(fm.webSocketTransferFactory.getCreateWebSocketTransfer(),null)&&e.setCreateWebSocketTransfer(e.defaultCreateWebSocketTransfer),t=fm.webSocketTransferFactory.getCreateWebSocketTransfer()(n),fm.global.equals(t,null)&&(t=fm.webSocketTransferFactory.defaultCreateWebSocketTransfer(n)),t},e.setCreateWebSocketTransfer=function(){var t;return t=arguments[0],e._createWebSocketTransfer=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.jsonProvider=function(t){function e(){this.serialize=bind(this.serialize,this),this.deserialize=bind(this.deserialize,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype.deserialize=function(){var t;return t=arguments[0]},e.prototype.serialize=function(){var t;return t=arguments[0]},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.nullJsonProvider=function(t){function e(){this.serialize=bind(this.serialize,this),this.deserialize=bind(this.deserialize,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype.deserialize=function(){var t;return t=arguments[0],null},e.prototype.serialize=function(){var t;return t=arguments[0],null},e}(fm.jsonProvider);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.doubleHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.floatHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpRequestArgs=function(t){function e(){this.setUrl=bind(this.setUrl,this),this.setTimeout=bind(this.setTimeout,this),this.setTextContent=bind(this.setTextContent,this),this.setSender=bind(this.setSender,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setMethod=bind(this.setMethod,this),this.setHeaders=bind(this.setHeaders,this),this.setBinaryContent=bind(this.setBinaryContent,this),this.getUrl=bind(this.getUrl,this),this.getTimeout=bind(this.getTimeout,this),this.getTextContent=bind(this.getTextContent,this),this.getSender=bind(this.getSender,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getMethod=bind(this.getMethod,this),this.getHeaders=bind(this.getHeaders,this),this.getBinaryContent=bind(this.getBinaryContent,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),this.__headers=new fm.nameValueCollection,fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),this.__headers=new fm.nameValueCollection,t)}return extend(e,t),e.prototype.__headers=null,e.prototype._binaryContent=null,e.prototype._method=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._sender=null,e.prototype._textContent=null,e.prototype._timeout=0,e.prototype._url=null,e.prototype.getBinaryContent=function(){return this._binaryContent},e.prototype.getHeaders=function(){return this.__headers},e.prototype.getMethod=function(){return this._method},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getSender=function(){return this._sender},e.prototype.getTextContent=function(){return this._textContent},e.prototype.getTimeout=function(){return this._timeout},e.prototype.getUrl=function(){return this._url},e.prototype.setBinaryContent=function(){var t;return t=arguments[0],this._binaryContent=t},e.prototype.setHeaders=function(){var t;return t=arguments[0],fm.global.equals(t,null)?this.__headers=new fm.nameValueCollection:this.__headers=t},e.prototype.setMethod=function(){var t;return t=arguments[0],this._method=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setTextContent=function(){var t;return t=arguments[0],this._textContent=t},e.prototype.setTimeout=function(){var t;return t=arguments[0],this._timeout=t},e.prototype.setUrl=function(){var t;return t=arguments[0],this._url=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpRequestCreatedArgs=function(t){function e(){this.setSender=bind(this.setSender,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.setRequest=bind(this.setRequest,this),this.getSender=bind(this.getSender,this),this.getRequestArgs=bind(this.getRequestArgs,this),this.getRequest=bind(this.getRequest,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._request=null,e.prototype._requestArgs=null,e.prototype._sender=null,e.prototype.getRequest=function(){return this._request},e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getSender=function(){return this._sender},e.prototype.setRequest=function(){var t;return t=arguments[0],this._request=t},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpResponseArgs=function(t){function e(){this.setTextContent=bind(this.setTextContent,this),this.setStatusCode=bind(this.setStatusCode,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.setHeaders=bind(this.setHeaders,this),this.setException=bind(this.setException,this),this.setBinaryContent=bind(this.setBinaryContent,this),this.getTextContent=bind(this.getTextContent,this),this.getStatusCode=bind(this.getStatusCode,this),this.getRequestArgs=bind(this.getRequestArgs,this),this.getHeaders=bind(this.getHeaders,this),this.getException=bind(this.getException,this),this.getBinaryContent=bind(this.getBinaryContent,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this.setHeaders(new fm.nameValueCollection),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?(t=e.__super__.constructor.call(this),this.setHeaders(new fm.nameValueCollection),t):1===arguments.length?(n=arguments[0],e.call(this),this.setRequestArgs(n),t):void 0}return extend(e,t),e.prototype._binaryContent=null,e.prototype._exception=null,e.prototype._headers=null,e.prototype._requestArgs=null,e.prototype._statusCode=0,e.prototype._textContent=null,e.prototype.getBinaryContent=function(){return this._binaryContent},e.prototype.getException=function(){return this._exception},e.prototype.getHeaders=function(){return this._headers},e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setBinaryContent=function(){var t;return t=arguments[0],this._binaryContent=t},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setHeaders=function(){var t;return t=arguments[0],this._headers=t},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e.prototype.setTextContent=function(){var t;return t=arguments[0],this._textContent=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpSendFinishArgs=function(t){function e(){this.setSender=bind(this.setSender,this),this.setResponseTextContent=bind(this.setResponseTextContent,this),this.setResponseHeaders=bind(this.setResponseHeaders,this),this.setResponseBinaryContent=bind(this.setResponseBinaryContent,this),this.setRequestTextContent=bind(this.setRequestTextContent,this),this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this),this.getSender=bind(this.getSender,this),this.getResponseTextContent=bind(this.getResponseTextContent,this),this.getResponseHeaders=bind(this.getResponseHeaders,this),this.getResponseBinaryContent=bind(this.getResponseBinaryContent,this),this.getRequestTextContent=bind(this.getRequestTextContent,this),this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBinaryContent=null,e.prototype._requestTextContent=null,e.prototype._responseBinaryContent=null,e.prototype._responseHeaders=null,e.prototype._responseTextContent=null,e.prototype._sender=null,e.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},e.prototype.getRequestTextContent=function(){return this._requestTextContent},e.prototype.getResponseBinaryContent=function(){return this._responseBinaryContent},e.prototype.getResponseHeaders=function(){return this._responseHeaders},e.prototype.getResponseTextContent=function(){return this._responseTextContent},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestBinaryContent=function(){var t;return t=arguments[0],this._requestBinaryContent=t},e.prototype.setRequestTextContent=function(){var t;return t=arguments[0],this._requestTextContent=t},e.prototype.setResponseBinaryContent=function(){var t;return t=arguments[0],this._responseBinaryContent=t},e.prototype.setResponseHeaders=function(){var t;return t=arguments[0],this._responseHeaders=t},e.prototype.setResponseTextContent=function(){var t;return t=arguments[0],this._responseTextContent=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpSendStartArgs=function(t){function e(){this.setSender=bind(this.setSender,this),this.setRequestTextContent=bind(this.setRequestTextContent,this),this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this),this.getSender=bind(this.getSender,this),this.getRequestTextContent=bind(this.getRequestTextContent,this),this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBinaryContent=null,e.prototype._requestTextContent=null,e.prototype._sender=null,e.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},e.prototype.getRequestTextContent=function(){return this._requestTextContent},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestBinaryContent=function(){var t;return t=arguments[0],this._requestBinaryContent=t},e.prototype.setRequestTextContent=function(){var t;return t=arguments[0],this._requestTextContent=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.integerHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.lockedRandomizer=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):void 0}return extend(e,t),e._randomizer=null,e._randomLock=null,e.next=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],fm.lockedRandomizer._randomizer.next(e,t)):0===arguments.length?fm.lockedRandomizer._randomizer.next():1===arguments.length?(t=arguments[0],fm.lockedRandomizer._randomizer.next(t)):void 0},e.nextBytes=function(){var t;return t=arguments[0],fm.lockedRandomizer._randomizer.nextBytes(t)},e.nextDouble=function(){return fm.lockedRandomizer._randomizer.nextDouble()},e.nextLong=function(){return 922337203685478e4*fm.lockedRandomizer._randomizer.nextDouble()},e.randomString=function(){var t;return t=arguments[0],fm.lockedRandomizer._randomizer.randomString(t)},e._randomizer=new fm.randomizer,e._randomLock=new fm.object,e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.log=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.__provider=null,e.debug=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().debug(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().debug(e,t)))},e.debugFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().debugFormat(e,t)},e.error=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void fm.log.getProvider().error(e,t)):void(1===arguments.length&&(e=arguments[0],fm.log.getProvider().error(e)))},e.errorFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().errorFormat(e,t)},e.fatal=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().fatal(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().fatal(e,t)))},e.fatalFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().fatalFormat(e,t)},e.getDefault=function(){return new fm.nullLogProvider},e.getIsDebugEnabled=function(){return fm.log.getProvider().getIsDebugEnabled()},e.getIsErrorEnabled=function(){return fm.log.getProvider().getIsErrorEnabled()},e.getIsFatalEnabled=function(){return fm.log.getProvider().getIsFatalEnabled()},e.getIsInfoEnabled=function(){return fm.log.getProvider().getIsInfoEnabled()},e.getIsWarnEnabled=function(){return fm.log.getProvider().getIsWarnEnabled()},e.getProvider=function(){return fm.global.equals(fm.log.__provider,null)&&(e.__provider=fm.log.getDefault()),fm.log.__provider},e.info=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void fm.log.getProvider().info(e,t)):void(1===arguments.length&&(e=arguments[0],fm.log.getProvider().info(e)))},e.infoFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().infoFormat(e,t)},e.setProvider=function(){var t;return t=arguments[0],fm.global.equals(t,null)&&(t=fm.log.getDefault()),e.__provider=t},e.warn=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().warn(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().warn(e,t)))},e.warnFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().warnFormat(e,t)},e.writeLine=function(){var t,e,n;return 1===arguments.length?(n=arguments[0],void fm.log.getProvider().writeLine(n)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().formatAndWriteLine(e,t)))},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.longHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.shortHolder=function(t){function e(){this.setValue=bind(this.setValue,this),
this.getValue=bind(this.getValue,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?t=e.__super__.constructor.call(this):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.setValue(n),t):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.splitter=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.split=function(){var t,e,n,r,s,i,o,a;if(a=arguments[0],n=arguments[1],fm.global.equals(a,null))throw new Error("str cannot be null.");if(fm.global.equals(n,null))throw new Error("delimiter cannot be null.");if(fm.global.equals(n.length,0))return[a];for(o=0,i=0,s=[],r=0;r<a.length;)try{t=a.charAt(r),e=n.charAt(i),fm.global.equals(t,e)?fm.global.equals(i,n.length-1)?(fm.arrayExtensions.add(s,fm.stringExtensions.substring(a,o,r-i-o)),o=r+1,i=0):i++:i=0}finally{r++}return fm.arrayExtensions.add(s,a.substring(o)),fm.arrayExtensions.toArray(s)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.textLogProvider=function(t){function e(){this.writeLine=bind(this.writeLine,this),this.setCallback=bind(this.setCallback,this),this.log=bind(this.log,this),this.getText=bind(this.getText,this),this.getCallback=bind(this.getCallback,this),this.clear=bind(this.clear,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.call(this,fm.logLevel.Warn),fm.util.attachProperties(this,arguments[0]),t):0===arguments.length?(e.call(this,fm.logLevel.Warn),t):1===arguments.length?(n=arguments[0],t=e.__super__.constructor.call(this),this.__text=new fm.stringBuilder,this.__textLock=new fm.object,this.setLevel(n),t):void 0}return extend(e,t),e.prototype.__callback=null,e.prototype.__text=null,e.prototype.__textLock=null,e.prototype.clear=function(){var t;return t=this.__text.toString(),this.__text=new fm.stringBuilder,t},e.prototype.getCallback=function(){return this.__callback},e.prototype.getText=function(){return this.__text.toString()},e.prototype.log=function(){var t,e,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],void this.log(e,fm.stringExtensions.format("{0}\n{1}",n,t))):void(2===arguments.length&&(e=arguments[0],n=arguments[1],this.writeLine(fm.stringExtensions.format("{0} {1}",fm.logProvider.getPrefix(e,!0),n))))},e.prototype.setCallback=function(){var t,e;return e=arguments[0],t=this.__text.toString(),fm.stringExtensions.isNullOrEmpty(t)||(fm.stringExtensions.endsWith(t,"\n")&&(t=fm.stringExtensions.substring(t,0,t.length-1)),e(t)),this.__callback=e},e.prototype.writeLine=function(){var t;return t=arguments[0],this.__text.append(fm.stringExtensions.concat(t,"\n")),fm.global.equals(this.__callback,null)?void 0:this.__callback(t)},e}(fm.logProvider);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.stringAssistant=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.isNullOrWhiteSpace=function(){var t;return t=arguments[0],fm.global.equals(t,null)||fm.stringExtensions.isNullOrEmpty(fm.stringExtensions.trim(t))},e.subArray=function(){var t,e,n,r,s;if(2===arguments.length)return t=arguments[0],r=arguments[1],fm.stringAssistant.subArray(t,r,t.length-r);if(3===arguments.length){for(t=arguments[0],r=arguments[1],e=arguments[2],s=new Array(e),n=0;e>n;)try{s[n]=t[r+n]}finally{n++}return s}},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpTransfer=function(t){function e(){this.startRequest=bind(this.startRequest,this),this.shutdown=bind(this.shutdown,this),this.sendTextAsync=bind(this.sendTextAsync,this),this.sendText=bind(this.sendText,this),this.sendBinaryAsync=bind(this.sendBinaryAsync,this),this.sendBinary=bind(this.sendBinary,this),this.sendAsyncCallback=bind(this.sendAsyncCallback,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.raiseOnSendStart=bind(this.raiseOnSendStart,this),this.raiseOnSendFinish=bind(this.raiseOnSendFinish,this),this.finishRequest=bind(this.finishRequest,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),this._httpTransferCallbackKey="fm.httpTransfer.callback",fm.util.attachProperties(this,arguments[0]),t):(t=e.__super__.constructor.call(this),this._httpTransferCallbackKey="fm.httpTransfer.callback",t)}return extend(e,t),e.__wildcardCharacters=null,e.prototype._httpTransferCallbackKey=null,e._onSendFinish=null,e._onSendStart=null,e.addOnSendFinish=function(){var t;return t=arguments[0],fm.httpTransfer._onSendFinish=fm.delegate.combine(fm.httpTransfer._onSendFinish,t)},e.addOnSendStart=function(){var t;return t=arguments[0],fm.httpTransfer._onSendStart=fm.delegate.combine(fm.httpTransfer._onSendStart,t)},e.addQueryToUrl=function(){var t,e,n;return 2===arguments.length?(e=arguments[0],t=arguments[1],fm.httpTransfer.addQueryToUrl(e,t,null)):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],fm.stringExtensions.isNullOrEmpty(t)?e:(fm.global.equals(n,null)&&(n=fm.stringExtensions.empty),t=fm.uri.escapeDataString(t),n=fm.uri.escapeDataString(n),fm.stringExtensions.concat([e,fm.global.equals(fm.stringExtensions.indexOf(e,"?",fm.stringComparison.OrdinalIgnoreCase),-1)?"?":"&",t,"=",n]))):void 0},e.getRandomWildcardCharacter=function(){var t,e;return e=fm.httpTransfer.getWildcardCharacters(),t=(new fm.randomizer).next(e.length),fm.stringExtensions.substring(e,t,1)},e.getWildcardCharacters=function(){return fm.httpTransfer.__wildcardCharacters},e.removeOnSendFinish=function(){var t;return t=arguments[0],fm.httpTransfer._onSendFinish=fm.delegate.remove(fm.httpTransfer._onSendFinish,t)},e.removeOnSendStart=function(){var t;return t=arguments[0],fm.httpTransfer._onSendStart=fm.delegate.remove(fm.httpTransfer._onSendStart,t)},e.replaceWildcards=function(){var t;return t=arguments[0],t.replace("*",fm.httpTransfer.getRandomWildcardCharacter())},e.setWildcardCharacters=function(){var t;return t=arguments[0],e.__wildcardCharacters=t},e.prototype.finishRequest=function(){var t;return t=arguments[0],this.raiseOnSendFinish(t)},e.prototype.raiseOnSendFinish=function(){var t,e,n;return n=arguments[0],t=fm.httpTransfer._onSendFinish,fm.global.equals(t,null)?void 0:(e=new fm.httpSendFinishArgs,e.setSender(n.getRequestArgs().getSender()),e.setRequestBinaryContent(n.getRequestArgs().getBinaryContent()),e.setRequestTextContent(n.getRequestArgs().getTextContent()),e.setResponseBinaryContent(n.getBinaryContent()),e.setResponseTextContent(n.getTextContent()),e.setResponseHeaders(n.getHeaders()),t(e))},e.prototype.raiseOnSendStart=function(){var t,e,n;return n=arguments[0],t=fm.httpTransfer._onSendStart,fm.global.equals(t,null)?void 0:(e=new fm.httpSendStartArgs,e.setSender(n.getSender()),e.setRequestBinaryContent(n.getBinaryContent()),e.setRequestTextContent(n.getTextContent()),t(e))},e.prototype.send=function(){var t,e,n,r,s;s=arguments[0],this.startRequest(s);try{t=fm.global.equals(s.getBinaryContent(),null)?this.sendText(s):this.sendBinary(s)}catch(n){r=n,e=new fm.httpResponseArgs(s),e.setException(r),t=e}finally{}return this.finishRequest(t),t},e.prototype.sendAsync=function(){var t,e,n,r,s;s=arguments[0],t=arguments[1],this.startRequest(s),s.setDynamicValue(this._httpTransferCallbackKey,t);try{return fm.global.equals(s.getBinaryContent(),null)?this.sendTextAsync(s,this.sendAsyncCallback):this.sendBinaryAsync(s,this.sendAsyncCallback)}catch(e){return n=e,r=new fm.httpResponseArgs(s),r.setException(n),t(r)}finally{}},e.prototype.sendAsyncCallback=function(){var t,e;return e=arguments[0],t=e.getRequestArgs().getDynamicValue(this._httpTransferCallbackKey),e.getRequestArgs().unsetDynamicValue(this._httpTransferCallbackKey),this.finishRequest(e),t(e)},e.prototype.sendBinary=function(){var t;return t=arguments[0]},e.prototype.sendBinaryAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.sendText=function(){var t;return t=arguments[0]},e.prototype.sendTextAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.shutdown=function(){},e.prototype.startRequest=function(){var t;return t=arguments[0],this.raiseOnSendStart(t)},e.__wildcardCharacters="abcdefghijklmnopqrstuvwxyz",e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpTransferFactory=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e._createHttpTransfer=null,e.defaultCreateHttpTransfer=function(){return new fm.httpWebRequestTransfer},e.getCreateHttpTransfer=function(){return fm.httpTransferFactory._createHttpTransfer},e.getHttpTransfer=function(){var t;return fm.global.equals(fm.httpTransferFactory.getCreateHttpTransfer(),null)&&e.setCreateHttpTransfer(e.defaultCreateHttpTransfer),t=fm.httpTransferFactory.getCreateHttpTransfer()(),fm.global.equals(t,null)&&(t=fm.httpTransferFactory.defaultCreateHttpTransfer()),t},e.setCreateHttpTransfer=function(){var t;return t=arguments[0],e._createHttpTransfer=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.jsonChecker=function(t){function e(){this.push=bind(this.push,this),this.pop=bind(this.pop,this),this.onError=bind(this.onError,this),this.finalCheck=bind(this.finalCheck,this),this.checkString=bind(this.checkString,this),this.check=bind(this.check,this);var t,n;if(1===arguments.length&&fm.util.isPlainObject(arguments[0]))return e.call(this,0),fm.util.attachProperties(this,arguments[0]),n;if(0===arguments.length)return e.call(this,0),n;if(1===arguments.length){if(t=arguments[0],n=e.__super__.constructor.call(this),0>t)throw new Error("Invalid depth.");return this.__state=0,this.__depth=t,this.__stack=new fm.stack(t),this.push(fm.jsonCheckerMode.Done),n}}return extend(e,t),e.prototype.__depth=0,e.prototype.__offset=0,e.prototype.__stack=null,e.prototype.__state=0,e._ascii_class=null,e._state_transition_table=null,e.prototype.check=function(){var t,e,n,r;return t=arguments[0],0>t&&this.onError(),t>=128?n=30:(n=fm.jsonChecker._ascii_class[t],-1>=n&&this.onError()),r=fm.jsonChecker._state_transition_table[this.__state][n],r>=0?(this.__state=r,this.__offset=this.__offset+1):(fm.global.equals(r,-9)?(this.pop(fm.jsonCheckerMode.Key),this.__state=1):fm.global.equals(r,-8)?(this.pop(fm.jsonCheckerMode.Object),this.__state=1):fm.global.equals(r,-7)?(this.pop(fm.jsonCheckerMode.Array),this.__state=1):fm.global.equals(r,-6)?(this.push(fm.jsonCheckerMode.Key),this.__state=2):fm.global.equals(r,-5)?(this.push(fm.jsonCheckerMode.Array),this.__state=6):fm.global.equals(r,-4)?(e=this.__stack.peek(),fm.global.equals(e,fm.jsonCheckerMode.Key)?this.__state=4:fm.global.equals(e,fm.jsonCheckerMode.Array)||fm.global.equals(e,fm.jsonCheckerMode.Object)?this.__state=1:fm.global.equals(e,fm.jsonCheckerMode.Done)?(this.push(fm.jsonCheckerMode.String),this.__state=7):fm.global.equals(e,fm.jsonCheckerMode.String)?(this.pop(fm.jsonCheckerMode.String),this.__state=1):this.onError()):fm.global.equals(r,-3)?(e=this.__stack.peek(),fm.global.equals(e,fm.jsonCheckerMode.Object)?(this.pop(fm.jsonCheckerMode.Object),this.push(fm.jsonCheckerMode.Key),this.__state=3):fm.global.equals(e,fm.jsonCheckerMode.Array)?this.__state=5:this.onError()):fm.global.equals(r,-2)?(this.pop(fm.jsonCheckerMode.Key),this.push(fm.jsonCheckerMode.Object),this.__state=5):this.onError(),this.__offset=this.__offset+1)},e.prototype.checkString=function(){var t,e,n,r,s,i,o,a,u,l;if(l=arguments[0],i=0,s=0,t=new fm.holder(i),e=fm.parseAssistant.tryParseDoubleValue(l,t),i=t.getValue(),n=new fm.holder(s),r=fm.parseAssistant.tryParseDecimalValue(l,n),s=n.getValue(),fm.global.equals(l,"true")||fm.global.equals(l,"false")||fm.global.equals(l,"null")||e||r)return!0;try{for(u=0;u<l.length;)try{this.check(fm.convert.toInt32(l.charAt(u)))}finally{u++}return this.finalCheck(),!0}catch(o){return a=o,!1}finally{}},e.prototype.finalCheck=function(){return fm.global.equals(this.__state,1)||this.onError(),this.pop(fm.jsonCheckerMode.Done)},e.prototype.onError=function(){throw new Error(fm.stringExtensions.format("Invalid JSON text at character offset {0}.",fm.intExtensions.toString(this.__offset,"N0")))},e.prototype.pop=function(){var t;return t=arguments[0],fm.global.equals(this.__stack.pop(),t)?void 0:this.onError()},e.prototype.push=function(){var t;return t=arguments[0],this.__depth>0&&this.__stack.getCount()>=this.__depth&&this.onError(),this.__stack.push(t)},e._ascii_class=[-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,30,8,30,30,30,30,30,30,30,30,11,7,12,13,10,14,15,15,15,15,15,15,15,15,15,6,30,30,30,30,30,30,28,28,28,28,29,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,4,9,5,30,30,30,16,17,18,19,20,21,30,30,30,30,30,22,30,23,30,30,30,24,25,26,27,30,30,30,30,30,2,30,3,30,30],e._state_transition_table=[[0,0,-6,-1,-5,-1,-1,-1,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,2,-1,-9,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,3,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,4,-1,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,5,-6,-1,-5,-1,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[6,6,-6,-1,-5,-7,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[7,-1,7,7,7,7,7,7,-4,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,7,-1,7,7,-1,7,9,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,10,10,10,10,10,10,10,-1,-1,-1,-1,-1,-1,10,10,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,11,11,11,11,11,11,11,-1,-1,-1,-1,-1,-1,11,11,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,12,12,12,12,12,12,12,12,-1,-1,-1,-1,-1,-1,12,12,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,7,7,7,7,7,-1,-1,-1,-1,-1,-1,7,7,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,15,15,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,16,16,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,18,18,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,21,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,22,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,25,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,28,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,29,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1]],e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.nullLogProvider=function(t){function e(){this.writeLine=bind(this.writeLine,this),this.log=bind(this.log,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype.log=function(){var t,e,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],void(t=arguments[2])):void(2===arguments.length&&(e=arguments[0],n=arguments[1]))},e.prototype.writeLine=function(){var t;return t=arguments[0]},e}(fm.logProvider);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.serializer=function(t){function e(){var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.charToUnicodeString=function(){var t,e,n,r,s;return s=arguments[0],t=fm.serializer.intToHex(s>>12&15),e=fm.serializer.intToHex(s>>8&15),n=fm.serializer.intToHex(s>>4&15),r=fm.serializer.intToHex(15&s),fm.stringExtensions.concat(["\\u",t.toString(),e.toString(),n.toString(),r.toString()])},e.deserializeBoolean=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=!1,t=new fm.holder(n),e=fm.parseAssistant.tryParseBooleanValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeBooleanArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(e=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))e=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),e=new Array(r.length),n=0;n<r.length;)try{e[n]=fm.serializer.deserializeBoolean(fm.stringExtensions.trim(r[n]))}finally{n++}return e},e.deserializeDecimal=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseDecimalValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeDecimalArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(n=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeDecimal(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeDouble=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseDoubleValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeDoubleArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(n=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeDouble(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeFloat=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseFloatValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeFloatArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(n=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeFloat(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeGuid=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=fm.guid.empty,t=new fm.holder(n),e=fm.parseAssistant.tryParseGuidValue(fm.serializer.deserializeString(r),t),n=t.getValue(),e)return n}return null},e.deserializeGuidArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(e=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))e=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),e=new Array(r.length),n=0;n<r.length;)try{e[n]=fm.serializer.deserializeGuid(fm.stringExtensions.trim(r[n]))}finally{n++}return e},e.deserializeInteger=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseIntegerValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeIntegerArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(n=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeInteger(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeLong=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),fm.global.equals(r,"null"))return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseLongValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeLongArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(n=null,fm.global.equals(t.charAt(0),"["))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeLong(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeObject=function(){var t,e,n,r,s,i,o,a,u,l,c,p,f,h,g,m,d,y;if(a=arguments[0],n=arguments[1],t=arguments[2],fm.global.equals(a,null))return null;if(a=fm.stringExtensions.trim(a),fm.global.equals(a,"null")||a.length<2)return null;if(m=n(),fm.global.equals(a.charAt(0),"{")&&fm.global.equals(a.charAt(a.length-1),"}")&&a.length>2)for(a=fm.stringExtensions.concat(fm.stringExtensions.substring(a,1,a.length-2),","),l=0,c=0,r=!1,p=-2,u=fm.stringType.None,h=0,f=0,y=fm.stringExtensions.empty,g=fm.stringExtensions.empty,o=0;o<a.length;)try{if(e=a.charAt(o),s=fm.global.equals(p,o-1),i=!1,!r)switch(e){case"[":c++,i=!0;break;case"]":c--,i=!0;break;case"{":l++,i=!0;break;case"}":l--,i=!0}if(!i&&(r&&fm.global.equals(e,"\\")&&!s&&(p=o,i=!0),!i)){if(fm.global.equals(l,0)&&fm.global.equals(c,0))switch(e){case",":r||(g=fm.stringExtensions.trim(fm.stringExtensions.substring(a,f,o-f)),t(m,fm.serializer.deserializeString(y),g),h=o+1),i=!0;break;case":":r||(y=fm.stringExtensions.trim(fm.stringExtensions.substring(a,h,o-h)),f=o+1),i=!0}i||!fm.global.equals(e,"'")&&!fm.global.equals(e,'"')||s||(d=fm.global.equals(e,'"')?fm.stringType.Double:fm.stringType.Single,r?fm.global.equals(u,d)&&(r=!1,u=fm.stringType.None):(r=!0,u=d),i=!0)}}finally{o++}return m},e.deserializeObjectArray=function(){var t,e,n,r,s,i,o,a,u,l;if(i=arguments[0],n=arguments[1],e=arguments[2],a=fm.serializer.deserializeRawArray(i),fm.global.equals(a,null))return null;for(u=[],t=a,s=0,o=t.length;o>s;s++)l=t[s],r=fm.serializer.deserializeObject(l,n,e),fm.arrayExtensions.add(u,r);return u},e.deserializeObjectArrayFast=function(){var t,e,n,r,s,i,o,a,u,l;if(i=arguments[0],n=arguments[1],e=arguments[2],a=fm.serializer.deserializeRawArray(i),fm.global.equals(a,null))return null;for(u=[],t=a,s=0,o=t.length;o>s;s++)l=t[s],r=fm.serializer.deserializeObject(l,n,e),r.setSerialized(l),fm.arrayExtensions.add(u,r);return u},e.deserializeObjectFast=function(){var t,e,n,r;return n=arguments[0],e=arguments[1],t=arguments[2],r=fm.serializer.deserializeObject(n,e,t),fm.global.equals(r,null)||r.setSerialized(n),r},e.deserializeRaw=function(){var t;return t=arguments[0],fm.stringExtensions.isNullOrEmpty(t)?null:fm.stringExtensions.trim(t)},e.deserializeRawArray=function(){var t,e,n,r,s,i,o,a,u,l,c;if(s=arguments[0],fm.global.equals(s,null))return null;if(s=fm.stringExtensions.trim(s),fm.global.equals(s,"null")||s.length<2)return null;if(i=[],fm.global.equals(s.charAt(0),"[")&&fm.global.equals(s.charAt(s.length-1),"]")&&s.length>2)for(a=0,l=0,e=!1,u=-2,o=fm.stringType.None,r=1;r<s.length-1;)try{if(t=s.charAt(r),n=fm.global.equals(u,r-1),!e)switch(t){case"{":fm.global.equals(a,0)&&(l=r),a++;break;case"}":a--,fm.global.equals(a,0)&&fm.arrayExtensions.add(i,fm.stringExtensions.substring(s,l,r-l+1))}e&&fm.global.equals(t,"\\")&&!n?u=r:!fm.global.equals(t,"'")&&!fm.global.equals(t,'"')||n||(c=fm.global.equals(t,'"')?fm.stringType.Double:fm.stringType.Single,e?fm.global.equals(o,c)&&(e=!1,o=fm.stringType.None):(e=!0,o=c))}finally{r++}return i},e.deserializeString=function(){var t,e,n;return n=arguments[0],fm.stringExtensions.isNullOrEmpty(n)?null:(n=fm.stringExtensions.trim(n),fm.global.equals(n,"null")?null:(t=fm.stringExtensions.startsWith(n,'"')||fm.stringExtensions.startsWith(n,"'"),e=fm.stringExtensions.endsWith(n,'"')||fm.stringExtensions.endsWith(n,"'"),t&&e?fm.serializer.unescapeString(fm.serializer.trimQuotes(n)):null))},e.deserializeStringArray=function(){var t,e,n;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),fm.global.equals(t,"null"))return null;if(fm.global.equals(t.charAt(0),"[")){if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(n=fm.stringExtensions.split(t,[","]),e=0;e<n.length;)try{n[e]=fm.serializer.unescapeString(fm.serializer.trimQuotes(fm.stringExtensions.trim(n[e])))}finally{e++}return n}return[t]},e.escapeString=function(){var t,e,n,r,s;for(s=arguments[0],t=new fm.stringBuilder,r=-1,n=0;n<s.length;)try{if(e=s.charAt(n),e>"~")fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append(fm.serializer.charToUnicodeString(e));else switch(e){case"\b":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\b");break;case"\f":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\f");break;case"\n":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\n");break;case"\r":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\r");break;case"	":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\t");break;case'"':fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append('\\"');break;case"/":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\/");break;case"\\":fm.global.equals(r,-1)||(t.append(s,r,n-r),r=-1),t.append("\\\\");break;default:fm.global.equals(r,-1)&&(r=n)}}finally{n++}return fm.global.equals(r,-1)||t.append(s,r,s.length-r),t.toString()},e.intToHex=function(){var t;return t=arguments[0],9>=t?t+48:t-10+97},e.isValidJson=function(){var t;return t=arguments[0],(new fm.jsonChecker).checkString(t)},e.serializeBoolean=function(){var t;return t=arguments[0],null===t?"null":t?"true":"false"},e.serializeBooleanArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeBoolean(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeDecimal=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeDecimalArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeDecimal(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeDouble=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeDoubleArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeDouble(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeFloat=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeFloatArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeFloat(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeGuid=function(){var t;return t=arguments[0],null===t?"null":fm.stringExtensions.concat('"',t.toString(),'"')},e.serializeGuidArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeGuid(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeInteger=function(){var t;return t=arguments[0],null===t?"null":fm.intExtensions.toString(t)},e.serializeIntegerArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeInteger(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeLong=function(){var t;return t=arguments[0],null===t?"null":fm.intExtensions.toString(t);
},e.serializeLongArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeLong(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.serializeObject=function(){var t,e,n,r,s,i,o,a;if(o=arguments[0],e=arguments[1],fm.global.equals(o,null))return"null";for(r={},e(o,r),i=[],t=fm.hashExtensions.getKeys(r),n=0,s=t.length;s>n;n++)a=t[n],fm.arrayExtensions.add(i,fm.stringExtensions.concat(fm.serializer.serializeString(a),":",r[a]));return fm.stringExtensions.concat("{",fm.stringExtensions.join(",",fm.arrayExtensions.toArray(i)),"}")},e.serializeObjectArray=function(){var t,e,n,r;if(n=arguments[0],t=arguments[1],fm.global.equals(n,null))return"null";if(fm.global.equals(n.length,0))return"[]";for(r=new Array(n.length),e=0;e<n.length;)try{r[e]=fm.serializer.serializeObject(n[e],t)}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeObjectArrayFast=function(){var t,e,n,r;if(n=arguments[0],t=arguments[1],fm.global.equals(n,null))return"null";if(fm.global.equals(n.length,0))return"[]";for(r=new Array(n.length),e=0;e<n.length;)try{r[e]=fm.serializer.serializeObjectFast(n[e],t)}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeObjectFast=function(){var t,e;return e=arguments[0],t=arguments[1],fm.global.equals(e,null)?"null":((!e.getIsSerialized()||e.getIsDirty())&&e.setSerialized(fm.serializer.serializeObject(e,t)),e.getSerialized())},e.serializeRaw=function(){var t;return t=arguments[0]},e.serializeRawArray=function(){var t;return t=arguments[0],fm.global.equals(t,null)?"null":fm.stringExtensions.concat("[",fm.stringExtensions.join(",",t),"]")},e.serializeString=function(){var t;return t=arguments[0],fm.global.equals(t,null)?"null":fm.stringExtensions.concat('"',fm.serializer.escapeString(t),'"')},e.serializeStringArray=function(){var t,e,n;if(t=arguments[0],fm.global.equals(t,null))return"null";for(n=new Array(t.length),e=0;e<t.length;)try{n[e]=fm.serializer.serializeString(t[e])}finally{e++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},e.trimQuotes=function(){var t,e,n;return n=arguments[0],n.length>1&&(t=n.charAt(0),e=n.charAt(n.length-1),fm.global.equals(t,e)&&(fm.global.equals(t,"'")||fm.global.equals(t,'"'))&&(n=fm.stringExtensions.substring(n,1,n.length-2))),n},e.unescapeString=function(){var t,e,n,r,s,i;for(i=arguments[0],t=new fm.stringBuilder,s=-1,r=0;r<i.length;)try{if(e=i.charAt(r),fm.global.equals(e,"\\")){if(fm.global.equals(s,-1)||(t.append(i,s,r-s),s=-1),fm.global.equals(r,i.length-1))continue;switch(n=i.charAt(r+1)){case"b":t.append("\b");break;case"f":t.append("\f");break;case"n":t.append("\n");break;case"r":t.append("\r");break;case"t":t.append("	");break;case"/":t.append("/");break;case"u":r<i.length-5?(t.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,6)).toString()),r+=4):t.append("u");break;case"x":r<i.length-3?(t.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,4)).toString()),r+=2):t.append("x");break;default:t.append(n.toString())}r++;continue}fm.global.equals(s,-1)&&(s=r)}finally{r++}return fm.global.equals(s,-1)||t.append(i,s,i.length-s),t.toString()},e.unicodeStringToChar=function(){var t;if(t=arguments[0],t.length<2)throw new Error("Unicode string has invalid length.");return fm.convert.toInt32(t.substring(2),16)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketSendState=function(t){function e(){this.setSendArgs=bind(this.setSendArgs,this),this.setRequestBytes=bind(this.setRequestBytes,this),this.getSendArgs=bind(this.getSendArgs,this),this.getRequestBytes=bind(this.getRequestBytes,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBytes=null,e.prototype._sendArgs=null,e.prototype.getRequestBytes=function(){return this._requestBytes},e.prototype.getSendArgs=function(){return this._sendArgs},e.prototype.setRequestBytes=function(){var t;return t=arguments[0],this._requestBytes=t},e.prototype.setSendArgs=function(){var t;return t=arguments[0],this._sendArgs=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketRequest=function(t){function e(){this.setCallback=bind(this.setCallback,this),this.setArgs=bind(this.setArgs,this),this.getCallback=bind(this.getCallback,this),this.getArgs=bind(this.getArgs,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):t=e.__super__.constructor.call(this)}return extend(e,t),e.prototype._args=null,e.prototype._callback=null,e.prototype.getArgs=function(){return this._args},e.prototype.getCallback=function(){return this._callback},e.prototype.setArgs=function(){var t;return t=arguments[0],this._args=t},e.prototype.setCallback=function(){var t;return t=arguments[0],this._callback=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketWebRequestTransfer=function(t){function e(){this.streamFailure=bind(this.streamFailure,this),this.shutdown=bind(this.shutdown,this),this.setWebSocket=bind(this.setWebSocket,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.receive=bind(this.receive,this),this.open=bind(this.open,this),this.getWebSocket=bind(this.getWebSocket,this),this.connectSuccess=bind(this.connectSuccess,this),this.connectFailure=bind(this.connectFailure,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(t=e.__super__.constructor.call(this),fm.util.attachProperties(this,arguments[0]),t):(n=arguments[0],t=e.__super__.constructor.call(this,n))}return extend(e,t),e.prototype._activeRequest=null,e.prototype._webSocket=null,e.prototype.connectFailure=function(){var t;return t=arguments[0],fm.global.equals(this.getOnOpenFailure(),null)?void 0:this.getOnOpenFailure()(t)},e.prototype.connectSuccess=function(){var t;return t=arguments[0],fm.global.equals(this.getOnOpenSuccess(),null)?void 0:this.getOnOpenSuccess()(t)},e.prototype.getWebSocket=function(){return this._webSocket},e.prototype.open=function(){var t,e,n,r;n=arguments[0],this.setWebSocket(new fm.webSocket(this.getUrl()));try{return r=new fm.webSocketOpenArgs,r.setHandshakeTimeout(this.getHandshakeTimeout()),r.setHeaders(n),r.setOnSuccess(this.connectSuccess),r.setOnFailure(this.connectFailure),r.setOnStreamFailure(this.streamFailure),r.setOnRequestCreated(this.getOnRequestCreated()),r.setOnResponseReceived(this.getOnResponseReceived()),r.setOnReceive(this.receive),r.setSender(this.getSender()),this.getWebSocket().open(r)}catch(t){return e=t,fm.log.error("Could not open WebSocket.",e)}finally{}},e.prototype.receive=function(){var t,e;return t=arguments[0],e=new fm.httpResponseArgs(this._activeRequest.getArgs()),e.setTextContent(t.getTextMessage()),e.setBinaryContent(t.getBinaryMessage()),this._activeRequest.getCallback()(e)},e.prototype.send=function(){var t;throw t=arguments[0],new Error("Synchronous WebSockets are not supported.")},e.prototype.sendAsync=function(){var t,e,n,r,s,i,o,a,u;a=arguments[0],e=arguments[1];try{return o=new fm.webSocketRequest,o.setArgs(a),o.setCallback(e),i=o,t=new fm.webSocketSendArgs,t.setTimeout(i.getArgs().getTimeout()),u=t,u.setTextMessage(i.getArgs().getTextContent()),u.setBinaryMessage(i.getArgs().getBinaryContent()),this._activeRequest=i,this.getWebSocket().send(u)}catch(n){return r=n,s=new fm.httpResponseArgs(a),s.setException(r),s.setStatusCode(0),e(s)}finally{}},e.prototype.setWebSocket=function(){var t;return t=arguments[0],this._webSocket=t},e.prototype.shutdown=function(){return this.getWebSocket().close()},e.prototype.streamFailure=function(){var t;return t=arguments[0],fm.global.equals(this.getOnStreamFailure(),null)?void 0:this.getOnStreamFailure()(t)},e}(fm.webSocketTransfer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.timeoutTimer=function(t){function e(t,n){this._timerCallback=bind(this._timerCallback,this),this.stop=bind(this.stop,this),this.start=bind(this.start,this),e.__super__.constructor.call(this),this._callback=t,this._state=n}return extend(e,t),e.prototype._timer=null,e.prototype._callback=null,e.prototype._state=null,e.prototype._currentTimeout=0,e.prototype.start=function(t){if(this._timer)throw new Error("Timer is currently active.");return this._currentTimeout=t,t=fm.mathAssistant.max(0,t),this._timer=setTimeout(this._timerCallback,t)},e.prototype.stop=function(){return this._timer?(clearTimeout(this._timer),this._timer=null,!0):!1},e.prototype._timerCallback=function(){return this._currentTimeout>=0&&this.stop()&&this._callback?this._callback(this._state):void 0},e}(fm.baseTimeoutTimer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocket=function(t){function e(t){this.raiseOnResponseReceived=bind(this.raiseOnResponseReceived,this),this.raiseOnRequestCreated=bind(this.raiseOnRequestCreated,this),this.raiseCloseComplete=bind(this.raiseCloseComplete,this),this.raiseReceive=bind(this.raiseReceive,this),this.raiseStreamFailure=bind(this.raiseStreamFailure,this),this.raiseOpenFailure=bind(this.raiseOpenFailure,this),this.raiseOpenSuccess=bind(this.raiseOpenSuccess,this),this.close=bind(this.close,this),this.send=bind(this.send,this),this._onMessage=bind(this._onMessage,this),this._onClose=bind(this._onClose,this),this._onError=bind(this._onError,this),this._onOpen=bind(this._onOpen,this),this.open=bind(this.open,this),this.getIsOpen=bind(this.getIsOpen,this),this.getBufferedAmount=bind(this.getBufferedAmount,this),e.__super__.constructor.call(this),t=fm.util.absolutizeUrl(t),t=t.replace("https://","wss://"),t=t.replace("http://","ws://"),this._requestUrl=t}return extend(e,t),e.getExists=function(){return!0},e._disableBinary=!1,e.setDisableBinary=function(t){return e._disableBinary=t},e.getDisableBinary=function(){return"undefined"==typeof Uint8Array?!0:e._disableBinary},e.prototype.getBufferedAmount=function(){return this._webSocket?this._webSocket.bufferedAmount:0},e.prototype.getIsOpen=function(){return this._webSocket?1===this._webSocket.readyState:!1},e.prototype.open=function(t){var e,n,r,s,i;if(i=this._requestUrl,r=t.getHeaders(),s={},r&&(s=r.toHash()),fm.webSocket.getDisableBinary()&&(s["X-FM-DisableBinary"]="true"),i=fm.httpTransfer.addQueryToUrl(i,"headers",fm.json.serialize(s)),"WebSocket"in window?this._webSocket=new WebSocket(i):"MozWebSocket"in window&&(this._webSocket=new MozWebSocket(i)),!this._webSocket)return void this.raiseOpenFailure(t,{statusCode:0,exception:new Error("Could not create WebSocket.")});if(!fm.webSocket.getDisableBinary())try{this._webSocket.binaryType="arraybuffer"}catch(n){e=n,fm.webSocket.setDisableBinary(!0)}return this._onRequestCreated=t.getOnRequestCreated(),this._onResponseReceived=t.getOnResponseReceived(),this.raiseOnRequestCreated(t),this._opening=!0,this._closing=!1,this._openArgs=t,this._raisedStreamFailure=!1,this._raisedOpenFailure=!1,this._webSocket.onopen=this._onOpen,this._webSocket.onerror=this._onError,this._webSocket.onclose=this._onClose,this._webSocket.onmessage=this._onMessage},e.prototype._onOpen=function(t){var e;return e=this._openArgs,this.raiseOnResponseReceived(e),this._opening=!1,this.raiseOpenSuccess(e)},e.prototype._onError=function(t){var e;if(e=this._openArgs,this._opening){if(this._opening=!1,!this._raisedOpenFailure)return this._raisedOpenFailure=!0,this.raiseOpenFailure(e,{statusCode:t.code,exception:new Error(t.message||"Unspecified WebSocket error.")})}else if(!this._closing&&!this._raisedStreamFailure)return this._raisedStreamFailure=!0,this.raiseStreamFailure(e,{statusCode:t.code,exception:new Error(t.message||"Unspecified WebSocket error.")})},e.prototype._onClose=function(t){var e;if(e=this._openArgs,this._opening){if(this._opening=!1,!this._raisedOpenFailure)return this._raisedOpenFailure=!0,this.raiseOpenFailure(e,{statusCode:t.code,exception:new Error("Could not open WebSocket.")})}else if(this._aborting){if(!this._raisedStreamFailure)return this._raisedStreamFailure=!0,this.raiseStreamFailure(e,{statusCode:t.code,exception:new Error("WebSocket request timed out.")})}else if(!this._closing&&!this._raisedStreamFailure)return this._raisedStreamFailure=!0,this.raiseStreamFailure(e,{statusCode:t.code,exception:new Error("WebSocket closed.")})},e.prototype._onMessage=function(t){var e,n,r;return e=this._openArgs,this._timer&&window.clearTimeout(this._timer),this.raiseOnResponseReceived(this._sendArgs),this._sendArgs=null,n=null,r=null,!fm.webSocket.getDisableBinary()&&t.data instanceof ArrayBuffer?n=new Uint8Array(t.data):r=t.data,this.raiseReceive(e,{textMessage:r,binaryMessage:n})},e.prototype.send=function(t){var e,n,r,s,i;if(this._webSocket){if(this._sendArgs=t,this.raiseOnRequestCreated(t),this._timer&&window.clearTimeout(this._timer),i=t.getTimeout(),i>0&&(this._timer=window.setTimeout(function(t){return function(){return t._aborting=!0,t._webSocket.close(),t._onClose({code:0})}}(this),i)),s=!1,e=t.getBinaryMessage(),!fm.webSocket.getDisableBinary()&&e)try{this._webSocket.send(e.buffer),s=!0}catch(r){n=r,fm.webSocket.setDisableBinary(!0)}return s?void 0:this._webSocket.send(t.getTextMessage())}},e.prototype.close=function(t){var e,n;return t||this.close(new fm.webSocketCloseArgs),this._webSocket?(e=t.getStatusCode()||fm.webSocketStatusCode.Normal,n=t.getReason()||"",this._closing=!0,this._webSocket.close(e,n),this._webSocket=null,this.raiseCloseComplete(t,{statusCode:e,reason:n}),!0):!1},e.prototype.raiseOpenSuccess=function(t){var e,n;return n=t.getOnSuccess(),n?(e=new fm.webSocketOpenSuccessArgs,e.setOpenArgs(t),n(e)):void 0},e.prototype.raiseOpenFailure=function(t,e){var n,r;return r=t.getOnFailure(),r?(n=new fm.webSocketOpenFailureArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseStreamFailure=function(t,e){var n,r;return r=t.getOnStreamFailure(),r?(n=new fm.webSocketStreamFailureArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseReceive=function(t,e){var n,r;return r=t.getOnReceive(),r?(n=new fm.webSocketReceiveArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseCloseComplete=function(t,e){var n,r;return r=t.getOnComplete(),r?(n=new fm.webSocketCloseCompleteArgs(e),n.setCloseArgs(t),r(n)):void 0},e.prototype.raiseOnRequestCreated=function(t){var e,n;return n=this._onRequestCreated(),n?(e=new fm.httpRequestCreatedArgs,e.setRequestArgs(t),e.setSender(t.getSender()),e.setRequest(null),n(e)):void 0},e.prototype.raiseOnResponseReceived=function(t){var e,n;return n=this._onResponseReceived(),n?(e=new fm.httpResponseReceivedArgs,e.setRequestArgs(t),e.setSender(t.getSender()),e.setResponse(null),n(e)):void 0},e}(fm.baseWebSocket);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpWebRequestTransfer=function(t){function e(){return this.sendInternal=bind(this.sendInternal,this),this.process=bind(this.process,this),this.sendBinary=bind(this.sendBinary,this),this.sendBinaryAsync=bind(this.sendBinaryAsync,this),this.sendText=bind(this.sendText,this),this.sendTextAsync=bind(this.sendTextAsync,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e._corsFailCache={},e._corsSuccessCache={},e._pmFailCache={},e._pmSuccessCache={},e.getPlatformCode=function(){return"js"},e.setDisableCORS=function(t){return e._disableCORS=t},e.getDisableCORS=function(){return e._disableCORS||!1},e.setDisablePostMessage=function(t){return e._disablePostMessage=t},e.getDisablePostMessage=function(){return e._disablePostMessage||!1},e.setDisableJSONP=function(t){return e._disableJSONP=t},e.getDisableJSONP=function(){return e._disableJSONP||!1},e.setForceJSONP=function(t){return e._forceJSONP=t},e.getForceJSONP=function(){return e._forceJSONP||!1},e.prototype.sendTextAsync=function(t,e){return fm.util.addOnLoad(function(n){return function(){return n.process(t,e)}}(this))},e.prototype.sendText=function(t){return this.process(t,null)},e.prototype.sendBinaryAsync=function(t,e){return fm.util.addOnLoad(function(n){return function(){return n.process(t,e)}}(this))},e.prototype.sendBinary=function(t){return this.process(t,null)},e.prototype.process=function(t,e){var n,r,s,i,o,a,u,l,c,p;return u=fm.httpWebRequestTransfer,p=t.getUrl(),t._processed||(p=fm.util.absolutizeUrl(p),t.setUrl(p),t._processed=!0),c=t.getSender(),r=u.getDisableCORS()||(c?c.getDisableCORS():!1),i=u.getDisablePostMessage()||(c?c.getDisablePostMessage():!1),s=u.getDisableJSONP()||(c?c.getDisableJSONP():!1),a=u.getForceJSONP()||(c?c.getForceJSONP():!1),o=fm.xhr.send,n=!1,l=!1,fm.util.isXD(p)&&(r||!u.canCORS()||u._corsFailCache[p]?i||!u.canPostMessage()||u._pmFailCache[p]?o=fm.jsonp.send:(l=!0,o=fm.postMessage.send):n=!0,s&&o===fm.jsonp.send&&(l=!0,o=fm.postMessage.send)),a&&(o=fm.jsonp.send),this.sendInternal(o,n,l,t,e)},e.prototype.sendInternal=function(t,e,n,r,s){var i,o,a,u,l,c;switch(l=this,u=new fm.httpResponseArgs(r),u.setException(new Error("Environment does not support synchronous requests.")),c=r.getUrl(),i=r.getDynamicProperties().frameUrl,i&&!r._processedFrame&&(i=fm.util.absolutizeUrl(i),r.getDynamicProperties().frameUrl=i,r._processedFrame=!0),i=i||c,o="GET",r.getMethod()){case fm.httpMethod.Head:o="HEAD";break;case fm.httpMethod.Post:o="POST";break;case fm.httpMethod.Put:o="PUT";break;case fm.httpMethod.Patch:o="PATCH";break;case fm.httpMethod.Delete:o="DELETE"}return a={sync:s?!1:!0,url:c,frameUrl:i,method:o,content:r.getTextContent(),contentBinary:r.getBinaryContent(),headers:r.getHeaders().toHash(),timeout:r.getTimeout(),robustResponse:!0,onRequestCreated:function(t){return function(t){var e,n;return n=r.getOnRequestCreated(),n?(e=new fm.httpRequestCreatedArgs,e.setRequestArgs(r),e.setSender(r.getSender()),e.setRequest(t),n(e)):void 0}}(this),onResponseReceived:function(t){return function(t){var e,n;return n=r.getOnResponseReceived(),n?(e=new fm.httpResponseReceivedArgs,e.setRequestArgs(r),e.setSender(r.getSender()),e.setResponse(t),n(e)):void 0}}(this),onSuccess:function(t){return function(t){return 0===t.statusCode&&e?(fm.httpWebRequestTransfer._corsSuccessCache[c]||(fm.httpWebRequestTransfer._corsFailCache[c]=!0),void(s?l.sendTextAsync(r,s):u=l.sendText(r))):(e?(fm.httpWebRequestTransfer._corsSuccessCache[c]=!0,delete fm.httpWebRequestTransfer._corsFailCache[c]):n&&(fm.httpWebRequestTransfer._pmSuccessCache[c]=!0,delete fm.httpWebRequestTransfer._pmFailCache[c]),u.setException(null),u.setTextContent(t.content),t.hasOwnProperty("contentBinary")&&u.setBinaryContent(t.contentBinary),u.setStatusCode(t.statusCode),u.setHeaders(new fm.nameValueCollection(t.headers)),s?s(u):void 0)}}(this),onFailure:function(t){return function(t){var i;return e&&!fm.httpWebRequestTransfer._corsSuccessCache[c]?(fm.httpWebRequestTransfer._corsFailCache[c]=!0,void(s?l.sendTextAsync(r,s):u=l.sendText(r))):!n||!t.local&&fm.httpWebRequestTransfer._pmSuccessCache[c]?(i=new Error(t.message),u.setException(i),s?s(u):void 0):(fm.httpWebRequestTransfer._pmFailCache[c]=!0,void(s?l.sendTextAsync(r,s):u=l.sendText(r)))}}(this)},t(a),u},e.canCORS=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},e.canPostMessage=function(){return fm.util.isIE6()||fm.util.isIE7()?!1:window.postMessage?!0:!1},e}(fm.httpTransfer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.domLogProvider=function(t){function e(t,n){this.log=bind(this.log,this),this.writeLine=bind(this.writeLine,this),this._container=t,e.__super__.constructor.call(this),n||(n=fm.logLevel.Warn),this.setLevel(n)}return extend(e,t),e.prototype._container=null,e.prototype.writeLine=function(t){var e;return e=document.createElement("div"),e.innerHTML=t.replace(/\n/g,"<br />"),this._container.appendChild(e)},e.prototype.log=function(t,e,n){var r;return r=fm.logProvider.getPrefix(t,!0)+" "+(e||""),n&&(r+="<br />"+n.message),this.writeLine(r)},e}(fm.logProvider);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;return fm.consoleLogProvider=function(t){function e(t){this.log=bind(this.log,this),this.writeLine=bind(this.writeLine,this),e.__super__.constructor.call(this),t||(t=fm.logLevel.Warn),this.setLevel(t)}return extend(e,t),e.prototype.writeLine=function(t){return window.console&&window.console.log?window.console.log(t):void 0},e.prototype.log=function(t,e,n){var r;return r=fm.logProvider.getPrefix(t,!0)+" "+e,n&&(r+="\n"+n.message),this.writeLine(r)},e}(fm.logProvider),function(){return fm.httpTransfer.addQueryToUrl=function(){var t,e,n;return 1===arguments.length?e=arguments[0]:2===arguments.length?(e=arguments[0],t=arguments[1],fm.httpTransfer.addQueryToUrl(e,t,null)):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],fm.stringExtensions.isNullOrEmpty(t)?e:((null===n||"undefined"==typeof n)&&(n=""),n=encodeURIComponent(n),fm.stringExtensions.concat([e,-1===fm.stringExtensions.indexOf(e,"?",fm.stringComparison.OrdinalIgnoreCase)?"?":"&",t,"=",n]))):void 0}}(),fm});